ARM GAS  /tmp/cccXI43k.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"tcp_out.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.tcp_write_checks,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	tcp_write_checks:
  25              	.LFB156:
  26              		.file 1 "Middlewares/Third_Party/LwIP/src/core/tcp_out.c"
   1:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
   2:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Transmission Control Protocol, outgoing traffic
   4:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
   5:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * The output functions of TCP.
   6:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
   7:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
   8:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
   9:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /*
  10:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
  11:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * All rights reserved.
  12:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  13:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Redistribution and use in source and binary forms, with or without modification,
  14:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * are permitted provided that the following conditions are met:
  15:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  16:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *    this list of conditions and the following disclaimer.
  18:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *    this list of conditions and the following disclaimer in the documentation
  20:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *    and/or other materials provided with the distribution.
  21:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * 3. The name of the author may not be used to endorse or promote products
  22:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *    derived from this software without specific prior written permission.
  23:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  24:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  25:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  26:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  27:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  28:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  29:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  30:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  31:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  32:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
ARM GAS  /tmp/cccXI43k.s 			page 2


  33:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * OF SUCH DAMAGE.
  34:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  35:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This file is part of the lwIP TCP/IP stack.
  36:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  37:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Author: Adam Dunkels <adam@sics.se>
  38:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  39:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
  40:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  41:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/opt.h"
  42:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  43:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP /* don't build if not configured for use in lwipopts.h */
  44:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  45:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/priv/tcp_priv.h"
  46:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/def.h"
  47:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/mem.h"
  48:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/memp.h"
  49:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/ip_addr.h"
  50:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/netif.h"
  51:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/inet_chksum.h"
  52:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/stats.h"
  53:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/ip6.h"
  54:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/ip6_addr.h"
  55:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
  56:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/sys.h"
  57:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
  58:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  59:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include <string.h>
  60:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  61:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Define some copy-macros for checksum-on-copy so that the code looks
  62:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    nicer by preventing too many ifdef's. */
  63:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
  64:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_DATA_COPY(dst, src, len, seg) do { \
  65:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_seg_add_chksum(LWIP_CHKSUM_COPY(dst, src, len), \
  66:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                      len, &seg->chksum, &seg->chksum_swapped); \
  67:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->flags |= TF_SEG_DATA_CHECKSUMMED; } while(0)
  68:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_DATA_COPY2(dst, src, len, chksum, chksum_swapped)  \
  69:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_seg_add_chksum(LWIP_CHKSUM_COPY(dst, src, len), len, chksum, chksum_swapped);
  70:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_CHECKSUM_ON_COPY*/
  71:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_DATA_COPY(dst, src, len, seg)                     MEMCPY(dst, src, len)
  72:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_DATA_COPY2(dst, src, len, chksum, chksum_swapped) MEMCPY(dst, src, len)
  73:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY*/
  74:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  75:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Define this to 1 for an extra check that the output checksum is valid
  76:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * (usefule when the checksum is generated by the application, not the stack) */
  77:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifndef TCP_CHECKSUM_ON_COPY_SANITY_CHECK
  78:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_CHECKSUM_ON_COPY_SANITY_CHECK   0
  79:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
  80:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Allow to override the failure of sanity check from warning to e.g. hard failure */
  81:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY_SANITY_CHECK
  82:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifndef TCP_CHECKSUM_ON_COPY_SANITY_CHECK_FAIL
  83:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_CHECKSUM_ON_COPY_SANITY_CHECK_FAIL(msg) LWIP_DEBUGF(TCP_DEBUG | LWIP_DBG_LEVEL_WARNING,
  84:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
  85:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
  86:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  87:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
  88:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** The size of segment pbufs created when TCP_OVERSIZE is enabled */
  89:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifndef TCP_OVERSIZE_CALC_LENGTH
ARM GAS  /tmp/cccXI43k.s 			page 3


  90:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_OVERSIZE_CALC_LENGTH(length) ((length) + TCP_OVERSIZE)
  91:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
  92:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
  93:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  94:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Forward declarations.*/
  95:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static err_t tcp_output_segment(struct tcp_seg *seg, struct tcp_pcb *pcb, struct netif *netif);
  96:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  97:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Allocate a pbuf and create a tcphdr at p->payload, used for output
  98:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * functions other than the default tcp_output -> tcp_output_segment
  99:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * (e.g. tcp_send_empty_ack, etc.)
 100:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 101:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb tcp pcb for which to send a packet (used to initialize tcp_hdr)
 102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param optlen length of header-options
 103:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param datalen length of tcp data to reserve in pbuf
 104:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param seqno_be seqno in network byte order (big-endian)
 105:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return pbuf with p->payload being the tcp_hdr
 106:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 107:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct pbuf *
 108:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_alloc_header(struct tcp_pcb *pcb, u16_t optlen, u16_t datalen,
 109:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                       u32_t seqno_be /* already in network byte order */)
 110:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 111:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_hdr *tcphdr;
 112:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p = pbuf_alloc(PBUF_IP, TCP_HLEN + optlen + datalen, PBUF_RAM);
 113:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p != NULL) {
 114:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("check that first pbuf can hold struct tcp_hdr",
 115:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  (p->len >= TCP_HLEN + optlen));
 116:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr = (struct tcp_hdr *)p->payload;
 117:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->src = lwip_htons(pcb->local_port);
 118:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->dest = lwip_htons(pcb->remote_port);
 119:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->seqno = seqno_be;
 120:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->ackno = lwip_htonl(pcb->rcv_nxt);
 121:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_HDRLEN_FLAGS_SET(tcphdr, (5 + optlen / 4), TCP_ACK);
 122:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->wnd = lwip_htons(TCPWND_MIN16(RCV_WND_SCALE(pcb, pcb->rcv_ann_wnd)));
 123:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->chksum = 0;
 124:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->urgp = 0;
 125:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 126:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* If we're sending a packet, update the announced right window edge */
 127:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rcv_ann_right_edge = pcb->rcv_nxt + pcb->rcv_ann_wnd;
 128:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return p;
 130:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 131:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 132:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 133:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_close() to send a segment including FIN flag but not data.
 134:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 135:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb over which to send a segment
 136:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return ERR_OK if sent, another err_t otherwise
 137:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 138:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
 139:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_send_fin(struct tcp_pcb *pcb)
 140:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 141:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* first, try to add the fin to the last unsent segment */
 142:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent != NULL) {
 143:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct tcp_seg *last_unsent;
 144:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (last_unsent = pcb->unsent; last_unsent->next != NULL;
 145:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 146:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
ARM GAS  /tmp/cccXI43k.s 			page 4


 147:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((TCPH_FLAGS(last_unsent->tcphdr) & (TCP_SYN | TCP_FIN | TCP_RST)) == 0) {
 148:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* no SYN/FIN/RST flag in the header, we can add the FIN flag */
 149:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCPH_SET_FLAG(last_unsent->tcphdr, TCP_FIN);
 150:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->flags |= TF_FIN;
 151:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return ERR_OK;
 152:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 153:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 154:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* no data, no length, flags, copy=1, no optdata */
 155:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return tcp_enqueue_flags(pcb, TCP_FIN);
 156:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 157:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 158:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 159:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Create a TCP segment with prefilled header.
 160:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 161:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_write and tcp_enqueue_flags.
 162:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 163:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection.
 164:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param p pbuf that is used to hold the TCP header.
 165:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param flags TCP flags for header.
 166:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param seqno TCP sequence number of this packet
 167:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param optflags options to include in TCP header
 168:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return a new tcp_seg pointing to p, or NULL.
 169:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * The TCP header is filled in except ackno and wnd.
 170:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * p is freed on failure.
 171:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 172:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct tcp_seg *
 173:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_create_segment(struct tcp_pcb *pcb, struct pbuf *p, u8_t flags, u32_t seqno, u8_t optflags)
 174:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 175:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
 176:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen = LWIP_TCP_OPT_LENGTH(optflags);
 177:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 178:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((seg = (struct tcp_seg *)memp_malloc(MEMP_TCP_SEG)) == NULL) {
 179:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_create_segment: no memory.\n"));
 180:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_free(p);
 181:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 182:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 183:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->flags = optflags;
 184:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = NULL;
 185:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p = p;
 186:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("p->tot_len >= optlen", p->tot_len >= optlen);
 187:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->len = p->tot_len - optlen;
 188:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 189:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->oversize_left = 0;
 190:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 191:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 192:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->chksum = 0;
 193:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->chksum_swapped = 0;
 194:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* check optflags */
 195:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("invalid optflags passed: TF_SEG_DATA_CHECKSUMMED",
 196:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (optflags & TF_SEG_DATA_CHECKSUMMED) == 0);
 197:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 198:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 199:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* build TCP header */
 200:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pbuf_header(p, TCP_HLEN)) {
 201:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_create_segment: no room for TCP he
 202:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.err);
 203:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_seg_free(seg);
ARM GAS  /tmp/cccXI43k.s 			page 5


 204:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 205:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 206:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr = (struct tcp_hdr *)seg->p->payload;
 207:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->src = lwip_htons(pcb->local_port);
 208:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->dest = lwip_htons(pcb->remote_port);
 209:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->seqno = lwip_htonl(seqno);
 210:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* ackno is set in tcp_output */
 211:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCPH_HDRLEN_FLAGS_SET(seg->tcphdr, (5 + optlen / 4), flags);
 212:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* wnd and chksum are set in tcp_output */
 213:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->urgp = 0;
 214:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return seg;
 215:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 216:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 217:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 218:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Allocate a PBUF_RAM pbuf, perhaps with extra space at the end.
 219:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 220:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This function is like pbuf_alloc(layer, length, PBUF_RAM) except
 221:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * there may be extra bytes available at the end.
 222:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 223:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param layer flag to define header size.
 224:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param length size of the pbuf's payload.
 225:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param max_length maximum usable size of payload+oversize.
 226:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param oversize pointer to a u16_t that will receive the number of usable tail bytes.
 227:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb The TCP connection that will enqueue the pbuf.
 228:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param apiflags API flags given to tcp_write.
 229:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param first_seg true when this pbuf will be used in the first enqueued segment.
 230:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 231:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 232:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct pbuf *
 233:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_pbuf_prealloc(pbuf_layer layer, u16_t length, u16_t max_length,
 234:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   u16_t *oversize, struct tcp_pcb *pcb, u8_t apiflags,
 235:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   u8_t first_seg)
 236:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 237:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
 238:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t alloc = length;
 239:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 240:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
 241:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(max_length);
 242:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(pcb);
 243:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(apiflags);
 244:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(first_seg);
 245:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   alloc = max_length;
 246:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* LWIP_NETIF_TX_SINGLE_PBUF */
 247:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (length < max_length) {
 248:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Should we allocate an oversized pbuf, or just the minimum
 249:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * length required? If tcp_write is going to be called again
 250:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * before this segment is transmitted, we want the oversized
 251:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * buffer. If the segment will be transmitted immediately, we can
 252:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * save memory by allocating only length. We use a simple
 253:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * heuristic based on the following information:
 254:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 255:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Did the user set TCP_WRITE_FLAG_MORE?
 256:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 257:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Will the Nagle algorithm defer transmission of this segment?
 258:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
 259:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((apiflags & TCP_WRITE_FLAG_MORE) ||
 260:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         (!(pcb->flags & TF_NODELAY) &&
ARM GAS  /tmp/cccXI43k.s 			page 6


 261:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          (!first_seg ||
 262:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unsent != NULL ||
 263:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unacked != NULL))) {
 264:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       alloc = LWIP_MIN(max_length, LWIP_MEM_ALIGN_SIZE(TCP_OVERSIZE_CALC_LENGTH(length)));
 265:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 266:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 267:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
 268:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = pbuf_alloc(layer, alloc, PBUF_RAM);
 269:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 270:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 271:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 272:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("need unchained pbuf", p->next == NULL);
 273:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *oversize = p->len - length;
 274:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* trim p->len to the currently used size */
 275:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p->len = p->tot_len = length;
 276:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return p;
 277:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 278:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_OVERSIZE */
 279:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define tcp_pbuf_prealloc(layer, length, mx, os, pcb, api, fst) pbuf_alloc((layer), (length), PBUF_
 280:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 281:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 282:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 283:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Add a checksum of newly added data to the segment */
 284:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
 285:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_seg_add_chksum(u16_t chksum, u16_t len, u16_t *seg_chksum,
 286:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                    u8_t *seg_chksum_swapped)
 287:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 288:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t helper;
 289:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* add chksum to old chksum and fold to u16_t */
 290:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   helper = chksum + *seg_chksum;
 291:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   chksum = FOLD_U32T(helper);
 292:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((len & 1) != 0) {
 293:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     *seg_chksum_swapped = 1 - *seg_chksum_swapped;
 294:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     chksum = SWAP_BYTES_IN_WORD(chksum);
 295:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 296:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *seg_chksum = chksum;
 297:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 298:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 299:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 300:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Checks if tcp_write is allowed or not (checks state, snd_buf and snd_queuelen).
 301:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 302:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp pcb to check for
 303:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param len length of data to send (checked agains snd_buf)
 304:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return ERR_OK if tcp_write is allowed to proceed, another err_t otherwise
 305:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 306:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static err_t
 307:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_write_checks(struct tcp_pcb *pcb, u16_t len)
 308:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
  27              		.loc 1 308 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 08B5     		push	{r3, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
ARM GAS  /tmp/cccXI43k.s 			page 7


  36              		.cfi_offset 14, -4
 309:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* connection is in invalid state for data transmission? */
 310:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((pcb->state != ESTABLISHED) &&
  37              		.loc 1 310 0
  38 0002 037D     		ldrb	r3, [r0, #20]	@ zero_extendqisi2
  39 0004 042B     		cmp	r3, #4
  40 0006 18BF     		it	ne
  41 0008 072B     		cmpne	r3, #7
  42 000a 03D0     		beq	.L2
 311:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (pcb->state != CLOSE_WAIT) &&
  43              		.loc 1 311 0
  44 000c 022B     		cmp	r3, #2
  45 000e 01D0     		beq	.L2
 312:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (pcb->state != SYN_SENT) &&
  46              		.loc 1 312 0
  47 0010 032B     		cmp	r3, #3
  48 0012 39D1     		bne	.L8
  49              	.L2:
 313:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (pcb->state != SYN_RCVD)) {
 314:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_STATE | LWIP_DBG_LEVEL_SEVERE, ("tcp_write() called in 
 315:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_CONN;
 316:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else if (len == 0) {
  50              		.loc 1 316 0
  51 0014 0029     		cmp	r1, #0
  52 0016 3AD0     		beq	.L9
 317:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
 318:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 319:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 320:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* fail on too much data */
 321:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (len > pcb->snd_buf) {
  53              		.loc 1 321 0
  54 0018 B0F86030 		ldrh	r3, [r0, #96]
  55 001c 8B42     		cmp	r3, r1
  56 001e 08D3     		bcc	.L14
 322:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("tcp_write: too much data (len=%"U16_F" 
 323:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       len, pcb->snd_buf));
 324:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags |= TF_NAGLEMEMERR;
 325:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 326:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 327:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 328:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_write: queuelen: %"TCPWNDSIZE_F"\n", (tcpwnd_size_t)pcb->snd_qu
 329:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 330:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* If total number of pbufs on the unsent/unacked queues exceeds the
 331:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * configured maximum, return an error */
 332:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* check for configured max queuelen and possible overflow */
 333:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((pcb->snd_queuelen >= TCP_SND_QUEUELEN) || (pcb->snd_queuelen > TCP_SNDQUEUELEN_OVERFLOW)) {
  57              		.loc 1 333 0
  58 0020 B0F86230 		ldrh	r3, [r0, #98]
  59 0024 082B     		cmp	r3, #8
  60 0026 0BD8     		bhi	.L15
 334:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("tcp_write: too long queue %"U16_F" (max
 335:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->snd_queuelen, (u16_t)TCP_SND_QUEUELEN));
 336:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
 337:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags |= TF_NAGLEMEMERR;
 338:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 339:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 340:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen != 0) {
ARM GAS  /tmp/cccXI43k.s 			page 8


  61              		.loc 1 340 0
  62 0028 F3B1     		cbz	r3, .L6
 341:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: pbufs on queue => at least one queue non-empty",
  63              		.loc 1 341 0
  64 002a C36E     		ldr	r3, [r0, #108]
  65 002c 7BB1     		cbz	r3, .L16
 342:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unacked != NULL || pcb->unsent != NULL);
 343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: no pbufs on queue => both queues empty",
 345:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unacked == NULL && pcb->unsent == NULL);
 346:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 347:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
  66              		.loc 1 347 0
  67 002e 0020     		movs	r0, #0
  68              	.LVL1:
  69 0030 2EE0     		b	.L3
  70              	.LVL2:
  71              	.L14:
 324:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
  72              		.loc 1 324 0
  73 0032 837E     		ldrb	r3, [r0, #26]	@ zero_extendqisi2
  74 0034 63F07F03 		orn	r3, r3, #127
  75 0038 8376     		strb	r3, [r0, #26]
 325:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
  76              		.loc 1 325 0
  77 003a 4FF0FF30 		mov	r0, #-1
  78              	.LVL3:
  79 003e 27E0     		b	.L3
  80              	.LVL4:
  81              	.L15:
 337:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
  82              		.loc 1 337 0
  83 0040 837E     		ldrb	r3, [r0, #26]	@ zero_extendqisi2
  84 0042 63F07F03 		orn	r3, r3, #127
  85 0046 8376     		strb	r3, [r0, #26]
 338:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
  86              		.loc 1 338 0
  87 0048 4FF0FF30 		mov	r0, #-1
  88              	.LVL5:
  89 004c 20E0     		b	.L3
  90              	.LVL6:
  91              	.L16:
 341:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unacked != NULL || pcb->unsent != NULL);
  92              		.loc 1 341 0 discriminator 1
  93 004e 836E     		ldr	r3, [r0, #104]
  94 0050 0BB1     		cbz	r3, .L17
  95              		.loc 1 347 0
  96 0052 0020     		movs	r0, #0
  97              	.LVL7:
  98 0054 1CE0     		b	.L3
  99              	.LVL8:
 100              	.L17:
 341:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unacked != NULL || pcb->unsent != NULL);
 101              		.loc 1 341 0 discriminator 2
 102 0056 0F4B     		ldr	r3, .L19
 103 0058 4FF4AB72 		mov	r2, #342
 104 005c 0E49     		ldr	r1, .L19+4
ARM GAS  /tmp/cccXI43k.s 			page 9


 105              	.LVL9:
 106 005e 0F48     		ldr	r0, .L19+8
 107              	.LVL10:
 108 0060 FFF7FEFF 		bl	printf
 109              	.LVL11:
 110              		.loc 1 347 0 discriminator 2
 111 0064 0020     		movs	r0, #0
 112 0066 13E0     		b	.L3
 113              	.LVL12:
 114              	.L6:
 344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unacked == NULL && pcb->unsent == NULL);
 115              		.loc 1 344 0
 116 0068 C36E     		ldr	r3, [r0, #108]
 117 006a 43B1     		cbz	r3, .L18
 118              	.L7:
 344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unacked == NULL && pcb->unsent == NULL);
 119              		.loc 1 344 0 is_stmt 0 discriminator 3
 120 006c 094B     		ldr	r3, .L19
 121 006e 40F25912 		movw	r2, #345
 122 0072 0B49     		ldr	r1, .L19+12
 123              	.LVL13:
 124 0074 0948     		ldr	r0, .L19+8
 125              	.LVL14:
 126 0076 FFF7FEFF 		bl	printf
 127              	.LVL15:
 128              		.loc 1 347 0 is_stmt 1 discriminator 3
 129 007a 0020     		movs	r0, #0
 130 007c 08E0     		b	.L3
 131              	.LVL16:
 132              	.L18:
 344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unacked == NULL && pcb->unsent == NULL);
 133              		.loc 1 344 0 discriminator 2
 134 007e 836E     		ldr	r3, [r0, #104]
 135 0080 002B     		cmp	r3, #0
 136 0082 F3D1     		bne	.L7
 137              		.loc 1 347 0
 138 0084 0020     		movs	r0, #0
 139              	.LVL17:
 140 0086 03E0     		b	.L3
 141              	.LVL18:
 142              	.L8:
 315:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else if (len == 0) {
 143              		.loc 1 315 0
 144 0088 6FF00A00 		mvn	r0, #10
 145              	.LVL19:
 146 008c 00E0     		b	.L3
 147              	.LVL20:
 148              	.L9:
 317:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 149              		.loc 1 317 0
 150 008e 0020     		movs	r0, #0
 151              	.LVL21:
 152              	.L3:
 348:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 153              		.loc 1 348 0
 154 0090 08BD     		pop	{r3, pc}
 155              	.L20:
ARM GAS  /tmp/cccXI43k.s 			page 10


 156 0092 00BF     		.align	2
 157              	.L19:
 158 0094 00000000 		.word	.LC0
 159 0098 30000000 		.word	.LC1
 160 009c 6C000000 		.word	.LC2
 161 00a0 94000000 		.word	.LC3
 162              		.cfi_endproc
 163              	.LFE156:
 165              		.section	.text.tcp_pbuf_prealloc,"ax",%progbits
 166              		.align	1
 167              		.syntax unified
 168              		.thumb
 169              		.thumb_func
 170              		.fpu fpv5-sp-d16
 172              	tcp_pbuf_prealloc:
 173              	.LFB155:
 236:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
 174              		.loc 1 236 0
 175              		.cfi_startproc
 176              		@ args = 12, pretend = 0, frame = 0
 177              		@ frame_needed = 0, uses_anonymous_args = 0
 178              	.LVL22:
 179 0000 70B5     		push	{r4, r5, r6, lr}
 180              	.LCFI1:
 181              		.cfi_def_cfa_offset 16
 182              		.cfi_offset 4, -16
 183              		.cfi_offset 5, -12
 184              		.cfi_offset 6, -8
 185              		.cfi_offset 14, -4
 186 0002 0C46     		mov	r4, r1
 187 0004 1E46     		mov	r6, r3
 188 0006 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
 189              	.LVL23:
 247:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Should we allocate an oversized pbuf, or just the minimum
 190              		.loc 1 247 0
 191 000a 9142     		cmp	r1, r2
 192 000c 15D2     		bcs	.L22
 259:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         (!(pcb->flags & TF_NODELAY) &&
 193              		.loc 1 259 0
 194 000e 9DF81410 		ldrb	r1, [sp, #20]	@ zero_extendqisi2
 195              	.LVL24:
 196 0012 11F0020F 		tst	r1, #2
 197 0016 08D1     		bne	.L23
 260:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          (!first_seg ||
 198              		.loc 1 260 0 discriminator 1
 199 0018 0499     		ldr	r1, [sp, #16]
 200 001a 897E     		ldrb	r1, [r1, #26]	@ zero_extendqisi2
 259:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         (!(pcb->flags & TF_NODELAY) &&
 201              		.loc 1 259 0 discriminator 1
 202 001c 11F0400F 		tst	r1, #64
 203 0020 26D1     		bne	.L27
 260:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          (!first_seg ||
 204              		.loc 1 260 0
 205 0022 13B1     		cbz	r3, .L23
 262:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unacked != NULL))) {
 206              		.loc 1 262 0
 207 0024 049B     		ldr	r3, [sp, #16]
ARM GAS  /tmp/cccXI43k.s 			page 11


 208 0026 9B6E     		ldr	r3, [r3, #104]
 261:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unsent != NULL ||
 209              		.loc 1 261 0
 210 0028 E3B1     		cbz	r3, .L30
 211              	.L23:
 264:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 212              		.loc 1 264 0
 213 002a 04F21B21 		addw	r1, r4, #539
 214 002e 21F00301 		bic	r1, r1, #3
 215 0032 8A42     		cmp	r2, r1
 216 0034 28BF     		it	cs
 217 0036 0A46     		movcs	r2, r1
 218              	.LVL25:
 219 0038 91B2     		uxth	r1, r2
 220              	.LVL26:
 221              	.L22:
 268:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 222              		.loc 1 268 0
 223 003a 0022     		movs	r2, #0
 224 003c FFF7FEFF 		bl	pbuf_alloc
 225              	.LVL27:
 269:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 226              		.loc 1 269 0
 227 0040 0546     		mov	r5, r0
 228 0042 68B1     		cbz	r0, .L21
 272:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *oversize = p->len - length;
 229              		.loc 1 272 0
 230 0044 0368     		ldr	r3, [r0]
 231 0046 33B1     		cbz	r3, .L25
 272:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *oversize = p->len - length;
 232              		.loc 1 272 0 is_stmt 0 discriminator 1
 233 0048 0A4B     		ldr	r3, .L31
 234 004a 4FF48872 		mov	r2, #272
 235 004e 0A49     		ldr	r1, .L31+4
 236 0050 0A48     		ldr	r0, .L31+8
 237              	.LVL28:
 238 0052 FFF7FEFF 		bl	printf
 239              	.LVL29:
 240              	.L25:
 273:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* trim p->len to the currently used size */
 241              		.loc 1 273 0 is_stmt 1
 242 0056 6B89     		ldrh	r3, [r5, #10]
 243 0058 1B1B     		subs	r3, r3, r4
 244 005a 3380     		strh	r3, [r6]	@ movhi
 275:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return p;
 245              		.loc 1 275 0
 246 005c 2C81     		strh	r4, [r5, #8]	@ movhi
 247 005e 6C81     		strh	r4, [r5, #10]	@ movhi
 248              	.L21:
 277:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_OVERSIZE */
 249              		.loc 1 277 0
 250 0060 2846     		mov	r0, r5
 251 0062 70BD     		pop	{r4, r5, r6, pc}
 252              	.LVL30:
 253              	.L30:
 263:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       alloc = LWIP_MIN(max_length, LWIP_MEM_ALIGN_SIZE(TCP_OVERSIZE_CALC_LENGTH(length)));
 254              		.loc 1 263 0
ARM GAS  /tmp/cccXI43k.s 			page 12


 255 0064 049B     		ldr	r3, [sp, #16]
 256 0066 DB6E     		ldr	r3, [r3, #108]
 262:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unacked != NULL))) {
 257              		.loc 1 262 0
 258 0068 002B     		cmp	r3, #0
 259 006a DED1     		bne	.L23
 238:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 260              		.loc 1 238 0
 261 006c 2146     		mov	r1, r4
 262 006e E4E7     		b	.L22
 263              	.L27:
 264 0070 2146     		mov	r1, r4
 265 0072 E2E7     		b	.L22
 266              	.L32:
 267              		.align	2
 268              	.L31:
 269 0074 00000000 		.word	.LC0
 270 0078 00000000 		.word	.LC4
 271 007c 6C000000 		.word	.LC2
 272              		.cfi_endproc
 273              	.LFE155:
 275              		.section	.text.tcp_create_segment,"ax",%progbits
 276              		.align	1
 277              		.syntax unified
 278              		.thumb
 279              		.thumb_func
 280              		.fpu fpv5-sp-d16
 282              	tcp_create_segment:
 283              	.LFB154:
 174:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
 284              		.loc 1 174 0
 285              		.cfi_startproc
 286              		@ args = 4, pretend = 0, frame = 0
 287              		@ frame_needed = 0, uses_anonymous_args = 0
 288              	.LVL31:
 289 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 290              	.LCFI2:
 291              		.cfi_def_cfa_offset 32
 292              		.cfi_offset 4, -32
 293              		.cfi_offset 5, -28
 294              		.cfi_offset 6, -24
 295              		.cfi_offset 7, -20
 296              		.cfi_offset 8, -16
 297              		.cfi_offset 9, -12
 298              		.cfi_offset 10, -8
 299              		.cfi_offset 14, -4
 300 0004 8046     		mov	r8, r0
 301 0006 0E46     		mov	r6, r1
 302 0008 1746     		mov	r7, r2
 303 000a 9946     		mov	r9, r3
 304 000c 9DF820A0 		ldrb	r10, [sp, #32]	@ zero_extendqisi2
 305              	.LVL32:
 178:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_create_segment: no memory.\n"));
 306              		.loc 1 178 0
 307 0010 0320     		movs	r0, #3
 308              	.LVL33:
 309 0012 FFF7FEFF 		bl	memp_malloc
ARM GAS  /tmp/cccXI43k.s 			page 13


 310              	.LVL34:
 311 0016 0446     		mov	r4, r0
 312 0018 0028     		cmp	r0, #0
 313 001a 38D0     		beq	.L39
 314 001c 4FEA8A05 		lsl	r5, r10, #2
 315              	.LVL35:
 316 0020 05F00405 		and	r5, r5, #4
 317              	.LVL36:
 183:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = NULL;
 318              		.loc 1 183 0
 319 0024 80F80AA0 		strb	r10, [r0, #10]
 184:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p = p;
 320              		.loc 1 184 0
 321 0028 0023     		movs	r3, #0
 322 002a 0360     		str	r3, [r0]
 185:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("p->tot_len >= optlen", p->tot_len >= optlen);
 323              		.loc 1 185 0
 324 002c 4660     		str	r6, [r0, #4]
 186:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->len = p->tot_len - optlen;
 325              		.loc 1 186 0
 326 002e 3389     		ldrh	r3, [r6, #8]
 327 0030 1FFA85FA 		uxth	r10, r5
 328              	.LVL37:
 329 0034 5345     		cmp	r3, r10
 330 0036 2ED3     		bcc	.L40
 331              	.LVL38:
 332              	.L36:
 187:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 333              		.loc 1 187 0
 334 0038 3389     		ldrh	r3, [r6, #8]
 335 003a A3EB0A03 		sub	r3, r3, r10
 336 003e 2381     		strh	r3, [r4, #8]	@ movhi
 200:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_create_segment: no room for TCP he
 337              		.loc 1 200 0
 338 0040 1421     		movs	r1, #20
 339 0042 3046     		mov	r0, r6
 340 0044 FFF7FEFF 		bl	pbuf_header
 341              	.LVL39:
 342 0048 60BB     		cbnz	r0, .L41
 206:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->src = lwip_htons(pcb->local_port);
 343              		.loc 1 206 0
 344 004a 6368     		ldr	r3, [r4, #4]
 345 004c 5E68     		ldr	r6, [r3, #4]
 346              	.LVL40:
 347 004e E660     		str	r6, [r4, #12]
 207:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->dest = lwip_htons(pcb->remote_port);
 348              		.loc 1 207 0
 349 0050 B8F81600 		ldrh	r0, [r8, #22]
 350 0054 FFF7FEFF 		bl	lwip_htons
 351              	.LVL41:
 352 0058 3080     		strh	r0, [r6]	@ unaligned
 208:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->seqno = lwip_htonl(seqno);
 353              		.loc 1 208 0
 354 005a E668     		ldr	r6, [r4, #12]
 355 005c B8F81800 		ldrh	r0, [r8, #24]
 356 0060 FFF7FEFF 		bl	lwip_htons
 357              	.LVL42:
ARM GAS  /tmp/cccXI43k.s 			page 14


 358 0064 7080     		strh	r0, [r6, #2]	@ unaligned
 209:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* ackno is set in tcp_output */
 359              		.loc 1 209 0
 360 0066 E668     		ldr	r6, [r4, #12]
 361 0068 4846     		mov	r0, r9
 362 006a FFF7FEFF 		bl	lwip_htonl
 363              	.LVL43:
 364 006e 7060     		str	r0, [r6, #4]	@ unaligned
 211:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* wnd and chksum are set in tcp_output */
 365              		.loc 1 211 0
 366 0070 A808     		lsrs	r0, r5, #2
 367 0072 0530     		adds	r0, r0, #5
 368 0074 E568     		ldr	r5, [r4, #12]
 369 0076 47EA0030 		orr	r0, r7, r0, lsl #12
 370 007a FFF7FEFF 		bl	lwip_htons
 371              	.LVL44:
 372 007e A881     		strh	r0, [r5, #12]	@ unaligned
 213:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return seg;
 373              		.loc 1 213 0
 374 0080 E368     		ldr	r3, [r4, #12]
 375 0082 0022     		movs	r2, #0
 376 0084 9A74     		strb	r2, [r3, #18]
 377 0086 DA74     		strb	r2, [r3, #19]
 378              	.LVL45:
 379              	.L33:
 215:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 380              		.loc 1 215 0
 381 0088 2046     		mov	r0, r4
 382 008a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 383              	.LVL46:
 384              	.L39:
 180:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 385              		.loc 1 180 0
 386 008e 3046     		mov	r0, r6
 387              	.LVL47:
 388 0090 FFF7FEFF 		bl	pbuf_free
 389              	.LVL48:
 181:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 390              		.loc 1 181 0
 391 0094 F8E7     		b	.L33
 392              	.LVL49:
 393              	.L40:
 186:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->len = p->tot_len - optlen;
 394              		.loc 1 186 0 discriminator 1
 395 0096 064B     		ldr	r3, .L42
 396 0098 BA22     		movs	r2, #186
 397 009a 0649     		ldr	r1, .L42+4
 398 009c 0648     		ldr	r0, .L42+8
 399              	.LVL50:
 400 009e FFF7FEFF 		bl	printf
 401              	.LVL51:
 402 00a2 C9E7     		b	.L36
 403              	.L41:
 203:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 404              		.loc 1 203 0
 405 00a4 2046     		mov	r0, r4
 406 00a6 FFF7FEFF 		bl	tcp_seg_free
ARM GAS  /tmp/cccXI43k.s 			page 15


 407              	.LVL52:
 204:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 408              		.loc 1 204 0
 409 00aa 0024     		movs	r4, #0
 410              	.LVL53:
 411 00ac ECE7     		b	.L33
 412              	.L43:
 413 00ae 00BF     		.align	2
 414              	.L42:
 415 00b0 00000000 		.word	.LC0
 416 00b4 00000000 		.word	.LC5
 417 00b8 6C000000 		.word	.LC2
 418              		.cfi_endproc
 419              	.LFE154:
 421              		.section	.text.tcp_output_alloc_header,"ax",%progbits
 422              		.align	1
 423              		.syntax unified
 424              		.thumb
 425              		.thumb_func
 426              		.fpu fpv5-sp-d16
 428              	tcp_output_alloc_header:
 429              	.LFB152:
 110:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_hdr *tcphdr;
 430              		.loc 1 110 0
 431              		.cfi_startproc
 432              		@ args = 0, pretend = 0, frame = 0
 433              		@ frame_needed = 0, uses_anonymous_args = 0
 434              	.LVL54:
 435 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 436              	.LCFI3:
 437              		.cfi_def_cfa_offset 24
 438              		.cfi_offset 4, -24
 439              		.cfi_offset 5, -20
 440              		.cfi_offset 6, -16
 441              		.cfi_offset 7, -12
 442              		.cfi_offset 8, -8
 443              		.cfi_offset 14, -4
 444 0004 0646     		mov	r6, r0
 445 0006 0C46     		mov	r4, r1
 446 0008 9846     		mov	r8, r3
 112:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p != NULL) {
 447              		.loc 1 112 0
 448 000a 1144     		add	r1, r1, r2
 449              	.LVL55:
 450 000c 89B2     		uxth	r1, r1
 451 000e 1431     		adds	r1, r1, #20
 452 0010 0022     		movs	r2, #0
 453              	.LVL56:
 454 0012 89B2     		uxth	r1, r1
 455 0014 0120     		movs	r0, #1
 456              	.LVL57:
 457 0016 FFF7FEFF 		bl	pbuf_alloc
 458              	.LVL58:
 113:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("check that first pbuf can hold struct tcp_hdr",
 459              		.loc 1 113 0
 460 001a 0746     		mov	r7, r0
 461 001c 48B3     		cbz	r0, .L44
ARM GAS  /tmp/cccXI43k.s 			page 16


 114:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  (p->len >= TCP_HLEN + optlen));
 462              		.loc 1 114 0
 463 001e 4289     		ldrh	r2, [r0, #10]
 464 0020 04F11403 		add	r3, r4, #20
 465 0024 9A42     		cmp	r2, r3
 466 0026 27DB     		blt	.L48
 467              	.LVL59:
 468              	.L46:
 116:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->src = lwip_htons(pcb->local_port);
 469              		.loc 1 116 0
 470 0028 7D68     		ldr	r5, [r7, #4]
 471              	.LVL60:
 117:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->dest = lwip_htons(pcb->remote_port);
 472              		.loc 1 117 0
 473 002a F08A     		ldrh	r0, [r6, #22]
 474 002c FFF7FEFF 		bl	lwip_htons
 475              	.LVL61:
 476 0030 2880     		strh	r0, [r5]	@ unaligned
 118:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->seqno = seqno_be;
 477              		.loc 1 118 0
 478 0032 308B     		ldrh	r0, [r6, #24]
 479 0034 FFF7FEFF 		bl	lwip_htons
 480              	.LVL62:
 481 0038 6880     		strh	r0, [r5, #2]	@ unaligned
 119:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->ackno = lwip_htonl(pcb->rcv_nxt);
 482              		.loc 1 119 0
 483 003a C5F80480 		str	r8, [r5, #4]	@ unaligned
 120:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_HDRLEN_FLAGS_SET(tcphdr, (5 + optlen / 4), TCP_ACK);
 484              		.loc 1 120 0
 485 003e 706A     		ldr	r0, [r6, #36]
 486 0040 FFF7FEFF 		bl	lwip_htonl
 487              	.LVL63:
 488 0044 A860     		str	r0, [r5, #8]	@ unaligned
 121:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->wnd = lwip_htons(TCPWND_MIN16(RCV_WND_SCALE(pcb, pcb->rcv_ann_wnd)));
 489              		.loc 1 121 0
 490 0046 A008     		lsrs	r0, r4, #2
 491 0048 0530     		adds	r0, r0, #5
 492 004a 0003     		lsls	r0, r0, #12
 493 004c 80B2     		uxth	r0, r0
 494 004e 40F01000 		orr	r0, r0, #16
 495 0052 FFF7FEFF 		bl	lwip_htons
 496              	.LVL64:
 497 0056 A881     		strh	r0, [r5, #12]	@ unaligned
 122:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->chksum = 0;
 498              		.loc 1 122 0
 499 0058 708D     		ldrh	r0, [r6, #42]
 500 005a FFF7FEFF 		bl	lwip_htons
 501              	.LVL65:
 502 005e E881     		strh	r0, [r5, #14]	@ unaligned
 123:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->urgp = 0;
 503              		.loc 1 123 0
 504 0060 0023     		movs	r3, #0
 505 0062 2B74     		strb	r3, [r5, #16]
 506 0064 6B74     		strb	r3, [r5, #17]
 124:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 507              		.loc 1 124 0
 508 0066 AB74     		strb	r3, [r5, #18]
ARM GAS  /tmp/cccXI43k.s 			page 17


 509 0068 EB74     		strb	r3, [r5, #19]
 127:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 510              		.loc 1 127 0
 511 006a 736A     		ldr	r3, [r6, #36]
 512 006c 728D     		ldrh	r2, [r6, #42]
 513 006e 1344     		add	r3, r3, r2
 514 0070 F362     		str	r3, [r6, #44]
 515              	.LVL66:
 516              	.L44:
 130:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 517              		.loc 1 130 0
 518 0072 3846     		mov	r0, r7
 519 0074 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 520              	.LVL67:
 521              	.L48:
 114:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  (p->len >= TCP_HLEN + optlen));
 522              		.loc 1 114 0 discriminator 1
 523 0078 034B     		ldr	r3, .L49
 524 007a 7322     		movs	r2, #115
 525 007c 0349     		ldr	r1, .L49+4
 526 007e 0448     		ldr	r0, .L49+8
 527              	.LVL68:
 528 0080 FFF7FEFF 		bl	printf
 529              	.LVL69:
 530 0084 D0E7     		b	.L46
 531              	.L50:
 532 0086 00BF     		.align	2
 533              	.L49:
 534 0088 00000000 		.word	.LC0
 535 008c 00000000 		.word	.LC6
 536 0090 6C000000 		.word	.LC2
 537              		.cfi_endproc
 538              	.LFE152:
 540              		.section	.text.tcp_output_segment,"ax",%progbits
 541              		.align	1
 542              		.syntax unified
 543              		.thumb
 544              		.thumb_func
 545              		.fpu fpv5-sp-d16
 547              	tcp_output_segment:
 548              	.LFB161:
 349:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 350:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 351:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @ingroup tcp_raw
 352:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Write data for sending (but does not send it immediately).
 353:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 354:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * It waits in the expectation of more data being sent soon (as
 355:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * it can send them more efficiently by combining them together).
 356:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * To prompt the system to send data now, call tcp_output() after
 357:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * calling tcp_write().
 358:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 359:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection to enqueue data for.
 360:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param arg Pointer to the data to be enqueued for sending.
 361:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param len Data length in bytes
 362:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param apiflags combination of following flags :
 363:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - TCP_WRITE_FLAG_COPY (0x01) data will be copied into memory belonging to the stack
 364:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - TCP_WRITE_FLAG_MORE (0x02) for TCP connection, PSH flag will not be set on last segment sent,
ARM GAS  /tmp/cccXI43k.s 			page 18


 365:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return ERR_OK if enqueued, another err_t on error
 366:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 367:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
 368:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_write(struct tcp_pcb *pcb, const void *arg, u16_t len, u8_t apiflags)
 369:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 370:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *concat_p = NULL;
 371:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *last_unsent = NULL, *seg = NULL, *prev_seg = NULL, *queue = NULL;
 372:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t pos = 0; /* position in 'arg' data */
 373:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t queuelen;
 374:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen = 0;
 375:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optflags = 0;
 376:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 377:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t oversize = 0;
 378:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t oversize_used = 0;
 379:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 380:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t oversize_add = 0;
 381:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK*/
 382:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 383:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t extendlen = 0;
 384:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 385:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t concat_chksum = 0;
 386:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t concat_chksum_swapped = 0;
 387:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t concat_chksummed = 0;
 388:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 389:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
 390:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* don't allocate segments bigger than half the maximum window we ever received */
 391:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t mss_local = LWIP_MIN(pcb->mss, TCPWND_MIN16(pcb->snd_wnd_max/2));
 392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   mss_local = mss_local ? mss_local : pcb->mss;
 393:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 394:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
 395:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Always copy to try to create single pbufs for TX */
 396:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   apiflags |= TCP_WRITE_FLAG_COPY;
 397:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
 398:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 399:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_write(pcb=%p, data=%p, len=%"U16_F", apiflags=%"U16_F")\n",
 400:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     (void *)pcb, arg, len, (u16_t)apiflags));
 401:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ERROR("tcp_write: arg == NULL (programmer violates API)",
 402:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****              arg != NULL, return ERR_ARG;);
 403:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 404:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err = tcp_write_checks(pcb, len);
 405:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (err != ERR_OK) {
 406:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return err;
 407:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 408:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   queuelen = pcb->snd_queuelen;
 409:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 410:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
 411:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((pcb->flags & TF_TIMESTAMP)) {
 412:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Make sure the timestamp option is only included in data segments if we
 413:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        agreed about it with the remote host. */
 414:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags = TF_SEG_OPTS_TS;
 415:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optlen = LWIP_TCP_OPT_LENGTH(TF_SEG_OPTS_TS);
 416:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* ensure that segments can hold at least one data byte... */
 417:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     mss_local = LWIP_MAX(mss_local, LWIP_TCP_OPT_LEN_TS + 1);
 418:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 419:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_TCP_TIMESTAMPS */
 420:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 421:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
ARM GAS  /tmp/cccXI43k.s 			page 19


 422:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 423:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * TCP segmentation is done in three phases with increasing complexity:
 424:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 425:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * 1. Copy data directly into an oversized pbuf.
 426:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * 2. Chain a new pbuf to the end of pcb->unsent.
 427:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * 3. Create new segments.
 428:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 429:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * We may run out of memory at any point. In that case we must
 430:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * return ERR_MEM and not change anything in pcb. Therefore, all
 431:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * changes are recorded in local variables and committed at the end
 432:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * of the function. Some pcb fields are maintained in local copies:
 433:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 434:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * queuelen = pcb->snd_queuelen
 435:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * oversize = pcb->unsent_oversize
 436:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 437:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * These variables are set consistently by the phases:
 438:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 439:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * seg points to the last segment tampered with.
 440:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 441:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * pos records progress as data is segmented.
 442:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 443:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 444:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Find the tail of the unsent queue. */
 445:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent != NULL) {
 446:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t space;
 447:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t unsent_optlen;
 448:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 449:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* @todo: this could be sped up by keeping last_unsent in the pcb */
 450:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (last_unsent = pcb->unsent; last_unsent->next != NULL;
 451:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 452:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 453:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Usable space at the end of the last unsent segment */
 454:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     unsent_optlen = LWIP_TCP_OPT_LENGTH(last_unsent->flags);
 455:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("mss_local is too small", mss_local >= last_unsent->len + unsent_optlen);
 456:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     space = mss_local - (last_unsent->len + unsent_optlen);
 457:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 458:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /*
 459:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Phase 1: Copy data directly into an oversized pbuf.
 460:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 461:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * The number of bytes copied is recorded in the oversize_used
 462:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * variable. The actual copying is done at the bottom of the
 463:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * function.
 464:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
 465:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 466:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 467:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* check that pcb->unsent_oversize matches last_unsent->oversize_left */
 468:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("unsent_oversize mismatch (pcb vs. last_unsent)",
 469:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent_oversize == last_unsent->oversize_left);
 470:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 471:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     oversize = pcb->unsent_oversize;
 472:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (oversize > 0) {
 473:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("inconsistent oversize vs. space", oversize <= space);
 474:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg = last_unsent;
 475:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       oversize_used = LWIP_MIN(space, LWIP_MIN(oversize, len));
 476:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += oversize_used;
 477:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       oversize -= oversize_used;
 478:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       space -= oversize_used;
ARM GAS  /tmp/cccXI43k.s 			page 20


 479:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 480:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* now we are either finished or oversize is zero */
 481:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("inconsistent oversize vs. len", (oversize == 0) || (pos == len));
 482:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 483:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 484:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /*
 485:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Phase 2: Chain a new pbuf to the end of pcb->unsent.
 486:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 487:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * As an exception when NOT copying the data, if the given data buffer
 488:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * directly follows the last unsent data buffer in memory, extend the last
 489:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * ROM pbuf reference to the buffer, thus saving a ROM pbuf allocation.
 490:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 491:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * We don't extend segments containing SYN/FIN flags or options
 492:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * (len==0). The new pbuf is kept in concat_p and pbuf_cat'ed at
 493:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * the end.
 494:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
 495:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((pos < len) && (space > 0) && (last_unsent->len > 0)) {
 496:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       u16_t seglen = LWIP_MIN(space, len - pos);
 497:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg = last_unsent;
 498:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 499:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Create a pbuf with a copy or reference to seglen bytes. We
 500:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * can use PBUF_RAW here since the data appears in the middle of
 501:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * a segment. A header will never be prepended. */
 502:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (apiflags & TCP_WRITE_FLAG_COPY) {
 503:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* Data is copied */
 504:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if ((concat_p = tcp_pbuf_prealloc(PBUF_RAW, seglen, space, &oversize, pcb, apiflags, 1)) ==
 505:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 506:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                       ("tcp_write : could not allocate memory for pbuf copy size %"U16_F"\n",
 507:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                        seglen));
 508:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           goto memerr;
 509:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
 510:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 511:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         oversize_add = oversize;
 512:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 513:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         TCP_DATA_COPY2(concat_p->payload, (const u8_t*)arg + pos, seglen, &concat_chksum, &concat_c
 514:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 515:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         concat_chksummed += seglen;
 516:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 517:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         queuelen += pbuf_clen(concat_p);
 518:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       } else {
 519:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* Data is not copied */
 520:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* If the last unsent pbuf is of type PBUF_ROM, try to extend it. */
 521:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         struct pbuf *p;
 522:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         for (p = last_unsent->p; p->next != NULL; p = p->next);
 523:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (p->type == PBUF_ROM && (const u8_t *)p->payload + p->len == (const u8_t *)arg) {
 524:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           LWIP_ASSERT("tcp_write: ROM pbufs cannot be oversized", pos == 0);
 525:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           extendlen = seglen;
 526:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         } else {
 527:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           if ((concat_p = pbuf_alloc(PBUF_RAW, seglen, PBUF_ROM)) == NULL) {
 528:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 529:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                         ("tcp_write: could not allocate memory for zero-copy pbuf\n"));
 530:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             goto memerr;
 531:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           }
 532:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           /* reference the non-volatile payload data */
 533:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           ((struct pbuf_rom*)concat_p)->payload = (const u8_t*)arg + pos;
 534:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           queuelen += pbuf_clen(concat_p);
 535:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
ARM GAS  /tmp/cccXI43k.s 			page 21


 536:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 537:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* calculate the checksum of nocopy-data */
 538:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         tcp_seg_add_chksum(~inet_chksum((const u8_t*)arg + pos, seglen), seglen,
 539:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           &concat_chksum, &concat_chksum_swapped);
 540:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         concat_chksummed += seglen;
 541:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 542:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 543:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 544:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += seglen;
 545:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 546:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 547:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 548:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("unsent_oversize mismatch (pcb->unsent is NULL)",
 549:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent_oversize == 0);
 550:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 551:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 552:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 553:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 554:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Phase 3: Create new segments.
 555:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 556:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * The new segments are chained together in the local 'queue'
 557:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * variable, ready to be appended to pcb->unsent.
 558:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 559:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (pos < len) {
 560:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 561:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t left = len - pos;
 562:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t max_len = mss_local - optlen;
 563:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t seglen = LWIP_MIN(left, max_len);
 564:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 565:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t chksum = 0;
 566:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u8_t chksum_swapped = 0;
 567:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 568:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 569:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (apiflags & TCP_WRITE_FLAG_COPY) {
 570:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* If copy is set, memory should be allocated and data copied
 571:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * into pbuf */
 572:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if ((p = tcp_pbuf_prealloc(PBUF_TRANSPORT, seglen + optlen, mss_local, &oversize, pcb, apifla
 573:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write : could not allocate mem
 574:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         goto memerr;
 575:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 576:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("tcp_write: check that first pbuf can hold the complete seglen",
 577:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   (p->len >= seglen));
 578:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCP_DATA_COPY2((char *)p->payload + optlen, (const u8_t*)arg + pos, seglen, &chksum, &chksum_
 579:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
 580:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Copy is not set: First allocate a pbuf for holding the data.
 581:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * Since the referenced data is available at least until it is
 582:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * sent out on the link (as it has to be ACKed by the remote
 583:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * party) we can safely use PBUF_ROM instead of PBUF_REF here.
 584:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        */
 585:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       struct pbuf *p2;
 586:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 587:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("oversize == 0", oversize == 0);
 588:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 589:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if ((p2 = pbuf_alloc(PBUF_TRANSPORT, seglen, PBUF_ROM)) == NULL) {
 590:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: could not allocate memo
 591:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         goto memerr;
 592:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
ARM GAS  /tmp/cccXI43k.s 			page 22


 593:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 594:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* calculate the checksum of nocopy-data */
 595:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       chksum = ~inet_chksum((const u8_t*)arg + pos, seglen);
 596:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (seglen & 1) {
 597:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         chksum_swapped = 1;
 598:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         chksum = SWAP_BYTES_IN_WORD(chksum);
 599:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 600:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 601:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* reference the non-volatile payload data */
 602:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((struct pbuf_rom*)p2)->payload = (const u8_t*)arg + pos;
 603:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 604:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Second, allocate a pbuf for the headers. */
 605:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if ((p = pbuf_alloc(PBUF_TRANSPORT, optlen, PBUF_RAM)) == NULL) {
 606:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* If allocation fails, we have to deallocate the data pbuf as
 607:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          * well. */
 608:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         pbuf_free(p2);
 609:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: could not allocate memo
 610:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         goto memerr;
 611:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 612:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Concatenate the headers and data pbufs together. */
 613:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pbuf_cat(p/*header*/, p2/*data*/);
 614:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 615:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 616:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     queuelen += pbuf_clen(p);
 617:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 618:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Now that there are more segments queued, we check again if the
 619:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * length of the queue exceeds the configured maximum or
 620:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * overflows. */
 621:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((queuelen > TCP_SND_QUEUELEN) || (queuelen > TCP_SNDQUEUELEN_OVERFLOW)) {
 622:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: queue too long %"U16_F" (
 623:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         queuelen, (int)TCP_SND_QUEUELEN));
 624:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pbuf_free(p);
 625:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       goto memerr;
 626:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 627:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 628:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((seg = tcp_create_segment(pcb, p, 0, pcb->snd_lbb + pos, optflags)) == NULL) {
 629:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       goto memerr;
 630:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 631:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 632:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->oversize_left = oversize;
 633:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 634:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 635:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->chksum = chksum;
 636:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->chksum_swapped = chksum_swapped;
 637:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->flags |= TF_SEG_DATA_CHECKSUMMED;
 638:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 639:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 640:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* first segment of to-be-queued data? */
 641:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (queue == NULL) {
 642:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       queue = seg;
 643:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
 644:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Attach the segment to the end of the queued segments */
 645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("prev_seg != NULL", prev_seg != NULL);
 646:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       prev_seg->next = seg;
 647:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 648:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* remember last segment of to-be-queued data for next iteration */
 649:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     prev_seg = seg;
ARM GAS  /tmp/cccXI43k.s 			page 23


 650:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 651:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_TRACE, ("tcp_write: queueing %"U32_F":%"U32_F"\n",
 652:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       lwip_ntohl(seg->tcphdr->seqno),
 653:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       lwip_ntohl(seg->tcphdr->seqno) + TCP_TCPLEN(seg)));
 654:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 655:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pos += seglen;
 656:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 657:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 658:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 659:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * All three segmentation phases were successful. We can commit the
 660:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * transaction.
 661:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 662:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 663:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((last_unsent != NULL) && (oversize_add != 0)) {
 664:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->oversize_left += oversize_add;
 665:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 666:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 667:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 668:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 669:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Phase 1: If data has been added to the preallocated tail of
 670:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * last_unsent, we update the length fields of the pbuf chain.
 671:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 672:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 673:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (oversize_used > 0) {
 674:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 675:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Bump tot_len of whole chain, len of tail */
 676:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (p = last_unsent->p; p; p = p->next) {
 677:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += oversize_used;
 678:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (p->next == NULL) {
 679:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         TCP_DATA_COPY((char *)p->payload + p->len, arg, oversize_used, last_unsent);
 680:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         p->len += oversize_used;
 681:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 682:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 683:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += oversize_used;
 684:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 685:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("last_unsent->oversize_left >= oversize_used",
 686:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 last_unsent->oversize_left >= oversize_used);
 687:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->oversize_left -= oversize_used;
 688:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 689:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 690:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unsent_oversize = oversize;
 691:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 692:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 693:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 694:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Phase 2: concat_p can be concatenated onto last_unsent->p, unless we
 695:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * determined that the last ROM pbuf can be extended to include the new data.
 696:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 697:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (concat_p != NULL) {
 698:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: cannot concatenate when pcb->unsent is empty",
 699:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (last_unsent != NULL));
 700:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_cat(last_unsent->p, concat_p);
 701:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += concat_p->tot_len;
 702:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else if (extendlen > 0) {
 703:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 704:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: extension of reference requires reference",
 705:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       last_unsent != NULL && last_unsent->p != NULL);
 706:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (p = last_unsent->p; p->next != NULL; p = p->next) {
ARM GAS  /tmp/cccXI43k.s 			page 24


 707:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += extendlen;
 708:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 709:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     p->tot_len += extendlen;
 710:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     p->len += extendlen;
 711:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += extendlen;
 712:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 713:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 714:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 715:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (concat_chksummed) {
 716:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: concat checksum needs concatenated data",
 717:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         concat_p != NULL || extendlen > 0);
 718:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /*if concat checksumm swapped - swap it back */
 719:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (concat_chksum_swapped) {
 720:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       concat_chksum = SWAP_BYTES_IN_WORD(concat_chksum);
 721:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 722:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_seg_add_chksum(concat_chksum, concat_chksummed, &last_unsent->chksum,
 723:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       &last_unsent->chksum_swapped);
 724:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->flags |= TF_SEG_DATA_CHECKSUMMED;
 725:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 726:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 727:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 728:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 729:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Phase 3: Append queue to pcb->unsent. Queue may be NULL, but that
 730:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * is harmless
 731:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 732:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (last_unsent == NULL) {
 733:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = queue;
 734:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 735:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->next = queue;
 736:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 737:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 738:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 739:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Finally update the pcb state.
 740:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 741:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_lbb += len;
 742:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_buf -= len;
 743:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen = queuelen;
 744:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 745:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_write: %"S16_F" (after enqueued)\n",
 746:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->snd_queuelen));
 747:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen != 0) {
 748:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: valid queue length",
 749:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 750:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 751:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 752:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Set the PSH flag in the last segment that we enqueued. */
 753:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg != NULL && seg->tcphdr != NULL && ((apiflags & TCP_WRITE_FLAG_MORE)==0)) {
 754:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_SET_FLAG(seg->tcphdr, TCP_PSH);
 755:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 756:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 757:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 758:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** memerr:
 759:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->flags |= TF_NAGLEMEMERR;
 760:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCP_STATS_INC(tcp.memerr);
 761:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 762:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (concat_p != NULL) {
 763:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_free(concat_p);
ARM GAS  /tmp/cccXI43k.s 			page 25


 764:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 765:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (queue != NULL) {
 766:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_segs_free(queue);
 767:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 768:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen != 0) {
 769:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: valid queue length", pcb->unacked != NULL ||
 770:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unsent != NULL);
 771:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 772:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG | LWIP_DBG_STATE, ("tcp_write: %"S16_F" (with mem err)\n", pcb->snd_qu
 773:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_MEM;
 774:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 775:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 776:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 777:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Enqueue TCP options for transmission.
 778:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 779:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_connect(), tcp_listen_input(), and tcp_send_ctrl().
 780:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 781:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection.
 782:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param flags TCP header flags to set in the outgoing segment.
 783:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 784:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
 785:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_enqueue_flags(struct tcp_pcb *pcb, u8_t flags)
 786:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 787:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
 788:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
 789:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optflags = 0;
 790:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen = 0;
 791:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 792:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_enqueue_flags: queuelen: %"U16_F"\n", (u16_t)pcb->snd_queuelen)
 793:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 794:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: need either TCP_SYN or TCP_FIN in flags (programmer violates API)
 795:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (flags & (TCP_SYN | TCP_FIN)) != 0);
 796:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 797:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* check for configured max queuelen and possible overflow (FIN flag should always come through!)
 798:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (((pcb->snd_queuelen >= TCP_SND_QUEUELEN) || (pcb->snd_queuelen > TCP_SNDQUEUELEN_OVERFLOW)) &
 799:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((flags & TCP_FIN) == 0)) {
 800:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("tcp_enqueue_flags: too long queue %"U16
 801:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                        pcb->snd_queuelen, (u16_t)TCP_SND_QUEUELEN));
 802:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
 803:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags |= TF_NAGLEMEMERR;
 804:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 805:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 806:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 807:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (flags & TCP_SYN) {
 808:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags = TF_SEG_OPTS_MSS;
 809:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
 810:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((pcb->state != SYN_RCVD) || (pcb->flags & TF_WND_SCALE)) {
 811:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* In a <SYN,ACK> (sent in state SYN_RCVD), the window scale option may only
 812:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          be sent if we received a window scale option from the remote host. */
 813:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       optflags |= TF_SEG_OPTS_WND_SCALE;
 814:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 815:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_WND_SCALE */
 816:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 817:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
 818:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((pcb->flags & TF_TIMESTAMP)) {
 819:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Make sure the timestamp option is only included in data segments if we
 820:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        agreed about it with the remote host. */
ARM GAS  /tmp/cccXI43k.s 			page 26


 821:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags |= TF_SEG_OPTS_TS;
 822:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 823:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_TCP_TIMESTAMPS */
 824:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optlen = LWIP_TCP_OPT_LENGTH(optflags);
 825:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 826:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Allocate pbuf with room for TCP header + options */
 827:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((p = pbuf_alloc(PBUF_TRANSPORT, optlen, PBUF_RAM)) == NULL) {
 828:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags |= TF_NAGLEMEMERR;
 829:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
 830:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 831:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 832:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: check that first pbuf can hold optlen",
 833:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (p->len >= optlen));
 834:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 835:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Allocate memory for tcp_seg, and fill in fields. */
 836:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((seg = tcp_create_segment(pcb, p, flags, pcb->snd_lbb, optflags)) == NULL) {
 837:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags |= TF_NAGLEMEMERR;
 838:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
 839:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 840:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 841:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("seg->tcphdr not aligned", ((mem_ptr_t)seg->tcphdr % LWIP_MIN(MEM_ALIGNMENT, 4)) == 0
 842:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: invalid segment length", seg->len == 0);
 843:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 844:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_TRACE,
 845:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               ("tcp_enqueue_flags: queueing %"U32_F":%"U32_F" (0x%"X16_F")\n",
 846:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                lwip_ntohl(seg->tcphdr->seqno),
 847:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                lwip_ntohl(seg->tcphdr->seqno) + TCP_TCPLEN(seg),
 848:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                (u16_t)flags));
 849:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 850:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Now append seg to pcb->unsent queue */
 851:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent == NULL) {
 852:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = seg;
 853:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 854:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct tcp_seg *useg;
 855:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (useg = pcb->unsent; useg->next != NULL; useg = useg->next);
 856:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     useg->next = seg;
 857:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 858:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 859:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* The new unsent tail has no space */
 860:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unsent_oversize = 0;
 861:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 862:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 863:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* SYN and FIN bump the sequence number */
 864:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((flags & TCP_SYN) || (flags & TCP_FIN)) {
 865:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->snd_lbb++;
 866:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* optlen does not influence snd_buf */
 867:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 868:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (flags & TCP_FIN) {
 869:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags |= TF_FIN;
 870:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 871:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 872:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* update number of segments on the queues */
 873:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen += pbuf_clen(seg->p);
 874:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_enqueue_flags: %"S16_F" (after enqueued)\n", pcb->snd_queuelen)
 875:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen != 0) {
 876:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_enqueue_flags: invalid queue length",
 877:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unacked != NULL || pcb->unsent != NULL);
ARM GAS  /tmp/cccXI43k.s 			page 27


 878:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 879:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 880:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 881:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 882:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 883:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
 884:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Build a timestamp option (12 bytes long) at the specified options pointer)
 885:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 886:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb tcp_pcb
 887:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param opts option pointer where to store the timestamp option
 888:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 889:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
 890:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_build_timestamp_option(struct tcp_pcb *pcb, u32_t *opts)
 891:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 892:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Pad with two NOP options to make everything nicely aligned */
 893:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts[0] = PP_HTONL(0x0101080A);
 894:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts[1] = lwip_htonl(sys_now());
 895:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts[2] = lwip_htonl(pcb->ts_recent);
 896:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 897:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 898:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 899:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
 900:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Build a window scale option (3 bytes long) at the specified options pointer)
 901:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 902:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param opts option pointer where to store the window scale option
 903:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 904:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
 905:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_build_wnd_scale_option(u32_t *opts)
 906:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 907:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Pad with one NOP option to make everything nicely aligned */
 908:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts[0] = PP_HTONL(0x01030300 | TCP_RCV_SCALE);
 909:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 910:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 911:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 912:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 913:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Send an ACK without data.
 914:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 915:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection to send the ACK
 916:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 917:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
 918:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_send_empty_ack(struct tcp_pcb *pcb)
 919:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 920:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
 921:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
 922:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen = 0;
 923:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct netif *netif;
 924:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS || CHECKSUM_GEN_TCP
 925:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_hdr *tcphdr;
 926:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_TCP_TIMESTAMPS || CHECKSUM_GEN_TCP */
 927:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 928:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
 929:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->flags & TF_TIMESTAMP) {
 930:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optlen = LWIP_TCP_OPT_LENGTH(TF_SEG_OPTS_TS);
 931:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 932:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 933:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 934:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header(pcb, optlen, 0, lwip_htonl(pcb->snd_nxt));
ARM GAS  /tmp/cccXI43k.s 			page 28


 935:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 936:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* let tcp_fasttmr retry sending this ACK */
 937:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags |= (TF_ACK_DELAY | TF_ACK_NOW);
 938:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_output: (ACK) could not allocate pbuf\n"));
 939:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_BUF;
 940:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 941:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS || CHECKSUM_GEN_TCP
 942:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr = (struct tcp_hdr *)p->payload;
 943:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_TCP_TIMESTAMPS || CHECKSUM_GEN_TCP */
 944:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_OUTPUT_DEBUG,
 945:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               ("tcp_output: sending ACK for %"U32_F"\n", pcb->rcv_nxt));
 946:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 947:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* NB. MSS and window scale options are only sent on SYNs, so ignore them here */
 948:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
 949:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->ts_lastacksent = pcb->rcv_nxt;
 950:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 951:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->flags & TF_TIMESTAMP) {
 952:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_build_timestamp_option(pcb, (u32_t *)(tcphdr + 1));
 953:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 954:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 955:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 956:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   netif = ip_route(&pcb->local_ip, &pcb->remote_ip);
 957:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (netif == NULL) {
 958:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = ERR_RTE;
 959:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 960:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if CHECKSUM_GEN_TCP
 961:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     IF__NETIF_CHECKSUM_ENABLED(netif, NETIF_CHECKSUM_GEN_TCP) {
 962:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcphdr->chksum = ip_chksum_pseudo(p, IP_PROTO_TCP, p->tot_len,
 963:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         &pcb->local_ip, &pcb->remote_ip);
 964:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 965:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 966:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     NETIF_SET_HWADDRHINT(netif, &(pcb->addr_hint));
 967:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = ip_output_if(p, &pcb->local_ip, &pcb->remote_ip,
 968:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->ttl, pcb->tos, IP_PROTO_TCP, netif);
 969:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     NETIF_SET_HWADDRHINT(netif, NULL);
 970:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 971:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pbuf_free(p);
 972:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 973:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (err != ERR_OK) {
 974:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* let tcp_fasttmr retry sending this ACK */
 975:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags |= (TF_ACK_DELAY | TF_ACK_NOW);
 976:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 977:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* remove ACK flags from the PCB, as we sent an empty ACK now */
 978:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags &= ~(TF_ACK_DELAY | TF_ACK_NOW);
 979:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 980:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 981:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
 982:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 983:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 984:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 985:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @ingroup tcp_raw
 986:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Find out what we can send and send it
 987:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 988:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection to send data
 989:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return ERR_OK if data has been sent or nothing to send
 990:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *         another err_t on error
 991:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
ARM GAS  /tmp/cccXI43k.s 			page 29


 992:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
 993:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output(struct tcp_pcb *pcb)
 994:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 995:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg, *useg;
 996:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t wnd, snd_nxt;
 997:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
 998:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct netif *netif;
 999:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CWND_DEBUG
1000:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   s16_t i = 0;
1001:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CWND_DEBUG */
1002:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1003:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* pcb->state LISTEN not allowed here */
1004:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("don't call tcp_output for listen-pcbs",
1005:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->state != LISTEN);
1006:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1007:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* First, check if we are invoked by the TCP input processing
1008:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      code. If so, we do not output anything. Instead, we rely on the
1009:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      input processing code to call us when input processing is done
1010:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      with. */
1011:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (tcp_input_pcb == pcb) {
1012:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
1013:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1014:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1015:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   wnd = LWIP_MIN(pcb->snd_wnd, pcb->cwnd);
1016:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1017:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg = pcb->unsent;
1018:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1019:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* If the TF_ACK_NOW flag is set and no data will be sent (either
1020:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * because the ->unsent queue is empty or because the window does
1021:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * not allow it), construct an empty ACK segment and send it.
1022:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
1023:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * If data is to be sent, we will just piggyback the ACK (see below).
1024:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
1025:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->flags & TF_ACK_NOW &&
1026:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      (seg == NULL ||
1027:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len > wnd)) {
1028:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      return tcp_send_empty_ack(pcb);
1029:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1030:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1031:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* useg should point to last segment on unacked queue */
1032:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg = pcb->unacked;
1033:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (useg != NULL) {
1034:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (; useg->next != NULL; useg = useg->next);
1035:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1036:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1037:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   netif = ip_route(&pcb->local_ip, &pcb->remote_ip);
1038:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (netif == NULL) {
1039:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_RTE;
1040:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1041:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1042:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* If we don't have a local IP address, we get one from netif */
1043:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (ip_addr_isany(&pcb->local_ip)) {
1044:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     const ip_addr_t *local_ip = ip_netif_get_local_ip(netif, &pcb->remote_ip);
1045:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (local_ip == NULL) {
1046:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return ERR_RTE;
1047:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1048:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ip_addr_copy(pcb->local_ip, *local_ip);
ARM GAS  /tmp/cccXI43k.s 			page 30


1049:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1050:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1051:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OUTPUT_DEBUG
1052:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg == NULL) {
1053:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_output: nothing to send (%p)\n",
1054:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                    (void*)pcb->unsent));
1055:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1056:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OUTPUT_DEBUG */
1057:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CWND_DEBUG
1058:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg == NULL) {
1059:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_CWND_DEBUG, ("tcp_output: snd_wnd %"TCPWNDSIZE_F
1060:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  ", cwnd %"TCPWNDSIZE_F", wnd %"U32_F
1061:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  ", seg == NULL, ack %"U32_F"\n",
1062:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  pcb->snd_wnd, pcb->cwnd, wnd, pcb->lastack));
1063:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
1064:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_CWND_DEBUG,
1065:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_output: snd_wnd %"TCPWNDSIZE_F", cwnd %"TCPWNDSIZE_F", wnd %"U32_F
1066:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  ", effwnd %"U32_F", seq %"U32_F", ack %"U32_F"\n",
1067:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  pcb->snd_wnd, pcb->cwnd, wnd,
1068:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len,
1069:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  lwip_ntohl(seg->tcphdr->seqno), pcb->lastack));
1070:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1071:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CWND_DEBUG */
1072:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Check if we need to start the persistent timer when the next unsent segment
1073:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * does not fit within the remaining send window and RTO timer is not running (we
1074:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * have no in-flight data). A traditional approach would fill the remaining window
1075:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * with part of the unsent segment (which will engage zero-window probing upon
1076:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * reception of the zero window update from the receiver). This ensures the
1077:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * subsequent window update is reliably received. With the goal of being lightweight,
1078:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * we avoid splitting the unsent segment and treat the window as already zero.
1079:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
1080:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg != NULL &&
1081:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len > wnd &&
1082:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       wnd > 0 && wnd == pcb->snd_wnd && pcb->unacked == NULL) {
1083:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Start the persist timer */
1084:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->persist_backoff == 0) {
1085:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_cnt = 0;
1086:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_backoff = 1;
1087:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1088:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     goto output_done;
1089:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1090:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* data available and window allows it to be sent? */
1091:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (seg != NULL &&
1092:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len <= wnd) {
1093:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("RST not expected here!",
1094:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (TCPH_FLAGS(seg->tcphdr) & TCP_RST) == 0);
1095:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Stop sending if the nagle algorithm would prevent it
1096:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Don't stop:
1097:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * - if tcp_write had a memory error before (prevent delayed ACK timeout) or
1098:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * - if FIN was already enqueued for this PCB (SYN is always alone in a segment -
1099:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *   either seg->next != NULL or pcb->unacked == NULL;
1100:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *   RST is no sent using tcp_write/tcp_output.
1101:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
1102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((tcp_do_output_nagle(pcb) == 0) &&
1103:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
1104:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       break;
1105:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
ARM GAS  /tmp/cccXI43k.s 			page 31


1106:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CWND_DEBUG
1107:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_CWND_DEBUG, ("tcp_output: snd_wnd %"TCPWNDSIZE_F", cwnd %"TCPWNDSIZE_F", wnd %"
1108:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                             pcb->snd_wnd, pcb->cwnd, wnd,
1109:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                             lwip_ntohl(seg->tcphdr->seqno) + seg->len -
1110:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                             pcb->lastack,
1111:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                             lwip_ntohl(seg->tcphdr->seqno), pcb->lastack, i));
1112:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++i;
1113:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CWND_DEBUG */
1114:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1115:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->state != SYN_SENT) {
1116:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCPH_SET_FLAG(seg->tcphdr, TCP_ACK);
1117:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1118:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1119:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
1120:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->oversize_left = 0;
1121:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
1122:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = tcp_output_segment(seg, pcb, netif);
1123:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (err != ERR_OK) {
1124:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* segment could not be sent, for whatever reason */
1125:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->flags |= TF_NAGLEMEMERR;
1126:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return err;
1127:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1128:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = seg->next;
1129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->state != SYN_SENT) {
1130:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->flags &= ~(TF_ACK_DELAY | TF_ACK_NOW);
1131:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1132:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     snd_nxt = lwip_ntohl(seg->tcphdr->seqno) + TCP_TCPLEN(seg);
1133:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (TCP_SEQ_LT(pcb->snd_nxt, snd_nxt)) {
1134:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->snd_nxt = snd_nxt;
1135:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1136:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* put segment on unacknowledged list if length > 0 */
1137:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (TCP_TCPLEN(seg) > 0) {
1138:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->next = NULL;
1139:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* unacked list is empty? */
1140:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (pcb->unacked == NULL) {
1141:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         pcb->unacked = seg;
1142:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         useg = seg;
1143:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* unacked list is not empty? */
1144:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       } else {
1145:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* In the case of fast retransmit, the packet should not go to the tail
1146:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          * of the unacked queue, but rather somewhere before it. We need to check for
1147:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          * this case. -STJ Jul 27, 2004 */
1148:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (TCP_SEQ_LT(lwip_ntohl(seg->tcphdr->seqno), lwip_ntohl(useg->tcphdr->seqno))) {
1149:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           /* add segment to before tail of unacked list, keeping the list sorted */
1150:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           struct tcp_seg **cur_seg = &(pcb->unacked);
1151:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           while (*cur_seg &&
1152:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno))) {
1153:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               cur_seg = &((*cur_seg)->next );
1154:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           }
1155:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           seg->next = (*cur_seg);
1156:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           (*cur_seg) = seg;
1157:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         } else {
1158:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           /* add segment to tail of unacked list */
1159:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           useg->next = seg;
1160:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           useg = useg->next;
1161:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
1162:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
ARM GAS  /tmp/cccXI43k.s 			page 32


1163:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* do not queue empty segments on the unacked list */
1164:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
1165:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_seg_free(seg);
1166:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1167:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg = pcb->unsent;
1168:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1169:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** output_done:
1170:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
1171:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent == NULL) {
1172:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* last unsent has been removed, reset unsent_oversize */
1173:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent_oversize = 0;
1174:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1175:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
1176:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1177:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->flags &= ~TF_NAGLEMEMERR;
1178:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
1179:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1180:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1181:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1182:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_output() to actually send a TCP segment over IP.
1183:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1184:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param seg the tcp_seg to send
1185:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for the TCP connection used to send the segment
1186:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param netif the netif used to send the segment
1187:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1188:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static err_t
1189:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_segment(struct tcp_seg *seg, struct tcp_pcb *pcb, struct netif *netif)
1190:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 549              		.loc 1 1190 0
 550              		.cfi_startproc
 551              		@ args = 0, pretend = 0, frame = 0
 552              		@ frame_needed = 0, uses_anonymous_args = 0
 553              	.LVL70:
1191:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
1192:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t len;
1193:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t *opts;
1194:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1195:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->p->ref != 1) {
 554              		.loc 1 1195 0
 555 0000 4368     		ldr	r3, [r0, #4]
 556 0002 DB89     		ldrh	r3, [r3, #14]
 557 0004 012B     		cmp	r3, #1
 558 0006 01D0     		beq	.L61
1196:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* This can happen if the pbuf of this segment is still referenced by the
1197:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        netif driver due to deferred transmission. Since this function modifies
1198:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        p->len, we must not continue in this case. */
1199:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
 559              		.loc 1 1199 0
 560 0008 0020     		movs	r0, #0
 561              	.LVL71:
1200:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1201:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1202:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* The TCP header has already been constructed, but the ackno and
1203:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    wnd fields remain. */
1204:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->ackno = lwip_htonl(pcb->rcv_nxt);
1205:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1206:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* advertise our receive window size in this TCP segment */
ARM GAS  /tmp/cccXI43k.s 			page 33


1207:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1208:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_WND_SCALE) {
1209:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* The Window field in a SYN segment itself (the only type where we send
1210:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        the window scale option) is never scaled. */
1211:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->tcphdr->wnd = lwip_htons(TCPWND_MIN16(pcb->rcv_ann_wnd));
1212:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else
1213:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_WND_SCALE */
1214:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   {
1215:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->tcphdr->wnd = lwip_htons(TCPWND_MIN16(RCV_WND_SCALE(pcb, pcb->rcv_ann_wnd)));
1216:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1217:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1218:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->rcv_ann_right_edge = pcb->rcv_nxt + pcb->rcv_ann_wnd;
1219:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1220:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Add any requested options.  NB MSS option is only set on SYN
1221:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      packets, so ignore it here */
1222:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* cast through void* to get rid of alignment warnings */
1223:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts = (u32_t *)(void *)(seg->tcphdr + 1);
1224:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_MSS) {
1225:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t mss;
1226:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CALCULATE_EFF_SEND_MSS
1227:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     mss = tcp_eff_send_mss(TCP_MSS, &pcb->local_ip, &pcb->remote_ip);
1228:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_CALCULATE_EFF_SEND_MSS */
1229:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     mss = TCP_MSS;
1230:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CALCULATE_EFF_SEND_MSS */
1231:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     *opts = TCP_BUILD_MSS_OPTION(mss);
1232:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 1;
1233:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1234:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
1235:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->ts_lastacksent = pcb->rcv_nxt;
1236:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1237:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_TS) {
1238:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_build_timestamp_option(pcb, opts);
1239:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 3;
1240:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1241:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1242:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1243:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_WND_SCALE) {
1244:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_build_wnd_scale_option(opts);
1245:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 1;
1246:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1247:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1248:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1249:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Set retransmission timer running if it is not currently enabled
1250:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      This must be set before checking the route. */
1251:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->rtime < 0) {
1252:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rtime = 0;
1253:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1254:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1255:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->rttest == 0) {
1256:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rttest = tcp_ticks;
1257:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rtseq = lwip_ntohl(seg->tcphdr->seqno);
1258:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1259:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_RTO_DEBUG, ("tcp_output_segment: rtseq %"U32_F"\n", pcb->rtseq));
1260:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1261:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_output_segment: %"U32_F":%"U32_F"\n",
1262:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           lwip_htonl(seg->tcphdr->seqno), lwip_htonl(seg->tcphdr->seqno) +
1263:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           seg->len));
ARM GAS  /tmp/cccXI43k.s 			page 34


1264:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1265:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   len = (u16_t)((u8_t *)seg->tcphdr - (u8_t *)seg->p->payload);
1266:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (len == 0) {
1267:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /** Exclude retransmitted segments from this count. */
1268:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     MIB2_STATS_INC(mib2.tcpoutsegs);
1269:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1270:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1271:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p->len -= len;
1272:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p->tot_len -= len;
1273:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1274:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p->payload = seg->tcphdr;
1275:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1276:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->chksum = 0;
1277:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if CHECKSUM_GEN_TCP
1278:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   IF__NETIF_CHECKSUM_ENABLED(netif, NETIF_CHECKSUM_GEN_TCP) {
1279:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
1280:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u32_t acc;
1281:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY_SANITY_CHECK
1282:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t chksum_slow = ip_chksum_pseudo(seg->p, IP_PROTO_TCP,
1283:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->p->tot_len, &pcb->local_ip, &pcb->remote_ip);
1284:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY_SANITY_CHECK */
1285:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((seg->flags & TF_SEG_DATA_CHECKSUMMED) == 0) {
1286:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("data included but not checksummed",
1287:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         seg->p->tot_len == (TCPH_HDRLEN(seg->tcphdr) * 4));
1288:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1289:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1290:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* rebuild TCP header checksum (TCP header changes for retransmissions!) */
1291:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     acc = ip_chksum_pseudo_partial(seg->p, IP_PROTO_TCP,
1292:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->p->tot_len, TCPH_HDRLEN(seg->tcphdr) * 4, &pcb->local_ip, &pcb->remote_ip);
1293:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* add payload checksum */
1294:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (seg->chksum_swapped) {
1295:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->chksum = SWAP_BYTES_IN_WORD(seg->chksum);
1296:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->chksum_swapped = 0;
1297:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1298:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     acc += (u16_t)~(seg->chksum);
1299:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->tcphdr->chksum = FOLD_U32T(acc);
1300:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY_SANITY_CHECK
1301:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (chksum_slow != seg->tcphdr->chksum) {
1302:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCP_CHECKSUM_ON_COPY_SANITY_CHECK_FAIL(
1303:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   ("tcp_output_segment: calculated checksum is %"X16_F" instead of %"X16_F"\n",
1304:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   seg->tcphdr->chksum, chksum_slow));
1305:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->tcphdr->chksum = chksum_slow;
1306:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1307:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY_SANITY_CHECK */
1308:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_CHECKSUM_ON_COPY */
1309:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->tcphdr->chksum = ip_chksum_pseudo(seg->p, IP_PROTO_TCP,
1310:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->p->tot_len, &pcb->local_ip, &pcb->remote_ip);
1311:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
1312:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1313:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* CHECKSUM_GEN_TCP */
1314:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCP_STATS_INC(tcp.xmit);
1315:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1316:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   NETIF_SET_HWADDRHINT(netif, &(pcb->addr_hint));
1317:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err = ip_output_if(seg->p, &pcb->local_ip, &pcb->remote_ip, pcb->ttl,
1318:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->tos, IP_PROTO_TCP, netif);
1319:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   NETIF_SET_HWADDRHINT(netif, NULL);
1320:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
ARM GAS  /tmp/cccXI43k.s 			page 35


1321:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 562              		.loc 1 1321 0
 563 000a 7047     		bx	lr
 564              	.LVL72:
 565              	.L61:
1190:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
 566              		.loc 1 1190 0
 567 000c F0B5     		push	{r4, r5, r6, r7, lr}
 568              	.LCFI4:
 569              		.cfi_def_cfa_offset 20
 570              		.cfi_offset 4, -20
 571              		.cfi_offset 5, -16
 572              		.cfi_offset 6, -12
 573              		.cfi_offset 7, -8
 574              		.cfi_offset 14, -4
 575 000e 85B0     		sub	sp, sp, #20
 576              	.LCFI5:
 577              		.cfi_def_cfa_offset 40
 578 0010 1646     		mov	r6, r2
 579 0012 0D46     		mov	r5, r1
 580 0014 0446     		mov	r4, r0
1204:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 581              		.loc 1 1204 0
 582 0016 C768     		ldr	r7, [r0, #12]
 583 0018 486A     		ldr	r0, [r1, #36]
 584              	.LVL73:
 585 001a FFF7FEFF 		bl	lwip_htonl
 586              	.LVL74:
 587 001e B860     		str	r0, [r7, #8]	@ unaligned
1215:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 588              		.loc 1 1215 0
 589 0020 E768     		ldr	r7, [r4, #12]
 590 0022 688D     		ldrh	r0, [r5, #42]
 591 0024 FFF7FEFF 		bl	lwip_htons
 592              	.LVL75:
 593 0028 F881     		strh	r0, [r7, #14]	@ unaligned
1218:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 594              		.loc 1 1218 0
 595 002a 6B6A     		ldr	r3, [r5, #36]
 596 002c 6A8D     		ldrh	r2, [r5, #42]
 597 002e 1344     		add	r3, r3, r2
 598 0030 EB62     		str	r3, [r5, #44]
1223:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_MSS) {
 599              		.loc 1 1223 0
 600 0032 E768     		ldr	r7, [r4, #12]
 601              	.LVL76:
1224:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t mss;
 602              		.loc 1 1224 0
 603 0034 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 604 0036 13F0010F 		tst	r3, #1
 605 003a 26D1     		bne	.L62
 606              	.LVL77:
 607              	.L53:
1251:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rtime = 0;
 608              		.loc 1 1251 0
 609 003c B5F93030 		ldrsh	r3, [r5, #48]
 610 0040 002B     		cmp	r3, #0
ARM GAS  /tmp/cccXI43k.s 			page 36


 611 0042 2DDB     		blt	.L63
 612              	.L54:
1255:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rttest = tcp_ticks;
 613              		.loc 1 1255 0
 614 0044 6B6B     		ldr	r3, [r5, #52]
 615 0046 002B     		cmp	r3, #0
 616 0048 2DD0     		beq	.L64
 617              	.L55:
1265:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (len == 0) {
 618              		.loc 1 1265 0
 619 004a E368     		ldr	r3, [r4, #12]
 620 004c 6268     		ldr	r2, [r4, #4]
 621 004e 5168     		ldr	r1, [r2, #4]
 622 0050 5B1A     		subs	r3, r3, r1
 623 0052 9BB2     		uxth	r3, r3
 624              	.LVL78:
1271:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p->tot_len -= len;
 625              		.loc 1 1271 0
 626 0054 5189     		ldrh	r1, [r2, #10]
 627 0056 C91A     		subs	r1, r1, r3
 628 0058 5181     		strh	r1, [r2, #10]	@ movhi
1272:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 629              		.loc 1 1272 0
 630 005a 6168     		ldr	r1, [r4, #4]
 631 005c 0A89     		ldrh	r2, [r1, #8]
 632 005e D31A     		subs	r3, r2, r3
 633              	.LVL79:
 634 0060 0B81     		strh	r3, [r1, #8]	@ movhi
1274:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 635              		.loc 1 1274 0
 636 0062 6368     		ldr	r3, [r4, #4]
 637 0064 E268     		ldr	r2, [r4, #12]
 638 0066 5A60     		str	r2, [r3, #4]
1276:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if CHECKSUM_GEN_TCP
 639              		.loc 1 1276 0
 640 0068 E368     		ldr	r3, [r4, #12]
 641 006a 0022     		movs	r2, #0
 642 006c 1A74     		strb	r2, [r3, #16]
 643 006e 5A74     		strb	r2, [r3, #17]
1317:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->tos, IP_PROTO_TCP, netif);
 644              		.loc 1 1317 0
 645 0070 6068     		ldr	r0, [r4, #4]
 646 0072 AB7A     		ldrb	r3, [r5, #10]	@ zero_extendqisi2
 647 0074 6A7A     		ldrb	r2, [r5, #9]	@ zero_extendqisi2
 648 0076 0296     		str	r6, [sp, #8]
 649 0078 0621     		movs	r1, #6
 650 007a 0191     		str	r1, [sp, #4]
 651 007c 0092     		str	r2, [sp]
 652 007e 2A1D     		adds	r2, r5, #4
 653 0080 2946     		mov	r1, r5
 654 0082 FFF7FEFF 		bl	ip4_output_if
 655              	.LVL80:
 656              		.loc 1 1321 0
 657 0086 05B0     		add	sp, sp, #20
 658              	.LCFI6:
 659              		.cfi_remember_state
 660              		.cfi_def_cfa_offset 20
ARM GAS  /tmp/cccXI43k.s 			page 37


 661              		@ sp needed
 662 0088 F0BD     		pop	{r4, r5, r6, r7, pc}
 663              	.LVL81:
 664              	.L62:
 665              	.LCFI7:
 666              		.cfi_restore_state
 667              	.LBB2:
1227:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_CALCULATE_EFF_SEND_MSS */
 668              		.loc 1 1227 0
 669 008a 291D     		adds	r1, r5, #4
 670 008c 4FF40670 		mov	r0, #536
 671 0090 FFF7FEFF 		bl	tcp_eff_send_mss_impl
 672              	.LVL82:
1231:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 1;
 673              		.loc 1 1231 0
 674 0094 40F00170 		orr	r0, r0, #33816576
 675              	.LVL83:
 676 0098 FFF7FEFF 		bl	lwip_htonl
 677              	.LVL84:
 678 009c 7861     		str	r0, [r7, #20]
 679              	.LVL85:
 680 009e CDE7     		b	.L53
 681              	.LVL86:
 682              	.L63:
 683              	.LBE2:
1252:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 684              		.loc 1 1252 0
 685 00a0 0023     		movs	r3, #0
 686 00a2 2B86     		strh	r3, [r5, #48]	@ movhi
 687 00a4 CEE7     		b	.L54
 688              	.L64:
1256:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rtseq = lwip_ntohl(seg->tcphdr->seqno);
 689              		.loc 1 1256 0
 690 00a6 044B     		ldr	r3, .L65
 691 00a8 1B68     		ldr	r3, [r3]
 692 00aa 6B63     		str	r3, [r5, #52]
1257:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 693              		.loc 1 1257 0
 694 00ac E368     		ldr	r3, [r4, #12]
 695 00ae 5868     		ldr	r0, [r3, #4]	@ unaligned
 696 00b0 FFF7FEFF 		bl	lwip_htonl
 697              	.LVL87:
 698 00b4 A863     		str	r0, [r5, #56]
 699 00b6 C8E7     		b	.L55
 700              	.L66:
 701              		.align	2
 702              	.L65:
 703 00b8 00000000 		.word	tcp_ticks
 704              		.cfi_endproc
 705              	.LFE161:
 707              		.section	.text.tcp_write,"ax",%progbits
 708              		.align	1
 709              		.global	tcp_write
 710              		.syntax unified
 711              		.thumb
 712              		.thumb_func
 713              		.fpu fpv5-sp-d16
ARM GAS  /tmp/cccXI43k.s 			page 38


 715              	tcp_write:
 716              	.LFB157:
 369:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *concat_p = NULL;
 717              		.loc 1 369 0
 718              		.cfi_startproc
 719              		@ args = 0, pretend = 0, frame = 48
 720              		@ frame_needed = 0, uses_anonymous_args = 0
 721              	.LVL88:
 722 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 723              	.LCFI8:
 724              		.cfi_def_cfa_offset 36
 725              		.cfi_offset 4, -36
 726              		.cfi_offset 5, -32
 727              		.cfi_offset 6, -28
 728              		.cfi_offset 7, -24
 729              		.cfi_offset 8, -20
 730              		.cfi_offset 9, -16
 731              		.cfi_offset 10, -12
 732              		.cfi_offset 11, -8
 733              		.cfi_offset 14, -4
 734 0004 91B0     		sub	sp, sp, #68
 735              	.LCFI9:
 736              		.cfi_def_cfa_offset 104
 737 0006 8046     		mov	r8, r0
 738 0008 0791     		str	r1, [sp, #28]
 739 000a 9246     		mov	r10, r2
 740 000c 0693     		str	r3, [sp, #24]
 741              	.LVL89:
 377:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t oversize_used = 0;
 742              		.loc 1 377 0
 743 000e 0023     		movs	r3, #0
 744              	.LVL90:
 745 0010 ADF83E30 		strh	r3, [sp, #62]	@ movhi
 746              	.LVL91:
 391:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   mss_local = mss_local ? mss_local : pcb->mss;
 747              		.loc 1 391 0
 748 0014 B0F85E30 		ldrh	r3, [r0, #94]
 749 0018 B0F832B0 		ldrh	fp, [r0, #50]
 750 001c 5B08     		lsrs	r3, r3, #1
 751 001e 5B45     		cmp	r3, fp
 752 0020 28BF     		it	cs
 753 0022 5B46     		movcs	r3, fp
 754              	.LVL92:
 392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 755              		.loc 1 392 0
 756 0024 03B1     		cbz	r3, .L68
 757 0026 9B46     		mov	fp, r3
 758              	.L68:
 759              	.LVL93:
 401:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****              arg != NULL, return ERR_ARG;);
 760              		.loc 1 401 0 discriminator 4
 761 0028 079B     		ldr	r3, [sp, #28]
 762 002a 8BB1     		cbz	r3, .L127
 404:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (err != ERR_OK) {
 763              		.loc 1 404 0
 764 002c 5146     		mov	r1, r10
 765              	.LVL94:
ARM GAS  /tmp/cccXI43k.s 			page 39


 766 002e 4046     		mov	r0, r8
 767              	.LVL95:
 768 0030 FFF7FEFF 		bl	tcp_write_checks
 769              	.LVL96:
 405:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return err;
 770              		.loc 1 405 0
 771 0034 0A90     		str	r0, [sp, #40]
 772 0036 0028     		cmp	r0, #0
 773 0038 40F0A581 		bne	.L70
 408:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 774              		.loc 1 408 0
 775 003c B8F86260 		ldrh	r6, [r8, #98]
 776              	.LVL97:
 445:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t space;
 777              		.loc 1 445 0
 778 0040 D8F86830 		ldr	r3, [r8, #104]
 779 0044 0993     		str	r3, [sp, #36]
 780 0046 002B     		cmp	r3, #0
 781 0048 00F0CE80 		beq	.L128
 782 004c 099A     		ldr	r2, [sp, #36]
 783 004e 0BE0     		b	.L72
 784              	.LVL98:
 785              	.L127:
 401:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****              arg != NULL, return ERR_ARG;);
 786              		.loc 1 401 0 discriminator 1
 787 0050 894B     		ldr	r3, .L148
 788 0052 4FF4C972 		mov	r2, #402
 789              	.LVL99:
 790 0056 8949     		ldr	r1, .L148+4
 791              	.LVL100:
 792 0058 8948     		ldr	r0, .L148+8
 793              	.LVL101:
 794 005a FFF7FEFF 		bl	printf
 795              	.LVL102:
 796 005e 6FF00F03 		mvn	r3, #15
 797 0062 0A93     		str	r3, [sp, #40]
 798 0064 8FE1     		b	.L70
 799              	.LVL103:
 800              	.L111:
 801              	.LBB3:
 451:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 802              		.loc 1 451 0
 803 0066 1A46     		mov	r2, r3
 804              	.LVL104:
 805              	.L72:
 450:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 806              		.loc 1 450 0 discriminator 1
 807 0068 1368     		ldr	r3, [r2]
 808 006a 002B     		cmp	r3, #0
 809 006c FBD1     		bne	.L111
 810 006e 0992     		str	r2, [sp, #36]
 811 0070 9946     		mov	r9, r3
 454:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("mss_local is too small", mss_local >= last_unsent->len + unsent_optlen);
 812              		.loc 1 454 0
 813 0072 947A     		ldrb	r4, [r2, #10]	@ zero_extendqisi2
 814 0074 A400     		lsls	r4, r4, #2
 815 0076 04F00404 		and	r4, r4, #4
ARM GAS  /tmp/cccXI43k.s 			page 40


 816              	.LVL105:
 455:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     space = mss_local - (last_unsent->len + unsent_optlen);
 817              		.loc 1 455 0
 818 007a 1389     		ldrh	r3, [r2, #8]
 819 007c 2344     		add	r3, r3, r4
 820 007e 9B45     		cmp	fp, r3
 821 0080 42DB     		blt	.L129
 822              	.LVL106:
 823              	.L73:
 456:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 824              		.loc 1 456 0
 825 0082 099B     		ldr	r3, [sp, #36]
 826 0084 1B89     		ldrh	r3, [r3, #8]
 827 0086 1C44     		add	r4, r4, r3
 828              	.LVL107:
 829 0088 A4B2     		uxth	r4, r4
 830 008a ABEB0404 		sub	r4, fp, r4
 831 008e A4B2     		uxth	r4, r4
 832              	.LVL108:
 471:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (oversize > 0) {
 833              		.loc 1 471 0
 834 0090 B8F86430 		ldrh	r3, [r8, #100]
 835 0094 0B93     		str	r3, [sp, #44]
 836 0096 ADF83E30 		strh	r3, [sp, #62]	@ movhi
 472:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("inconsistent oversize vs. space", oversize <= space);
 837              		.loc 1 472 0
 838 009a 002B     		cmp	r3, #0
 839 009c 46D0     		beq	.L112
 473:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg = last_unsent;
 840              		.loc 1 473 0
 841 009e A342     		cmp	r3, r4
 842 00a0 3AD8     		bhi	.L130
 843              	.L75:
 844              	.LVL109:
 475:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += oversize_used;
 845              		.loc 1 475 0
 846 00a2 BDF83E30 		ldrh	r3, [sp, #62]
 847 00a6 5345     		cmp	r3, r10
 848 00a8 3ED2     		bcs	.L76
 475:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += oversize_used;
 849              		.loc 1 475 0 is_stmt 0 discriminator 1
 850 00aa 1A46     		mov	r2, r3
 851              	.L77:
 475:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += oversize_used;
 852              		.loc 1 475 0 discriminator 4
 853 00ac A242     		cmp	r2, r4
 854 00ae A8BF     		it	ge
 855 00b0 2246     		movge	r2, r4
 856 00b2 0B92     		str	r2, [sp, #44]
 857              	.LVL110:
 477:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       space -= oversize_used;
 858              		.loc 1 477 0 is_stmt 1 discriminator 4
 859 00b4 9B1A     		subs	r3, r3, r2
 860 00b6 ADF83E30 		strh	r3, [sp, #62]	@ movhi
 478:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 861              		.loc 1 478 0 discriminator 4
 862 00ba A41A     		subs	r4, r4, r2
ARM GAS  /tmp/cccXI43k.s 			page 41


 863              	.LVL111:
 864 00bc A4B2     		uxth	r4, r4
 865              	.LVL112:
 474:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       oversize_used = LWIP_MIN(space, LWIP_MIN(oversize, len));
 866              		.loc 1 474 0 discriminator 4
 867 00be 099F     		ldr	r7, [sp, #36]
 868              	.LVL113:
 869              	.L74:
 481:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 870              		.loc 1 481 0
 871 00c0 BDF83E20 		ldrh	r2, [sp, #62]
 872 00c4 0B9B     		ldr	r3, [sp, #44]
 873 00c6 B3EB0A03 		subs	r3, r3, r10
 874 00ca 18BF     		it	ne
 875 00cc 0123     		movne	r3, #1
 876 00ce 002A     		cmp	r2, #0
 877 00d0 08BF     		it	eq
 878 00d2 0023     		moveq	r3, #0
 879 00d4 63BB     		cbnz	r3, .L131
 880              	.L78:
 495:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       u16_t seglen = LWIP_MIN(space, len - pos);
 881              		.loc 1 495 0
 882 00d6 0B9B     		ldr	r3, [sp, #44]
 883 00d8 002C     		cmp	r4, #0
 884 00da 18BF     		it	ne
 885 00dc 5345     		cmpne	r3, r10
 886 00de 80F09A80 		bcs	.L113
 495:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       u16_t seglen = LWIP_MIN(space, len - pos);
 887              		.loc 1 495 0 is_stmt 0 discriminator 1
 888 00e2 099A     		ldr	r2, [sp, #36]
 889 00e4 1289     		ldrh	r2, [r2, #8]
 890 00e6 0D92     		str	r2, [sp, #52]
 891 00e8 002A     		cmp	r2, #0
 892 00ea 00F09D80 		beq	.L114
 893              	.LBB4:
 496:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg = last_unsent;
 894              		.loc 1 496 0 is_stmt 1
 895 00ee AAEB0305 		sub	r5, r10, r3
 896 00f2 A542     		cmp	r5, r4
 897 00f4 A8BF     		it	ge
 898 00f6 2546     		movge	r5, r4
 899 00f8 AFB2     		uxth	r7, r5
 900              	.LVL114:
 502:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* Data is copied */
 901              		.loc 1 502 0
 902 00fa 069B     		ldr	r3, [sp, #24]
 903 00fc 13F0010F 		tst	r3, #1
 904 0100 1ED1     		bne	.L132
 905              	.LBB5:
 522:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (p->type == PBUF_ROM && (const u8_t *)p->payload + p->len == (const u8_t *)arg) {
 906              		.loc 1 522 0
 907 0102 099B     		ldr	r3, [sp, #36]
 908 0104 5B68     		ldr	r3, [r3, #4]
 909              	.LVL115:
 910 0106 3DE0     		b	.L83
 911              	.LVL116:
 912              	.L129:
ARM GAS  /tmp/cccXI43k.s 			page 42


 913              	.LBE5:
 914              	.LBE4:
 455:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     space = mss_local - (last_unsent->len + unsent_optlen);
 915              		.loc 1 455 0 discriminator 1
 916 0108 5B4B     		ldr	r3, .L148
 917 010a 40F2C712 		movw	r2, #455
 918              	.LVL117:
 919 010e 5D49     		ldr	r1, .L148+12
 920 0110 5B48     		ldr	r0, .L148+8
 921              	.LVL118:
 922 0112 FFF7FEFF 		bl	printf
 923              	.LVL119:
 924 0116 B4E7     		b	.L73
 925              	.LVL120:
 926              	.L130:
 473:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg = last_unsent;
 927              		.loc 1 473 0 discriminator 1
 928 0118 574B     		ldr	r3, .L148
 929 011a 40F2D912 		movw	r2, #473
 930 011e 5A49     		ldr	r1, .L148+16
 931 0120 5748     		ldr	r0, .L148+8
 932 0122 FFF7FEFF 		bl	printf
 933              	.LVL121:
 934 0126 BCE7     		b	.L75
 935              	.LVL122:
 936              	.L76:
 475:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += oversize_used;
 937              		.loc 1 475 0 discriminator 2
 938 0128 5246     		mov	r2, r10
 939 012a BFE7     		b	.L77
 940              	.LVL123:
 941              	.L112:
 942              	.LBE3:
 371:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t pos = 0; /* position in 'arg' data */
 943              		.loc 1 371 0
 944 012c 4F46     		mov	r7, r9
 945 012e C7E7     		b	.L74
 946              	.LVL124:
 947              	.L131:
 948              	.LBB11:
 481:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 949              		.loc 1 481 0 discriminator 1
 950 0130 514B     		ldr	r3, .L148
 951 0132 40F2E112 		movw	r2, #481
 952 0136 5549     		ldr	r1, .L148+20
 953 0138 5148     		ldr	r0, .L148+8
 954 013a FFF7FEFF 		bl	printf
 955              	.LVL125:
 956 013e CAE7     		b	.L78
 957              	.LVL126:
 958              	.L132:
 959              	.LBB8:
 504:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 960              		.loc 1 504 0
 961 0140 0123     		movs	r3, #1
 962 0142 0293     		str	r3, [sp, #8]
 963 0144 069B     		ldr	r3, [sp, #24]
ARM GAS  /tmp/cccXI43k.s 			page 43


 964 0146 0193     		str	r3, [sp, #4]
 965 0148 CDF80080 		str	r8, [sp]
 966 014c 0DF13E03 		add	r3, sp, #62
 967 0150 2246     		mov	r2, r4
 968 0152 3946     		mov	r1, r7
 969 0154 0420     		movs	r0, #4
 970 0156 FFF7FEFF 		bl	tcp_pbuf_prealloc
 971              	.LVL127:
 972 015a 0446     		mov	r4, r0
 973              	.LVL128:
 974 015c 0C90     		str	r0, [sp, #48]
 975 015e 0028     		cmp	r0, #0
 976 0160 00F0EE80 		beq	.L81
 513:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 977              		.loc 1 513 0
 978 0164 3A46     		mov	r2, r7
 979 0166 079B     		ldr	r3, [sp, #28]
 980 0168 0B99     		ldr	r1, [sp, #44]
 981 016a 5918     		adds	r1, r3, r1
 982 016c 4068     		ldr	r0, [r0, #4]
 983              	.LVL129:
 984 016e FFF7FEFF 		bl	memcpy
 985              	.LVL130:
 517:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       } else {
 986              		.loc 1 517 0
 987 0172 2046     		mov	r0, r4
 988 0174 FFF7FEFF 		bl	pbuf_clen
 989              	.LVL131:
 990 0178 0644     		add	r6, r6, r0
 991              	.LVL132:
 992 017a B6B2     		uxth	r6, r6
 993              	.LVL133:
 994              	.LBE8:
 995              	.LBE11:
 383:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 996              		.loc 1 383 0
 997 017c 0023     		movs	r3, #0
 998 017e 0D93     		str	r3, [sp, #52]
 999              	.LBB12:
 1000              	.LBB9:
 1001 0180 20E0     		b	.L82
 1002              	.LVL134:
 1003              	.L115:
 1004              	.LBB6:
 522:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (p->type == PBUF_ROM && (const u8_t *)p->payload + p->len == (const u8_t *)arg) {
 1005              		.loc 1 522 0
 1006 0182 1346     		mov	r3, r2
 1007              	.LVL135:
 1008              	.L83:
 522:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (p->type == PBUF_ROM && (const u8_t *)p->payload + p->len == (const u8_t *)arg) {
 1009              		.loc 1 522 0 is_stmt 0 discriminator 1
 1010 0184 1A68     		ldr	r2, [r3]
 1011 0186 002A     		cmp	r2, #0
 1012 0188 FBD1     		bne	.L115
 1013 018a 0C92     		str	r2, [sp, #48]
 523:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           LWIP_ASSERT("tcp_write: ROM pbufs cannot be oversized", pos == 0);
 1014              		.loc 1 523 0 is_stmt 1
ARM GAS  /tmp/cccXI43k.s 			page 44


 1015 018c 1A7B     		ldrb	r2, [r3, #12]	@ zero_extendqisi2
 1016 018e 012A     		cmp	r2, #1
 1017 0190 05D1     		bne	.L84
 523:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           LWIP_ASSERT("tcp_write: ROM pbufs cannot be oversized", pos == 0);
 1018              		.loc 1 523 0 is_stmt 0 discriminator 1
 1019 0192 5A68     		ldr	r2, [r3, #4]
 1020 0194 5B89     		ldrh	r3, [r3, #10]
 1021              	.LVL136:
 1022 0196 1344     		add	r3, r3, r2
 1023 0198 079A     		ldr	r2, [sp, #28]
 1024 019a 9342     		cmp	r3, r2
 1025 019c 17D0     		beq	.L133
 1026              	.L84:
 527:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 1027              		.loc 1 527 0 is_stmt 1
 1028 019e 0122     		movs	r2, #1
 1029 01a0 3946     		mov	r1, r7
 1030 01a2 0420     		movs	r0, #4
 1031 01a4 FFF7FEFF 		bl	pbuf_alloc
 1032              	.LVL137:
 1033 01a8 0C90     		str	r0, [sp, #48]
 1034 01aa 0028     		cmp	r0, #0
 1035 01ac 00F0C880 		beq	.L81
 533:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           queuelen += pbuf_clen(concat_p);
 1036              		.loc 1 533 0
 1037 01b0 079B     		ldr	r3, [sp, #28]
 1038 01b2 0B9A     		ldr	r2, [sp, #44]
 1039 01b4 1344     		add	r3, r3, r2
 1040 01b6 4360     		str	r3, [r0, #4]
 534:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
 1041              		.loc 1 534 0
 1042 01b8 FFF7FEFF 		bl	pbuf_clen
 1043              	.LVL138:
 1044 01bc 0644     		add	r6, r6, r0
 1045              	.LVL139:
 1046 01be B6B2     		uxth	r6, r6
 1047              	.LVL140:
 1048              	.LBE6:
 1049              	.LBE9:
 1050              	.LBE12:
 383:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 1051              		.loc 1 383 0
 1052 01c0 0023     		movs	r3, #0
 1053 01c2 0D93     		str	r3, [sp, #52]
 1054              	.LVL141:
 1055              	.L82:
 1056              	.LBB13:
 1057              	.LBB10:
 544:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 1058              		.loc 1 544 0
 1059 01c4 0B9B     		ldr	r3, [sp, #44]
 1060 01c6 DC19     		adds	r4, r3, r7
 1061 01c8 A4B2     		uxth	r4, r4
 1062              	.LVL142:
 497:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1063              		.loc 1 497 0
 1064 01ca 099F     		ldr	r7, [sp, #36]
ARM GAS  /tmp/cccXI43k.s 			page 45


 1065              	.LVL143:
 1066 01cc 27E0     		b	.L79
 1067              	.LVL144:
 1068              	.L133:
 1069              	.LBB7:
 524:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           extendlen = seglen;
 1070              		.loc 1 524 0
 1071 01ce 0B9B     		ldr	r3, [sp, #44]
 1072 01d0 0BB9     		cbnz	r3, .L134
 525:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         } else {
 1073              		.loc 1 525 0
 1074 01d2 0D97     		str	r7, [sp, #52]
 1075 01d4 F6E7     		b	.L82
 1076              	.L134:
 524:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           extendlen = seglen;
 1077              		.loc 1 524 0 discriminator 1
 1078 01d6 284B     		ldr	r3, .L148
 1079 01d8 4FF40372 		mov	r2, #524
 1080 01dc 2C49     		ldr	r1, .L148+24
 1081 01de 2848     		ldr	r0, .L148+8
 1082 01e0 FFF7FEFF 		bl	printf
 1083              	.LVL145:
 525:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         } else {
 1084              		.loc 1 525 0 discriminator 1
 1085 01e4 0D97     		str	r7, [sp, #52]
 1086 01e6 EDE7     		b	.L82
 1087              	.LVL146:
 1088              	.L128:
 1089              	.LBE7:
 1090              	.LBE10:
 1091              	.LBE13:
 548:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent_oversize == 0);
 1092              		.loc 1 548 0
 1093 01e8 B8F86440 		ldrh	r4, [r8, #100]
 1094 01ec 2CB9     		cbnz	r4, .L135
 383:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 1095              		.loc 1 383 0
 1096 01ee 0D94     		str	r4, [sp, #52]
 378:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 1097              		.loc 1 378 0
 1098 01f0 0B94     		str	r4, [sp, #44]
 371:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t pos = 0; /* position in 'arg' data */
 1099              		.loc 1 371 0
 1100 01f2 099F     		ldr	r7, [sp, #36]
 370:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *last_unsent = NULL, *seg = NULL, *prev_seg = NULL, *queue = NULL;
 1101              		.loc 1 370 0
 1102 01f4 0023     		movs	r3, #0
 1103 01f6 0C93     		str	r3, [sp, #48]
 1104 01f8 11E0     		b	.L79
 1105              	.L135:
 548:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent_oversize == 0);
 1106              		.loc 1 548 0 discriminator 1
 1107 01fa 1F4B     		ldr	r3, .L148
 1108 01fc 40F22522 		movw	r2, #549
 1109 0200 2449     		ldr	r1, .L148+28
 1110 0202 1F48     		ldr	r0, .L148+8
 1111              	.LVL147:
ARM GAS  /tmp/cccXI43k.s 			page 46


 1112 0204 FFF7FEFF 		bl	printf
 1113              	.LVL148:
 371:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t pos = 0; /* position in 'arg' data */
 1114              		.loc 1 371 0 discriminator 1
 1115 0208 099F     		ldr	r7, [sp, #36]
 383:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 1116              		.loc 1 383 0 discriminator 1
 1117 020a 0023     		movs	r3, #0
 1118 020c 0D93     		str	r3, [sp, #52]
 378:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 1119              		.loc 1 378 0 discriminator 1
 1120 020e 0B93     		str	r3, [sp, #44]
 372:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t queuelen;
 1121              		.loc 1 372 0 discriminator 1
 1122 0210 1C46     		mov	r4, r3
 370:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *last_unsent = NULL, *seg = NULL, *prev_seg = NULL, *queue = NULL;
 1123              		.loc 1 370 0 discriminator 1
 1124 0212 0C93     		str	r3, [sp, #48]
 1125 0214 03E0     		b	.L79
 1126              	.LVL149:
 1127              	.L113:
 1128              	.LBB14:
 1129 0216 0B9C     		ldr	r4, [sp, #44]
 1130              	.LVL150:
 1131              	.LBE14:
 383:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 1132              		.loc 1 383 0
 1133 0218 0023     		movs	r3, #0
 1134 021a 0D93     		str	r3, [sp, #52]
 370:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *last_unsent = NULL, *seg = NULL, *prev_seg = NULL, *queue = NULL;
 1135              		.loc 1 370 0
 1136 021c 0C93     		str	r3, [sp, #48]
 1137              	.LVL151:
 1138              	.L79:
 1139              	.LBB15:
 642:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
 1140              		.loc 1 642 0
 1141 021e 4FF00009 		mov	r9, #0
 1142 0222 CDF81490 		str	r9, [sp, #20]
 1143 0226 6CE0     		b	.L85
 1144              	.LVL152:
 1145              	.L114:
 1146              	.LBE15:
 1147              	.LBB18:
 1148 0228 0B9C     		ldr	r4, [sp, #44]
 1149              	.LVL153:
 1150              	.LBE18:
 370:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *last_unsent = NULL, *seg = NULL, *prev_seg = NULL, *queue = NULL;
 1151              		.loc 1 370 0
 1152 022a 0023     		movs	r3, #0
 1153 022c 0C93     		str	r3, [sp, #48]
 1154 022e F6E7     		b	.L79
 1155              	.LVL154:
 1156              	.L141:
 1157              	.LBB19:
 572:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write : could not allocate mem
 1158              		.loc 1 572 0
ARM GAS  /tmp/cccXI43k.s 			page 47


 1159 0230 B9FA89F3 		clz	r3, r9
 1160 0234 5B09     		lsrs	r3, r3, #5
 1161 0236 0293     		str	r3, [sp, #8]
 1162 0238 069B     		ldr	r3, [sp, #24]
 1163 023a 0193     		str	r3, [sp, #4]
 1164 023c CDF80080 		str	r8, [sp]
 1165 0240 0DF13E03 		add	r3, sp, #62
 1166 0244 5A46     		mov	r2, fp
 1167 0246 2946     		mov	r1, r5
 1168 0248 0020     		movs	r0, #0
 1169 024a FFF7FEFF 		bl	tcp_pbuf_prealloc
 1170              	.LVL155:
 1171 024e 0746     		mov	r7, r0
 1172              	.LVL156:
 1173 0250 0028     		cmp	r0, #0
 1174 0252 75D0     		beq	.L81
 576:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   (p->len >= seglen));
 1175              		.loc 1 576 0
 1176 0254 4389     		ldrh	r3, [r0, #10]
 1177 0256 AB42     		cmp	r3, r5
 1178 0258 06D3     		bcc	.L136
 1179              	.LVL157:
 1180              	.L87:
 578:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
 1181              		.loc 1 578 0
 1182 025a 2A46     		mov	r2, r5
 1183 025c 079B     		ldr	r3, [sp, #28]
 1184 025e 1919     		adds	r1, r3, r4
 1185 0260 7868     		ldr	r0, [r7, #4]
 1186 0262 FFF7FEFF 		bl	memcpy
 1187              	.LVL158:
 1188 0266 2FE0     		b	.L88
 1189              	.LVL159:
 1190              	.L136:
 576:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   (p->len >= seglen));
 1191              		.loc 1 576 0 discriminator 1
 1192 0268 034B     		ldr	r3, .L148
 1193 026a 40F24122 		movw	r2, #577
 1194 026e 0A49     		ldr	r1, .L148+32
 1195 0270 0348     		ldr	r0, .L148+8
 1196              	.LVL160:
 1197 0272 FFF7FEFF 		bl	printf
 1198              	.LVL161:
 1199 0276 F0E7     		b	.L87
 1200              	.L149:
 1201              		.align	2
 1202              	.L148:
 1203 0278 00000000 		.word	.LC0
 1204 027c 00000000 		.word	.LC7
 1205 0280 6C000000 		.word	.LC2
 1206 0284 34000000 		.word	.LC8
 1207 0288 4C000000 		.word	.LC9
 1208 028c 6C000000 		.word	.LC10
 1209 0290 8C000000 		.word	.LC11
 1210 0294 B8000000 		.word	.LC12
 1211 0298 E8000000 		.word	.LC13
 1212              	.LVL162:
ARM GAS  /tmp/cccXI43k.s 			page 48


 1213              	.L89:
 1214              	.LBB16:
 589:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: could not allocate memo
 1215              		.loc 1 589 0
 1216 029c 0122     		movs	r2, #1
 1217 029e 2946     		mov	r1, r5
 1218 02a0 0020     		movs	r0, #0
 1219 02a2 FFF7FEFF 		bl	pbuf_alloc
 1220              	.LVL163:
 1221 02a6 0890     		str	r0, [sp, #32]
 1222 02a8 0028     		cmp	r0, #0
 1223 02aa 49D0     		beq	.L81
 602:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1224              		.loc 1 602 0
 1225 02ac 079B     		ldr	r3, [sp, #28]
 1226 02ae 2344     		add	r3, r3, r4
 1227 02b0 4360     		str	r3, [r0, #4]
 605:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* If allocation fails, we have to deallocate the data pbuf as
 1228              		.loc 1 605 0
 1229 02b2 0022     		movs	r2, #0
 1230 02b4 1146     		mov	r1, r2
 1231 02b6 1046     		mov	r0, r2
 1232              	.LVL164:
 1233 02b8 FFF7FEFF 		bl	pbuf_alloc
 1234              	.LVL165:
 1235 02bc 0746     		mov	r7, r0
 1236              	.LVL166:
 1237 02be 0028     		cmp	r0, #0
 1238 02c0 37D0     		beq	.L137
 613:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 1239              		.loc 1 613 0
 1240 02c2 0899     		ldr	r1, [sp, #32]
 1241 02c4 FFF7FEFF 		bl	pbuf_cat
 1242              	.LVL167:
 1243              	.L88:
 1244              	.LBE16:
 616:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1245              		.loc 1 616 0
 1246 02c8 3846     		mov	r0, r7
 1247 02ca FFF7FEFF 		bl	pbuf_clen
 1248              	.LVL168:
 1249 02ce 0644     		add	r6, r6, r0
 1250              	.LVL169:
 1251 02d0 B6B2     		uxth	r6, r6
 1252              	.LVL170:
 621:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: queue too long %"U16_F" (
 1253              		.loc 1 621 0
 1254 02d2 092E     		cmp	r6, #9
 1255 02d4 31D8     		bhi	.L138
 628:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       goto memerr;
 1256              		.loc 1 628 0
 1257 02d6 D8F85830 		ldr	r3, [r8, #88]
 1258 02da 0022     		movs	r2, #0
 1259 02dc 0092     		str	r2, [sp]
 1260 02de 2344     		add	r3, r3, r4
 1261 02e0 3946     		mov	r1, r7
 1262 02e2 4046     		mov	r0, r8
ARM GAS  /tmp/cccXI43k.s 			page 49


 1263 02e4 FFF7FEFF 		bl	tcp_create_segment
 1264              	.LVL171:
 1265 02e8 0746     		mov	r7, r0
 1266              	.LVL172:
 1267 02ea 48B3     		cbz	r0, .L81
 641:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       queue = seg;
 1268              		.loc 1 641 0
 1269 02ec B9F1000F 		cmp	r9, #0
 1270 02f0 55D0     		beq	.L118
 645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       prev_seg->next = seg;
 1271              		.loc 1 645 0
 1272 02f2 059B     		ldr	r3, [sp, #20]
 1273 02f4 002B     		cmp	r3, #0
 1274 02f6 4AD0     		beq	.L139
 1275              	.LVL173:
 1276              	.L93:
 646:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 1277              		.loc 1 646 0
 1278 02f8 059B     		ldr	r3, [sp, #20]
 1279 02fa 1F60     		str	r7, [r3]
 1280              	.LVL174:
 1281              	.L92:
 655:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1282              		.loc 1 655 0
 1283 02fc 2C44     		add	r4, r4, r5
 1284              	.LVL175:
 1285 02fe A4B2     		uxth	r4, r4
 1286              	.LVL176:
 649:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1287              		.loc 1 649 0
 1288 0300 0597     		str	r7, [sp, #20]
 1289              	.LVL177:
 1290              	.L85:
 1291              	.LBE19:
 559:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 1292              		.loc 1 559 0
 1293 0302 5445     		cmp	r4, r10
 1294 0304 4DD2     		bcs	.L140
 1295              	.LBB20:
 561:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t max_len = mss_local - optlen;
 1296              		.loc 1 561 0
 1297 0306 AAEB0405 		sub	r5, r10, r4
 1298 030a ADB2     		uxth	r5, r5
 1299              	.LVL178:
 563:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 1300              		.loc 1 563 0
 1301 030c 5D45     		cmp	r5, fp
 1302 030e 28BF     		it	cs
 1303 0310 5D46     		movcs	r5, fp
 1304              	.LVL179:
 569:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* If copy is set, memory should be allocated and data copied
 1305              		.loc 1 569 0
 1306 0312 069B     		ldr	r3, [sp, #24]
 1307 0314 13F0010F 		tst	r3, #1
 1308 0318 8AD1     		bne	.L141
 1309              	.LBB17:
 587:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
ARM GAS  /tmp/cccXI43k.s 			page 50


 1310              		.loc 1 587 0
 1311 031a BDF83E30 		ldrh	r3, [sp, #62]
 1312 031e 002B     		cmp	r3, #0
 1313 0320 BCD0     		beq	.L89
 587:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 1314              		.loc 1 587 0 is_stmt 0 discriminator 1
 1315 0322 744B     		ldr	r3, .L150
 1316 0324 40F24B22 		movw	r2, #587
 1317 0328 7349     		ldr	r1, .L150+4
 1318 032a 7448     		ldr	r0, .L150+8
 1319 032c FFF7FEFF 		bl	printf
 1320              	.LVL180:
 1321 0330 B4E7     		b	.L89
 1322              	.LVL181:
 1323              	.L137:
 608:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: could not allocate memo
 1324              		.loc 1 608 0 is_stmt 1
 1325 0332 0898     		ldr	r0, [sp, #32]
 1326              	.LVL182:
 1327 0334 FFF7FEFF 		bl	pbuf_free
 1328              	.LVL183:
 610:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 1329              		.loc 1 610 0
 1330 0338 02E0     		b	.L81
 1331              	.LVL184:
 1332              	.L138:
 1333              	.LBE17:
 624:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       goto memerr;
 1334              		.loc 1 624 0
 1335 033a 3846     		mov	r0, r7
 1336 033c FFF7FEFF 		bl	pbuf_free
 1337              	.LVL185:
 1338              	.L81:
 1339              	.LBE20:
 759:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCP_STATS_INC(tcp.memerr);
 1340              		.loc 1 759 0
 1341 0340 98F81A30 		ldrb	r3, [r8, #26]	@ zero_extendqisi2
 1342 0344 63F07F03 		orn	r3, r3, #127
 1343 0348 88F81A30 		strb	r3, [r8, #26]
 762:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_free(concat_p);
 1344              		.loc 1 762 0
 1345 034c 0C9B     		ldr	r3, [sp, #48]
 1346 034e 13B1     		cbz	r3, .L109
 763:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1347              		.loc 1 763 0
 1348 0350 1846     		mov	r0, r3
 1349 0352 FFF7FEFF 		bl	pbuf_free
 1350              	.LVL186:
 1351              	.L109:
 765:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_segs_free(queue);
 1352              		.loc 1 765 0
 1353 0356 B9F1000F 		cmp	r9, #0
 1354 035a 02D0     		beq	.L110
 766:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1355              		.loc 1 766 0
 1356 035c 4846     		mov	r0, r9
 1357 035e FFF7FEFF 		bl	tcp_segs_free
ARM GAS  /tmp/cccXI43k.s 			page 51


 1358              	.LVL187:
 1359              	.L110:
 768:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: valid queue length", pcb->unacked != NULL ||
 1360              		.loc 1 768 0
 1361 0362 B8F86230 		ldrh	r3, [r8, #98]
 1362 0366 002B     		cmp	r3, #0
 1363 0368 00F0BC80 		beq	.L119
 769:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unsent != NULL);
 1364              		.loc 1 769 0
 1365 036c D8F86C30 		ldr	r3, [r8, #108]
 1366 0370 002B     		cmp	r3, #0
 1367 0372 40F0BB80 		bne	.L120
 769:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unsent != NULL);
 1368              		.loc 1 769 0 is_stmt 0 discriminator 1
 1369 0376 D8F86830 		ldr	r3, [r8, #104]
 1370 037a 002B     		cmp	r3, #0
 1371 037c 00F0A780 		beq	.L142
 773:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 1372              		.loc 1 773 0 is_stmt 1
 1373 0380 4FF0FF33 		mov	r3, #-1
 1374 0384 0A93     		str	r3, [sp, #40]
 1375              	.LVL188:
 1376              	.L70:
 774:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1377              		.loc 1 774 0
 1378 0386 0A98     		ldr	r0, [sp, #40]
 1379 0388 11B0     		add	sp, sp, #68
 1380              	.LCFI10:
 1381              		.cfi_remember_state
 1382              		.cfi_def_cfa_offset 36
 1383              		@ sp needed
 1384 038a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1385              	.LVL189:
 1386              	.L139:
 1387              	.LCFI11:
 1388              		.cfi_restore_state
 1389              	.LBB21:
 645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       prev_seg->next = seg;
 1390              		.loc 1 645 0 discriminator 1
 1391 038e 594B     		ldr	r3, .L150
 1392 0390 40F28522 		movw	r2, #645
 1393 0394 5A49     		ldr	r1, .L150+12
 1394 0396 5948     		ldr	r0, .L150+8
 1395              	.LVL190:
 1396 0398 FFF7FEFF 		bl	printf
 1397              	.LVL191:
 1398 039c ACE7     		b	.L93
 1399              	.LVL192:
 1400              	.L118:
 642:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
 1401              		.loc 1 642 0
 1402 039e 8146     		mov	r9, r0
 1403              	.LVL193:
 1404 03a0 ACE7     		b	.L92
 1405              	.LVL194:
 1406              	.L140:
 1407              	.LBE21:
ARM GAS  /tmp/cccXI43k.s 			page 52


 673:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 1408              		.loc 1 673 0
 1409 03a2 0B9D     		ldr	r5, [sp, #44]
 1410 03a4 D5B1     		cbz	r5, .L95
 1411              	.LBB22:
 676:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += oversize_used;
 1412              		.loc 1 676 0
 1413 03a6 099B     		ldr	r3, [sp, #36]
 1414 03a8 5C68     		ldr	r4, [r3, #4]
 1415              	.LVL195:
 1416 03aa 00E0     		b	.L96
 1417              	.L97:
 676:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += oversize_used;
 1418              		.loc 1 676 0 is_stmt 0 discriminator 2
 1419 03ac 2468     		ldr	r4, [r4]
 1420              	.LVL196:
 1421              	.L96:
 676:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += oversize_used;
 1422              		.loc 1 676 0 discriminator 1
 1423 03ae 84B1     		cbz	r4, .L143
 677:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (p->next == NULL) {
 1424              		.loc 1 677 0 is_stmt 1
 1425 03b0 2389     		ldrh	r3, [r4, #8]
 1426 03b2 2B44     		add	r3, r3, r5
 1427 03b4 2381     		strh	r3, [r4, #8]	@ movhi
 678:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         TCP_DATA_COPY((char *)p->payload + p->len, arg, oversize_used, last_unsent);
 1428              		.loc 1 678 0
 1429 03b6 2368     		ldr	r3, [r4]
 1430 03b8 002B     		cmp	r3, #0
 1431 03ba F7D1     		bne	.L97
 679:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         p->len += oversize_used;
 1432              		.loc 1 679 0
 1433 03bc 6068     		ldr	r0, [r4, #4]
 1434 03be 6389     		ldrh	r3, [r4, #10]
 1435 03c0 2A46     		mov	r2, r5
 1436 03c2 0799     		ldr	r1, [sp, #28]
 1437 03c4 1844     		add	r0, r0, r3
 1438 03c6 FFF7FEFF 		bl	memcpy
 1439              	.LVL197:
 680:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 1440              		.loc 1 680 0
 1441 03ca 6389     		ldrh	r3, [r4, #10]
 1442 03cc 2B44     		add	r3, r3, r5
 1443 03ce 6381     		strh	r3, [r4, #10]	@ movhi
 1444 03d0 ECE7     		b	.L97
 1445              	.L143:
 683:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 1446              		.loc 1 683 0
 1447 03d2 099A     		ldr	r2, [sp, #36]
 1448 03d4 1389     		ldrh	r3, [r2, #8]
 1449 03d6 0B99     		ldr	r1, [sp, #44]
 1450 03d8 1944     		add	r1, r1, r3
 1451 03da 1181     		strh	r1, [r2, #8]	@ movhi
 1452              	.LVL198:
 1453              	.L95:
 1454              	.LBE22:
 690:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
ARM GAS  /tmp/cccXI43k.s 			page 53


 1455              		.loc 1 690 0
 1456 03dc BDF83E30 		ldrh	r3, [sp, #62]
 1457 03e0 A8F86430 		strh	r3, [r8, #100]	@ movhi
 697:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: cannot concatenate when pcb->unsent is empty",
 1458              		.loc 1 697 0
 1459 03e4 0C9B     		ldr	r3, [sp, #48]
 1460 03e6 002B     		cmp	r3, #0
 1461 03e8 3DD0     		beq	.L99
 698:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (last_unsent != NULL));
 1462              		.loc 1 698 0
 1463 03ea 099B     		ldr	r3, [sp, #36]
 1464 03ec 002B     		cmp	r3, #0
 1465 03ee 32D0     		beq	.L144
 1466              	.L100:
 700:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += concat_p->tot_len;
 1467              		.loc 1 700 0
 1468 03f0 0C9D     		ldr	r5, [sp, #48]
 1469 03f2 2946     		mov	r1, r5
 1470 03f4 099C     		ldr	r4, [sp, #36]
 1471 03f6 6068     		ldr	r0, [r4, #4]
 1472 03f8 FFF7FEFF 		bl	pbuf_cat
 1473              	.LVL199:
 701:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else if (extendlen > 0) {
 1474              		.loc 1 701 0
 1475 03fc 2B89     		ldrh	r3, [r5, #8]
 1476 03fe 2289     		ldrh	r2, [r4, #8]
 1477 0400 1344     		add	r3, r3, r2
 1478 0402 2381     		strh	r3, [r4, #8]	@ movhi
 1479              	.L101:
 732:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = queue;
 1480              		.loc 1 732 0
 1481 0404 099B     		ldr	r3, [sp, #36]
 1482 0406 002B     		cmp	r3, #0
 1483 0408 52D0     		beq	.L145
 735:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1484              		.loc 1 735 0
 1485 040a 099B     		ldr	r3, [sp, #36]
 1486 040c C3F80090 		str	r9, [r3]
 1487              	.L107:
 741:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_buf -= len;
 1488              		.loc 1 741 0
 1489 0410 D8F85830 		ldr	r3, [r8, #88]
 1490 0414 5344     		add	r3, r3, r10
 1491 0416 C8F85830 		str	r3, [r8, #88]
 742:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen = queuelen;
 1492              		.loc 1 742 0
 1493 041a B8F86030 		ldrh	r3, [r8, #96]
 1494 041e A3EB0A0A 		sub	r10, r3, r10
 1495 0422 A8F860A0 		strh	r10, [r8, #96]	@ movhi
 743:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1496              		.loc 1 743 0
 1497 0426 A8F86260 		strh	r6, [r8, #98]	@ movhi
 747:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: valid queue length",
 1498              		.loc 1 747 0
 1499 042a 1EB1     		cbz	r6, .L108
 748:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 1500              		.loc 1 748 0
ARM GAS  /tmp/cccXI43k.s 			page 54


 1501 042c D8F86C30 		ldr	r3, [r8, #108]
 1502 0430 002B     		cmp	r3, #0
 1503 0432 40D0     		beq	.L146
 1504              	.L108:
 753:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_SET_FLAG(seg->tcphdr, TCP_PSH);
 1505              		.loc 1 753 0
 1506 0434 002F     		cmp	r7, #0
 1507 0436 A6D0     		beq	.L70
 753:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_SET_FLAG(seg->tcphdr, TCP_PSH);
 1508              		.loc 1 753 0 is_stmt 0 discriminator 1
 1509 0438 FB68     		ldr	r3, [r7, #12]
 1510 043a 002B     		cmp	r3, #0
 1511 043c A3D0     		beq	.L70
 753:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_SET_FLAG(seg->tcphdr, TCP_PSH);
 1512              		.loc 1 753 0 discriminator 2
 1513 043e 069A     		ldr	r2, [sp, #24]
 1514 0440 12F0020F 		tst	r2, #2
 1515 0444 9FD1     		bne	.L70
 754:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1516              		.loc 1 754 0 is_stmt 1
 1517 0446 9C89     		ldrh	r4, [r3, #12]	@ unaligned
 1518 0448 0820     		movs	r0, #8
 1519 044a FFF7FEFF 		bl	lwip_htons
 1520              	.LVL200:
 1521 044e FB68     		ldr	r3, [r7, #12]
 1522 0450 2043     		orrs	r0, r0, r4
 1523 0452 9881     		strh	r0, [r3, #12]	@ unaligned
 1524 0454 97E7     		b	.L70
 1525              	.L144:
 698:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (last_unsent != NULL));
 1526              		.loc 1 698 0 discriminator 1
 1527 0456 274B     		ldr	r3, .L150
 1528 0458 40F2BB22 		movw	r2, #699
 1529 045c 2949     		ldr	r1, .L150+16
 1530 045e 2748     		ldr	r0, .L150+8
 1531 0460 FFF7FEFF 		bl	printf
 1532              	.LVL201:
 1533 0464 C4E7     		b	.L100
 1534              	.L99:
 702:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 1535              		.loc 1 702 0
 1536 0466 0D9B     		ldr	r3, [sp, #52]
 1537 0468 002B     		cmp	r3, #0
 1538 046a CBD0     		beq	.L101
 1539              	.LBB23:
 704:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       last_unsent != NULL && last_unsent->p != NULL);
 1540              		.loc 1 704 0
 1541 046c 099B     		ldr	r3, [sp, #36]
 1542 046e 5BB1     		cbz	r3, .L102
 704:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       last_unsent != NULL && last_unsent->p != NULL);
 1543              		.loc 1 704 0 is_stmt 0 discriminator 2
 1544 0470 5B68     		ldr	r3, [r3, #4]
 1545 0472 4BB1     		cbz	r3, .L102
 1546              	.L103:
 706:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += extendlen;
 1547              		.loc 1 706 0 is_stmt 1
 1548 0474 099B     		ldr	r3, [sp, #36]
ARM GAS  /tmp/cccXI43k.s 			page 55


 1549 0476 5B68     		ldr	r3, [r3, #4]
 1550              	.LVL202:
 1551 0478 0D98     		ldr	r0, [sp, #52]
 1552              	.L104:
 706:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += extendlen;
 1553              		.loc 1 706 0 is_stmt 0 discriminator 1
 1554 047a 1968     		ldr	r1, [r3]
 1555 047c 61B1     		cbz	r1, .L147
 707:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 1556              		.loc 1 707 0 is_stmt 1 discriminator 3
 1557 047e 1A89     		ldrh	r2, [r3, #8]
 1558 0480 0244     		add	r2, r2, r0
 1559 0482 1A81     		strh	r2, [r3, #8]	@ movhi
 1560              	.LVL203:
 706:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += extendlen;
 1561              		.loc 1 706 0 discriminator 3
 1562 0484 0B46     		mov	r3, r1
 1563 0486 F8E7     		b	.L104
 1564              	.LVL204:
 1565              	.L102:
 704:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       last_unsent != NULL && last_unsent->p != NULL);
 1566              		.loc 1 704 0 discriminator 3
 1567 0488 1A4B     		ldr	r3, .L150
 1568 048a 40F2C122 		movw	r2, #705
 1569 048e 1E49     		ldr	r1, .L150+20
 1570 0490 1A48     		ldr	r0, .L150+8
 1571 0492 FFF7FEFF 		bl	printf
 1572              	.LVL205:
 1573 0496 EDE7     		b	.L103
 1574              	.LVL206:
 1575              	.L147:
 709:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     p->len += extendlen;
 1576              		.loc 1 709 0
 1577 0498 1A89     		ldrh	r2, [r3, #8]
 1578 049a 0D99     		ldr	r1, [sp, #52]
 1579 049c 0A44     		add	r2, r2, r1
 1580 049e 1A81     		strh	r2, [r3, #8]	@ movhi
 710:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += extendlen;
 1581              		.loc 1 710 0
 1582 04a0 5A89     		ldrh	r2, [r3, #10]
 1583 04a2 0A44     		add	r2, r2, r1
 1584 04a4 5A81     		strh	r2, [r3, #10]	@ movhi
 711:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1585              		.loc 1 711 0
 1586 04a6 099A     		ldr	r2, [sp, #36]
 1587 04a8 1389     		ldrh	r3, [r2, #8]
 1588              	.LVL207:
 1589 04aa 0B44     		add	r3, r3, r1
 1590 04ac 1381     		strh	r3, [r2, #8]	@ movhi
 1591 04ae A9E7     		b	.L101
 1592              	.L145:
 1593              	.LBE23:
 733:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 1594              		.loc 1 733 0
 1595 04b0 C8F86890 		str	r9, [r8, #104]
 1596 04b4 ACE7     		b	.L107
 1597              	.L146:
ARM GAS  /tmp/cccXI43k.s 			page 56


 748:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 1598              		.loc 1 748 0 discriminator 1
 1599 04b6 D8F86830 		ldr	r3, [r8, #104]
 1600 04ba 002B     		cmp	r3, #0
 1601 04bc BAD1     		bne	.L108
 748:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 1602              		.loc 1 748 0 is_stmt 0 discriminator 2
 1603 04be 0D4B     		ldr	r3, .L150
 1604 04c0 40F2ED22 		movw	r2, #749
 1605 04c4 1149     		ldr	r1, .L150+24
 1606 04c6 0D48     		ldr	r0, .L150+8
 1607 04c8 FFF7FEFF 		bl	printf
 1608              	.LVL208:
 1609 04cc B2E7     		b	.L108
 1610              	.LVL209:
 1611              	.L142:
 769:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unsent != NULL);
 1612              		.loc 1 769 0 is_stmt 1 discriminator 2
 1613 04ce 094B     		ldr	r3, .L150
 1614 04d0 40F20232 		movw	r2, #770
 1615 04d4 0D49     		ldr	r1, .L150+24
 1616 04d6 0948     		ldr	r0, .L150+8
 1617 04d8 FFF7FEFF 		bl	printf
 1618              	.LVL210:
 773:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 1619              		.loc 1 773 0 discriminator 2
 1620 04dc 4FF0FF33 		mov	r3, #-1
 1621 04e0 0A93     		str	r3, [sp, #40]
 1622 04e2 50E7     		b	.L70
 1623              	.L119:
 773:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 1624              		.loc 1 773 0 is_stmt 0
 1625 04e4 4FF0FF33 		mov	r3, #-1
 1626 04e8 0A93     		str	r3, [sp, #40]
 1627 04ea 4CE7     		b	.L70
 1628              	.L120:
 1629 04ec 4FF0FF33 		mov	r3, #-1
 1630 04f0 0A93     		str	r3, [sp, #40]
 1631 04f2 48E7     		b	.L70
 1632              	.L151:
 1633              		.align	2
 1634              	.L150:
 1635 04f4 00000000 		.word	.LC0
 1636 04f8 28010000 		.word	.LC14
 1637 04fc 6C000000 		.word	.LC2
 1638 0500 38010000 		.word	.LC15
 1639 0504 4C010000 		.word	.LC16
 1640 0508 84010000 		.word	.LC17
 1641 050c BC010000 		.word	.LC18
 1642              		.cfi_endproc
 1643              	.LFE157:
 1645              		.section	.text.tcp_enqueue_flags,"ax",%progbits
 1646              		.align	1
 1647              		.global	tcp_enqueue_flags
 1648              		.syntax unified
 1649              		.thumb
 1650              		.thumb_func
ARM GAS  /tmp/cccXI43k.s 			page 57


 1651              		.fpu fpv5-sp-d16
 1653              	tcp_enqueue_flags:
 1654              	.LFB158:
 786:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
 1655              		.loc 1 786 0 is_stmt 1
 1656              		.cfi_startproc
 1657              		@ args = 0, pretend = 0, frame = 0
 1658              		@ frame_needed = 0, uses_anonymous_args = 0
 1659              	.LVL211:
 1660 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1661              	.LCFI12:
 1662              		.cfi_def_cfa_offset 28
 1663              		.cfi_offset 4, -28
 1664              		.cfi_offset 5, -24
 1665              		.cfi_offset 6, -20
 1666              		.cfi_offset 7, -16
 1667              		.cfi_offset 8, -12
 1668              		.cfi_offset 9, -8
 1669              		.cfi_offset 14, -4
 1670 0004 83B0     		sub	sp, sp, #12
 1671              	.LCFI13:
 1672              		.cfi_def_cfa_offset 40
 1673 0006 0446     		mov	r4, r0
 1674 0008 0D46     		mov	r5, r1
 1675              	.LVL212:
 794:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (flags & (TCP_SYN | TCP_FIN)) != 0);
 1676              		.loc 1 794 0
 1677 000a 11F00308 		ands	r8, r1, #3
 1678 000e 2AD0     		beq	.L172
 1679              	.LVL213:
 1680              	.L153:
 798:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((flags & TCP_FIN) == 0)) {
 1681              		.loc 1 798 0
 1682 0010 B4F86230 		ldrh	r3, [r4, #98]
 1683 0014 082B     		cmp	r3, #8
 1684 0016 02D9     		bls	.L154
 798:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((flags & TCP_FIN) == 0)) {
 1685              		.loc 1 798 0 is_stmt 0 discriminator 1
 1686 0018 15F0010F 		tst	r5, #1
 1687 001c 2BD0     		beq	.L173
 1688              	.L154:
 807:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags = TF_SEG_OPTS_MSS;
 1689              		.loc 1 807 0 is_stmt 1
 1690 001e 15F0020F 		tst	r5, #2
 1691 0022 2FD1     		bne	.L166
 789:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen = 0;
 1692              		.loc 1 789 0
 1693 0024 0026     		movs	r6, #0
 1694              	.L156:
 1695              	.LVL214:
 827:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags |= TF_NAGLEMEMERR;
 1696              		.loc 1 827 0
 1697 0026 B700     		lsls	r7, r6, #2
 1698 0028 0022     		movs	r2, #0
 1699 002a 3946     		mov	r1, r7
 1700 002c 1046     		mov	r0, r2
 1701 002e FFF7FEFF 		bl	pbuf_alloc
ARM GAS  /tmp/cccXI43k.s 			page 58


 1702              	.LVL215:
 1703 0032 8146     		mov	r9, r0
 1704 0034 40B3     		cbz	r0, .L174
 832:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (p->len >= optlen));
 1705              		.loc 1 832 0
 1706 0036 4389     		ldrh	r3, [r0, #10]
 1707 0038 9F42     		cmp	r7, r3
 1708 003a 2CD8     		bhi	.L175
 1709              	.LVL216:
 1710              	.L158:
 836:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags |= TF_NAGLEMEMERR;
 1711              		.loc 1 836 0
 1712 003c 0096     		str	r6, [sp]
 1713 003e A36D     		ldr	r3, [r4, #88]
 1714 0040 2A46     		mov	r2, r5
 1715 0042 4946     		mov	r1, r9
 1716 0044 2046     		mov	r0, r4
 1717 0046 FFF7FEFF 		bl	tcp_create_segment
 1718              	.LVL217:
 1719 004a 0646     		mov	r6, r0
 1720              	.LVL218:
 1721 004c 58B3     		cbz	r0, .L176
 841:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: invalid segment length", seg->len == 0);
 1722              		.loc 1 841 0
 1723 004e C368     		ldr	r3, [r0, #12]
 1724 0050 13F0030F 		tst	r3, #3
 1725 0054 2ED1     		bne	.L177
 1726              	.LVL219:
 1727              	.L160:
 842:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1728              		.loc 1 842 0
 1729 0056 3389     		ldrh	r3, [r6, #8]
 1730 0058 002B     		cmp	r3, #0
 1731 005a 33D1     		bne	.L178
 1732              	.L161:
 851:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = seg;
 1733              		.loc 1 851 0
 1734 005c A26E     		ldr	r2, [r4, #104]
 1735 005e 002A     		cmp	r2, #0
 1736 0060 39D1     		bne	.L162
 852:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 1737              		.loc 1 852 0
 1738 0062 A666     		str	r6, [r4, #104]
 1739 0064 3BE0     		b	.L163
 1740              	.LVL220:
 1741              	.L172:
 794:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (flags & (TCP_SYN | TCP_FIN)) != 0);
 1742              		.loc 1 794 0 discriminator 1
 1743 0066 354B     		ldr	r3, .L181
 1744 0068 40F21B32 		movw	r2, #795
 1745 006c 3449     		ldr	r1, .L181+4
 1746              	.LVL221:
 1747 006e 3548     		ldr	r0, .L181+8
 1748              	.LVL222:
 1749 0070 FFF7FEFF 		bl	printf
 1750              	.LVL223:
 1751 0074 CCE7     		b	.L153
ARM GAS  /tmp/cccXI43k.s 			page 59


 1752              	.L173:
 803:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 1753              		.loc 1 803 0
 1754 0076 A37E     		ldrb	r3, [r4, #26]	@ zero_extendqisi2
 1755 0078 63F07F03 		orn	r3, r3, #127
 1756 007c A376     		strb	r3, [r4, #26]
 804:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1757              		.loc 1 804 0
 1758 007e 4FF0FF30 		mov	r0, #-1
 1759 0082 58E0     		b	.L155
 1760              	.L166:
 808:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
 1761              		.loc 1 808 0
 1762 0084 0126     		movs	r6, #1
 1763 0086 CEE7     		b	.L156
 1764              	.LVL224:
 1765              	.L174:
 828:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
 1766              		.loc 1 828 0
 1767 0088 A37E     		ldrb	r3, [r4, #26]	@ zero_extendqisi2
 1768 008a 63F07F03 		orn	r3, r3, #127
 1769 008e A376     		strb	r3, [r4, #26]
 830:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1770              		.loc 1 830 0
 1771 0090 4FF0FF30 		mov	r0, #-1
 1772              	.LVL225:
 1773 0094 4FE0     		b	.L155
 1774              	.LVL226:
 1775              	.L175:
 832:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (p->len >= optlen));
 1776              		.loc 1 832 0 discriminator 1
 1777 0096 294B     		ldr	r3, .L181
 1778 0098 40F24132 		movw	r2, #833
 1779 009c 2A49     		ldr	r1, .L181+12
 1780 009e 2948     		ldr	r0, .L181+8
 1781              	.LVL227:
 1782 00a0 FFF7FEFF 		bl	printf
 1783              	.LVL228:
 1784 00a4 CAE7     		b	.L158
 1785              	.LVL229:
 1786              	.L176:
 837:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
 1787              		.loc 1 837 0
 1788 00a6 A37E     		ldrb	r3, [r4, #26]	@ zero_extendqisi2
 1789 00a8 63F07F03 		orn	r3, r3, #127
 1790 00ac A376     		strb	r3, [r4, #26]
 839:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1791              		.loc 1 839 0
 1792 00ae 4FF0FF30 		mov	r0, #-1
 1793              	.LVL230:
 1794 00b2 40E0     		b	.L155
 1795              	.LVL231:
 1796              	.L177:
 841:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: invalid segment length", seg->len == 0);
 1797              		.loc 1 841 0 discriminator 1
 1798 00b4 214B     		ldr	r3, .L181
 1799 00b6 40F24932 		movw	r2, #841
ARM GAS  /tmp/cccXI43k.s 			page 60


 1800 00ba 2449     		ldr	r1, .L181+16
 1801 00bc 2148     		ldr	r0, .L181+8
 1802              	.LVL232:
 1803 00be FFF7FEFF 		bl	printf
 1804              	.LVL233:
 1805 00c2 C8E7     		b	.L160
 1806              	.L178:
 842:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1807              		.loc 1 842 0 discriminator 1
 1808 00c4 1D4B     		ldr	r3, .L181
 1809 00c6 40F24A32 		movw	r2, #842
 1810 00ca 2149     		ldr	r1, .L181+20
 1811 00cc 1D48     		ldr	r0, .L181+8
 1812 00ce FFF7FEFF 		bl	printf
 1813              	.LVL234:
 1814 00d2 C3E7     		b	.L161
 1815              	.LVL235:
 1816              	.L167:
 1817              	.LBB24:
 855:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     useg->next = seg;
 1818              		.loc 1 855 0
 1819 00d4 1A46     		mov	r2, r3
 1820              	.LVL236:
 1821              	.L162:
 855:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     useg->next = seg;
 1822              		.loc 1 855 0 is_stmt 0 discriminator 1
 1823 00d6 1368     		ldr	r3, [r2]
 1824 00d8 002B     		cmp	r3, #0
 1825 00da FBD1     		bne	.L167
 856:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1826              		.loc 1 856 0 is_stmt 1
 1827 00dc 1660     		str	r6, [r2]
 1828              	.LVL237:
 1829              	.L163:
 1830              	.LBE24:
 860:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 1831              		.loc 1 860 0
 1832 00de 0023     		movs	r3, #0
 1833 00e0 A4F86430 		strh	r3, [r4, #100]	@ movhi
 864:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->snd_lbb++;
 1834              		.loc 1 864 0
 1835 00e4 B8F1000F 		cmp	r8, #0
 1836 00e8 02D0     		beq	.L164
 865:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* optlen does not influence snd_buf */
 1837              		.loc 1 865 0
 1838 00ea A36D     		ldr	r3, [r4, #88]
 1839 00ec 0133     		adds	r3, r3, #1
 1840 00ee A365     		str	r3, [r4, #88]
 1841              	.L164:
 868:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags |= TF_FIN;
 1842              		.loc 1 868 0
 1843 00f0 15F0010F 		tst	r5, #1
 1844 00f4 03D0     		beq	.L165
 869:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 1845              		.loc 1 869 0
 1846 00f6 A37E     		ldrb	r3, [r4, #26]	@ zero_extendqisi2
 1847 00f8 43F02003 		orr	r3, r3, #32
ARM GAS  /tmp/cccXI43k.s 			page 61


 1848 00fc A376     		strb	r3, [r4, #26]
 1849              	.L165:
 873:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_enqueue_flags: %"S16_F" (after enqueued)\n", pcb->snd_queuelen)
 1850              		.loc 1 873 0
 1851 00fe 7068     		ldr	r0, [r6, #4]
 1852 0100 FFF7FEFF 		bl	pbuf_clen
 1853              	.LVL238:
 1854 0104 B4F86230 		ldrh	r3, [r4, #98]
 1855 0108 1844     		add	r0, r0, r3
 1856 010a 80B2     		uxth	r0, r0
 1857 010c A4F86200 		strh	r0, [r4, #98]	@ movhi
 875:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_enqueue_flags: invalid queue length",
 1858              		.loc 1 875 0
 1859 0110 80B1     		cbz	r0, .L168
 876:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unacked != NULL || pcb->unsent != NULL);
 1860              		.loc 1 876 0
 1861 0112 E36E     		ldr	r3, [r4, #108]
 1862 0114 0BB1     		cbz	r3, .L179
 880:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 1863              		.loc 1 880 0
 1864 0116 0020     		movs	r0, #0
 1865 0118 0DE0     		b	.L155
 1866              	.L179:
 876:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unacked != NULL || pcb->unsent != NULL);
 1867              		.loc 1 876 0 discriminator 1
 1868 011a A36E     		ldr	r3, [r4, #104]
 1869 011c 0BB1     		cbz	r3, .L180
 880:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 1870              		.loc 1 880 0
 1871 011e 0020     		movs	r0, #0
 1872 0120 09E0     		b	.L155
 1873              	.L180:
 876:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->unacked != NULL || pcb->unsent != NULL);
 1874              		.loc 1 876 0 discriminator 2
 1875 0122 064B     		ldr	r3, .L181
 1876 0124 40F26D32 		movw	r2, #877
 1877 0128 0A49     		ldr	r1, .L181+24
 1878 012a 0648     		ldr	r0, .L181+8
 1879 012c FFF7FEFF 		bl	printf
 1880              	.LVL239:
 880:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 1881              		.loc 1 880 0 discriminator 2
 1882 0130 0020     		movs	r0, #0
 1883 0132 00E0     		b	.L155
 1884              	.L168:
 880:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 1885              		.loc 1 880 0 is_stmt 0
 1886 0134 0020     		movs	r0, #0
 1887              	.LVL240:
 1888              	.L155:
 881:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1889              		.loc 1 881 0 is_stmt 1
 1890 0136 03B0     		add	sp, sp, #12
 1891              	.LCFI14:
 1892              		.cfi_def_cfa_offset 28
 1893              		@ sp needed
 1894 0138 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
ARM GAS  /tmp/cccXI43k.s 			page 62


 1895              	.LVL241:
 1896              	.L182:
 1897              		.align	2
 1898              	.L181:
 1899 013c 00000000 		.word	.LC0
 1900 0140 00000000 		.word	.LC19
 1901 0144 6C000000 		.word	.LC2
 1902 0148 58000000 		.word	.LC20
 1903 014c 94000000 		.word	.LC21
 1904 0150 AC000000 		.word	.LC22
 1905 0154 D8000000 		.word	.LC23
 1906              		.cfi_endproc
 1907              	.LFE158:
 1909              		.section	.text.tcp_send_fin,"ax",%progbits
 1910              		.align	1
 1911              		.global	tcp_send_fin
 1912              		.syntax unified
 1913              		.thumb
 1914              		.thumb_func
 1915              		.fpu fpv5-sp-d16
 1917              	tcp_send_fin:
 1918              	.LFB153:
 140:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* first, try to add the fin to the last unsent segment */
 1919              		.loc 1 140 0
 1920              		.cfi_startproc
 1921              		@ args = 0, pretend = 0, frame = 0
 1922              		@ frame_needed = 0, uses_anonymous_args = 0
 1923              	.LVL242:
 1924 0000 70B5     		push	{r4, r5, r6, lr}
 1925              	.LCFI15:
 1926              		.cfi_def_cfa_offset 16
 1927              		.cfi_offset 4, -16
 1928              		.cfi_offset 5, -12
 1929              		.cfi_offset 6, -8
 1930              		.cfi_offset 14, -4
 1931 0002 0546     		mov	r5, r0
 142:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct tcp_seg *last_unsent;
 1932              		.loc 1 142 0
 1933 0004 846E     		ldr	r4, [r0, #104]
 1934 0006 0CB9     		cbnz	r4, .L185
 1935 0008 0AE0     		b	.L184
 1936              	.LVL243:
 1937              	.L187:
 1938              	.LBB25:
 145:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1939              		.loc 1 145 0
 1940 000a 1C46     		mov	r4, r3
 1941              	.LVL244:
 1942              	.L185:
 144:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 1943              		.loc 1 144 0 discriminator 1
 1944 000c 2368     		ldr	r3, [r4]
 1945 000e 002B     		cmp	r3, #0
 1946 0010 FBD1     		bne	.L187
 147:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* no SYN/FIN/RST flag in the header, we can add the FIN flag */
 1947              		.loc 1 147 0
 1948 0012 E368     		ldr	r3, [r4, #12]
ARM GAS  /tmp/cccXI43k.s 			page 63


 1949 0014 9889     		ldrh	r0, [r3, #12]	@ unaligned
 1950              	.LVL245:
 1951 0016 FFF7FEFF 		bl	lwip_htons
 1952              	.LVL246:
 1953 001a 10F0070F 		tst	r0, #7
 1954 001e 04D0     		beq	.L189
 1955              	.LVL247:
 1956              	.L184:
 1957              	.LBE25:
 155:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 1958              		.loc 1 155 0
 1959 0020 0121     		movs	r1, #1
 1960 0022 2846     		mov	r0, r5
 1961 0024 FFF7FEFF 		bl	tcp_enqueue_flags
 1962              	.LVL248:
 1963              	.L186:
 156:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 1964              		.loc 1 156 0
 1965 0028 70BD     		pop	{r4, r5, r6, pc}
 1966              	.LVL249:
 1967              	.L189:
 1968              	.LBB26:
 149:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->flags |= TF_FIN;
 1969              		.loc 1 149 0
 1970 002a E368     		ldr	r3, [r4, #12]
 1971 002c 9E89     		ldrh	r6, [r3, #12]	@ unaligned
 1972 002e 0120     		movs	r0, #1
 1973 0030 FFF7FEFF 		bl	lwip_htons
 1974              	.LVL250:
 1975 0034 E368     		ldr	r3, [r4, #12]
 1976 0036 3043     		orrs	r0, r0, r6
 1977 0038 9881     		strh	r0, [r3, #12]	@ unaligned
 150:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return ERR_OK;
 1978              		.loc 1 150 0
 1979 003a AB7E     		ldrb	r3, [r5, #26]	@ zero_extendqisi2
 1980 003c 43F02003 		orr	r3, r3, #32
 1981 0040 AB76     		strb	r3, [r5, #26]
 151:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 1982              		.loc 1 151 0
 1983 0042 0020     		movs	r0, #0
 1984 0044 F0E7     		b	.L186
 1985              	.LBE26:
 1986              		.cfi_endproc
 1987              	.LFE153:
 1989              		.section	.text.tcp_send_empty_ack,"ax",%progbits
 1990              		.align	1
 1991              		.global	tcp_send_empty_ack
 1992              		.syntax unified
 1993              		.thumb
 1994              		.thumb_func
 1995              		.fpu fpv5-sp-d16
 1997              	tcp_send_empty_ack:
 1998              	.LFB159:
 919:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
 1999              		.loc 1 919 0
 2000              		.cfi_startproc
 2001              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/cccXI43k.s 			page 64


 2002              		@ frame_needed = 0, uses_anonymous_args = 0
 2003              	.LVL251:
 2004 0000 70B5     		push	{r4, r5, r6, lr}
 2005              	.LCFI16:
 2006              		.cfi_def_cfa_offset 16
 2007              		.cfi_offset 4, -16
 2008              		.cfi_offset 5, -12
 2009              		.cfi_offset 6, -8
 2010              		.cfi_offset 14, -4
 2011 0002 84B0     		sub	sp, sp, #16
 2012              	.LCFI17:
 2013              		.cfi_def_cfa_offset 32
 2014 0004 0446     		mov	r4, r0
 2015              	.LVL252:
 934:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 2016              		.loc 1 934 0
 2017 0006 C06C     		ldr	r0, [r0, #76]
 2018              	.LVL253:
 2019 0008 FFF7FEFF 		bl	lwip_htonl
 2020              	.LVL254:
 2021 000c 0346     		mov	r3, r0
 2022 000e 0022     		movs	r2, #0
 2023 0010 1146     		mov	r1, r2
 2024 0012 2046     		mov	r0, r4
 2025 0014 FFF7FEFF 		bl	tcp_output_alloc_header
 2026              	.LVL255:
 935:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* let tcp_fasttmr retry sending this ACK */
 2027              		.loc 1 935 0
 2028 0018 E0B1     		cbz	r0, .L197
 2029 001a 0646     		mov	r6, r0
 956:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (netif == NULL) {
 2030              		.loc 1 956 0
 2031 001c 251D     		adds	r5, r4, #4
 2032 001e 2846     		mov	r0, r5
 2033              	.LVL256:
 2034 0020 FFF7FEFF 		bl	ip4_route
 2035              	.LVL257:
 957:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = ERR_RTE;
 2036              		.loc 1 957 0
 2037 0024 E8B1     		cbz	r0, .L195
 967:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->ttl, pcb->tos, IP_PROTO_TCP, netif);
 2038              		.loc 1 967 0
 2039 0026 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 2040 0028 617A     		ldrb	r1, [r4, #9]	@ zero_extendqisi2
 2041 002a 0290     		str	r0, [sp, #8]
 2042 002c 0622     		movs	r2, #6
 2043 002e 0192     		str	r2, [sp, #4]
 2044 0030 0091     		str	r1, [sp]
 2045 0032 2A46     		mov	r2, r5
 2046 0034 2146     		mov	r1, r4
 2047 0036 3046     		mov	r0, r6
 2048              	.LVL258:
 2049 0038 FFF7FEFF 		bl	ip4_output_if
 2050              	.LVL259:
 2051 003c 0546     		mov	r5, r0
 2052              	.LVL260:
 2053              	.L193:
ARM GAS  /tmp/cccXI43k.s 			page 65


 971:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2054              		.loc 1 971 0
 2055 003e 3046     		mov	r0, r6
 2056 0040 FFF7FEFF 		bl	pbuf_free
 2057              	.LVL261:
 973:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* let tcp_fasttmr retry sending this ACK */
 2058              		.loc 1 973 0
 2059 0044 85B9     		cbnz	r5, .L198
 978:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2060              		.loc 1 978 0
 2061 0046 A37E     		ldrb	r3, [r4, #26]	@ zero_extendqisi2
 2062 0048 23F00303 		bic	r3, r3, #3
 2063 004c A376     		strb	r3, [r4, #26]
 2064              	.LVL262:
 2065              	.L192:
 982:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2066              		.loc 1 982 0
 2067 004e 2846     		mov	r0, r5
 2068 0050 04B0     		add	sp, sp, #16
 2069              	.LCFI18:
 2070              		.cfi_remember_state
 2071              		.cfi_def_cfa_offset 16
 2072              		@ sp needed
 2073 0052 70BD     		pop	{r4, r5, r6, pc}
 2074              	.LVL263:
 2075              	.L197:
 2076              	.LCFI19:
 2077              		.cfi_restore_state
 937:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_output: (ACK) could not allocate pbuf\n"));
 2078              		.loc 1 937 0
 2079 0054 A37E     		ldrb	r3, [r4, #26]	@ zero_extendqisi2
 2080 0056 43F00303 		orr	r3, r3, #3
 2081 005a A376     		strb	r3, [r4, #26]
 939:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2082              		.loc 1 939 0
 2083 005c 6FF00105 		mvn	r5, #1
 2084 0060 F5E7     		b	.L192
 2085              	.LVL264:
 2086              	.L195:
 958:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 2087              		.loc 1 958 0
 2088 0062 6FF00305 		mvn	r5, #3
 2089 0066 EAE7     		b	.L193
 2090              	.LVL265:
 2091              	.L198:
 975:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 2092              		.loc 1 975 0
 2093 0068 A37E     		ldrb	r3, [r4, #26]	@ zero_extendqisi2
 2094 006a 43F00303 		orr	r3, r3, #3
 2095 006e A376     		strb	r3, [r4, #26]
 2096 0070 EDE7     		b	.L192
 2097              		.cfi_endproc
 2098              	.LFE159:
 2100              		.section	.text.tcp_output,"ax",%progbits
 2101              		.align	1
 2102              		.global	tcp_output
 2103              		.syntax unified
ARM GAS  /tmp/cccXI43k.s 			page 66


 2104              		.thumb
 2105              		.thumb_func
 2106              		.fpu fpv5-sp-d16
 2108              	tcp_output:
 2109              	.LFB160:
 994:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg, *useg;
 2110              		.loc 1 994 0
 2111              		.cfi_startproc
 2112              		@ args = 0, pretend = 0, frame = 0
 2113              		@ frame_needed = 0, uses_anonymous_args = 0
 2114              	.LVL266:
 2115 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2116              	.LCFI20:
 2117              		.cfi_def_cfa_offset 32
 2118              		.cfi_offset 4, -32
 2119              		.cfi_offset 5, -28
 2120              		.cfi_offset 6, -24
 2121              		.cfi_offset 7, -20
 2122              		.cfi_offset 8, -16
 2123              		.cfi_offset 9, -12
 2124              		.cfi_offset 10, -8
 2125              		.cfi_offset 14, -4
 2126 0004 0546     		mov	r5, r0
1004:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->state != LISTEN);
 2127              		.loc 1 1004 0
 2128 0006 037D     		ldrb	r3, [r0, #20]	@ zero_extendqisi2
 2129 0008 012B     		cmp	r3, #1
 2130 000a 1ED0     		beq	.L239
 2131              	.LVL267:
 2132              	.L200:
1011:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
 2133              		.loc 1 1011 0
 2134 000c 974B     		ldr	r3, .L248
 2135 000e 1B68     		ldr	r3, [r3]
 2136 0010 AB42     		cmp	r3, r5
 2137 0012 00F02381 		beq	.L232
1015:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2138              		.loc 1 1015 0
 2139 0016 B5F85C30 		ldrh	r3, [r5, #92]
 2140 001a B5F84870 		ldrh	r7, [r5, #72]
 2141 001e BB42     		cmp	r3, r7
 2142 0020 00D2     		bcs	.L203
1015:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2143              		.loc 1 1015 0 is_stmt 0 discriminator 1
 2144 0022 1F46     		mov	r7, r3
 2145              	.L203:
 2146              	.LVL268:
1017:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2147              		.loc 1 1017 0 is_stmt 1 discriminator 4
 2148 0024 AC6E     		ldr	r4, [r5, #104]
 2149              	.LVL269:
1025:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      (seg == NULL ||
 2150              		.loc 1 1025 0 discriminator 4
 2151 0026 AB7E     		ldrb	r3, [r5, #26]	@ zero_extendqisi2
 2152 0028 13F0020F 		tst	r3, #2
 2153 002c 0AD0     		beq	.L204
1025:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      (seg == NULL ||
ARM GAS  /tmp/cccXI43k.s 			page 67


 2154              		.loc 1 1025 0 is_stmt 0 discriminator 1
 2155 002e A4B1     		cbz	r4, .L205
1027:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      return tcp_send_empty_ack(pcb);
 2156              		.loc 1 1027 0 is_stmt 1
 2157 0030 E368     		ldr	r3, [r4, #12]
 2158 0032 5868     		ldr	r0, [r3, #4]	@ unaligned
 2159 0034 FFF7FEFF 		bl	lwip_htonl
 2160              	.LVL270:
 2161 0038 6B6C     		ldr	r3, [r5, #68]
 2162 003a C31A     		subs	r3, r0, r3
 2163 003c 2089     		ldrh	r0, [r4, #8]
 2164 003e 0344     		add	r3, r3, r0
1026:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len > wnd)) {
 2165              		.loc 1 1026 0
 2166 0040 BB42     		cmp	r3, r7
 2167 0042 0AD8     		bhi	.L205
 2168              	.L204:
1032:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (useg != NULL) {
 2169              		.loc 1 1032 0
 2170 0044 EE6E     		ldr	r6, [r5, #108]
 2171              	.LVL271:
1033:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (; useg->next != NULL; useg = useg->next);
 2172              		.loc 1 1033 0
 2173 0046 76B9     		cbnz	r6, .L207
 2174 0048 10E0     		b	.L206
 2175              	.LVL272:
 2176              	.L239:
1004:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->state != LISTEN);
 2177              		.loc 1 1004 0 discriminator 1
 2178 004a 894B     		ldr	r3, .L248+4
 2179 004c 40F2ED32 		movw	r2, #1005
 2180 0050 8849     		ldr	r1, .L248+8
 2181 0052 8948     		ldr	r0, .L248+12
 2182              	.LVL273:
 2183 0054 FFF7FEFF 		bl	printf
 2184              	.LVL274:
 2185 0058 D8E7     		b	.L200
 2186              	.LVL275:
 2187              	.L205:
1028:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2188              		.loc 1 1028 0
 2189 005a 2846     		mov	r0, r5
 2190 005c FFF7FEFF 		bl	tcp_send_empty_ack
 2191              	.LVL276:
 2192 0060 0346     		mov	r3, r0
 2193 0062 52E0     		b	.L201
 2194              	.LVL277:
 2195              	.L233:
1034:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2196              		.loc 1 1034 0
 2197 0064 1E46     		mov	r6, r3
 2198              	.LVL278:
 2199              	.L207:
1034:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2200              		.loc 1 1034 0 is_stmt 0 discriminator 1
 2201 0066 3368     		ldr	r3, [r6]
 2202 0068 002B     		cmp	r3, #0
ARM GAS  /tmp/cccXI43k.s 			page 68


 2203 006a FBD1     		bne	.L233
 2204              	.L206:
1037:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (netif == NULL) {
 2205              		.loc 1 1037 0 is_stmt 1
 2206 006c 281D     		adds	r0, r5, #4
 2207 006e FFF7FEFF 		bl	ip4_route
 2208              	.LVL279:
1038:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_RTE;
 2209              		.loc 1 1038 0
 2210 0072 8046     		mov	r8, r0
 2211 0074 0028     		cmp	r0, #0
 2212 0076 00F0F380 		beq	.L234
1043:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     const ip_addr_t *local_ip = ip_netif_get_local_ip(netif, &pcb->remote_ip);
 2213              		.loc 1 1043 0
 2214 007a 0DB1     		cbz	r5, .L208
1043:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     const ip_addr_t *local_ip = ip_netif_get_local_ip(netif, &pcb->remote_ip);
 2215              		.loc 1 1043 0 is_stmt 0 discriminator 1
 2216 007c 2B68     		ldr	r3, [r5]
 2217 007e 33B9     		cbnz	r3, .L209
 2218              	.L208:
 2219              	.LVL280:
 2220              	.LBB27:
1045:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return ERR_RTE;
 2221              		.loc 1 1045 0 is_stmt 1 discriminator 1
 2222 0080 18F1040F 		cmn	r8, #4
 2223 0084 00F0EF80 		beq	.L235
1048:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2224              		.loc 1 1048 0
 2225 0088 D8F80430 		ldr	r3, [r8, #4]
 2226 008c 2B60     		str	r3, [r5]
 2227              	.LVL281:
 2228              	.L209:
 2229              	.LBE27:
1080:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len > wnd &&
 2230              		.loc 1 1080 0
 2231 008e 002C     		cmp	r4, #0
 2232 0090 76D0     		beq	.L212
1081:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       wnd > 0 && wnd == pcb->snd_wnd && pcb->unacked == NULL) {
 2233              		.loc 1 1081 0 discriminator 1
 2234 0092 E368     		ldr	r3, [r4, #12]
 2235 0094 5868     		ldr	r0, [r3, #4]	@ unaligned
 2236              	.LVL282:
 2237 0096 FFF7FEFF 		bl	lwip_htonl
 2238              	.LVL283:
 2239 009a 6B6C     		ldr	r3, [r5, #68]
 2240 009c C31A     		subs	r3, r0, r3
 2241 009e 2089     		ldrh	r0, [r4, #8]
 2242 00a0 0344     		add	r3, r3, r0
1080:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len > wnd &&
 2243              		.loc 1 1080 0 discriminator 1
 2244 00a2 BB42     		cmp	r3, r7
 2245 00a4 6CD9     		bls	.L212
1081:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       wnd > 0 && wnd == pcb->snd_wnd && pcb->unacked == NULL) {
 2246              		.loc 1 1081 0
 2247 00a6 002F     		cmp	r7, #0
 2248 00a8 6AD0     		beq	.L212
1082:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Start the persist timer */
ARM GAS  /tmp/cccXI43k.s 			page 69


 2249              		.loc 1 1082 0
 2250 00aa B5F85C30 		ldrh	r3, [r5, #92]
 2251 00ae BB42     		cmp	r3, r7
 2252 00b0 66D1     		bne	.L212
1082:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Start the persist timer */
 2253              		.loc 1 1082 0 is_stmt 0 discriminator 1
 2254 00b2 EB6E     		ldr	r3, [r5, #108]
 2255 00b4 002B     		cmp	r3, #0
 2256 00b6 63D1     		bne	.L212
1084:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_cnt = 0;
 2257              		.loc 1 1084 0 is_stmt 1
 2258 00b8 95F89530 		ldrb	r3, [r5, #149]	@ zero_extendqisi2
 2259 00bc E3B9     		cbnz	r3, .L213
1085:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_backoff = 1;
 2260              		.loc 1 1085 0
 2261 00be 85F89430 		strb	r3, [r5, #148]
1086:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 2262              		.loc 1 1086 0
 2263 00c2 0123     		movs	r3, #1
 2264 00c4 85F89530 		strb	r3, [r5, #149]
 2265 00c8 16E0     		b	.L213
 2266              	.L241:
1093:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (TCPH_FLAGS(seg->tcphdr) & TCP_RST) == 0);
 2267              		.loc 1 1093 0 discriminator 1
 2268 00ca 694B     		ldr	r3, .L248+4
 2269 00cc 40F24642 		movw	r2, #1094
 2270 00d0 6A49     		ldr	r1, .L248+16
 2271 00d2 6948     		ldr	r0, .L248+12
 2272 00d4 FFF7FEFF 		bl	printf
 2273              	.LVL284:
 2274 00d8 65E0     		b	.L214
 2275              	.L242:
1102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 2276              		.loc 1 1102 0 discriminator 8
 2277 00da 1189     		ldrh	r1, [r2, #8]
 2278 00dc 6A8E     		ldrh	r2, [r5, #50]
 2279 00de 9142     		cmp	r1, r2
 2280 00e0 6DD2     		bcs	.L215
 2281              	.L216:
1102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 2282              		.loc 1 1102 0 is_stmt 0 discriminator 10
 2283 00e2 B5F86020 		ldrh	r2, [r5, #96]
 2284 00e6 002A     		cmp	r2, #0
 2285 00e8 69D0     		beq	.L215
1102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 2286              		.loc 1 1102 0 discriminator 12
 2287 00ea B5F86220 		ldrh	r2, [r5, #98]
 2288 00ee 082A     		cmp	r2, #8
 2289 00f0 65D8     		bhi	.L215
1102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 2290              		.loc 1 1102 0
 2291 00f2 13F0A00F 		tst	r3, #160
 2292 00f6 62D1     		bne	.L215
 2293              	.L213:
1171:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* last unsent has been removed, reset unsent_oversize */
 2294              		.loc 1 1171 0 is_stmt 1
 2295 00f8 AB6E     		ldr	r3, [r5, #104]
ARM GAS  /tmp/cccXI43k.s 			page 70


 2296 00fa 002B     		cmp	r3, #0
 2297 00fc 00F0AB80 		beq	.L240
 2298              	.L231:
1177:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 2299              		.loc 1 1177 0
 2300 0100 AB7E     		ldrb	r3, [r5, #26]	@ zero_extendqisi2
 2301 0102 03F07F03 		and	r3, r3, #127
 2302 0106 AB76     		strb	r3, [r5, #26]
1178:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2303              		.loc 1 1178 0
 2304 0108 0023     		movs	r3, #0
 2305              	.LVL285:
 2306              	.L201:
1179:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2307              		.loc 1 1179 0
 2308 010a 1846     		mov	r0, r3
 2309 010c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2310              	.LVL286:
 2311              	.L243:
1116:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 2312              		.loc 1 1116 0
 2313 0110 E368     		ldr	r3, [r4, #12]
 2314 0112 B3F80C90 		ldrh	r9, [r3, #12]	@ unaligned
 2315 0116 1020     		movs	r0, #16
 2316 0118 FFF7FEFF 		bl	lwip_htons
 2317              	.LVL287:
 2318 011c E368     		ldr	r3, [r4, #12]
 2319 011e 49EA0000 		orr	r0, r9, r0
 2320 0122 9881     		strh	r0, [r3, #12]	@ unaligned
 2321 0124 4EE0     		b	.L217
 2322              	.LVL288:
 2323              	.L244:
1125:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return err;
 2324              		.loc 1 1125 0
 2325 0126 AA7E     		ldrb	r2, [r5, #26]	@ zero_extendqisi2
 2326 0128 62F07F02 		orn	r2, r2, #127
 2327 012c AA76     		strb	r2, [r5, #26]
1126:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 2328              		.loc 1 1126 0
 2329 012e ECE7     		b	.L201
 2330              	.LVL289:
 2331              	.L236:
1132:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (TCP_SEQ_LT(pcb->snd_nxt, snd_nxt)) {
 2332              		.loc 1 1132 0
 2333 0130 0020     		movs	r0, #0
 2334 0132 67E0     		b	.L220
 2335              	.LVL290:
 2336              	.L245:
1134:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 2337              		.loc 1 1134 0
 2338 0134 E864     		str	r0, [r5, #76]
 2339 0136 6BE0     		b	.L221
 2340              	.LVL291:
 2341              	.L237:
1137:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->next = NULL;
 2342              		.loc 1 1137 0
 2343 0138 0023     		movs	r3, #0
ARM GAS  /tmp/cccXI43k.s 			page 71


 2344 013a 73E0     		b	.L222
 2345              	.L246:
1141:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         useg = seg;
 2346              		.loc 1 1141 0
 2347 013c EC66     		str	r4, [r5, #108]
 2348              	.LVL292:
1142:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* unacked list is not empty? */
 2349              		.loc 1 1142 0
 2350 013e 2646     		mov	r6, r4
 2351 0140 1DE0     		b	.L225
 2352              	.LVL293:
 2353              	.L247:
 2354              	.LBB28:
1150:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           while (*cur_seg &&
 2355              		.loc 1 1150 0
 2356 0142 05F16C0A 		add	r10, r5, #108
 2357              	.LVL294:
 2358              	.L227:
1151:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno))) {
 2359              		.loc 1 1151 0
 2360 0146 DAF80030 		ldr	r3, [r10]
 2361 014a 7BB1     		cbz	r3, .L228
1152:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               cur_seg = &((*cur_seg)->next );
 2362              		.loc 1 1152 0 discriminator 1
 2363 014c DB68     		ldr	r3, [r3, #12]
 2364 014e 5868     		ldr	r0, [r3, #4]	@ unaligned
 2365 0150 FFF7FEFF 		bl	lwip_htonl
 2366              	.LVL295:
 2367 0154 8146     		mov	r9, r0
 2368 0156 E368     		ldr	r3, [r4, #12]
 2369 0158 5868     		ldr	r0, [r3, #4]	@ unaligned
 2370 015a FFF7FEFF 		bl	lwip_htonl
 2371              	.LVL296:
 2372 015e A9EB0000 		sub	r0, r9, r0
1151:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno))) {
 2373              		.loc 1 1151 0 discriminator 1
 2374 0162 0028     		cmp	r0, #0
 2375 0164 02DA     		bge	.L228
1153:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           }
 2376              		.loc 1 1153 0
 2377 0166 DAF800A0 		ldr	r10, [r10]
 2378              	.LVL297:
 2379 016a ECE7     		b	.L227
 2380              	.L228:
1155:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           (*cur_seg) = seg;
 2381              		.loc 1 1155 0
 2382 016c DAF80030 		ldr	r3, [r10]
 2383 0170 2360     		str	r3, [r4]
1156:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         } else {
 2384              		.loc 1 1156 0
 2385 0172 CAF80040 		str	r4, [r10]
 2386              	.LBE28:
 2387 0176 02E0     		b	.L225
 2388              	.LVL298:
 2389              	.L223:
1165:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 2390              		.loc 1 1165 0
ARM GAS  /tmp/cccXI43k.s 			page 72


 2391 0178 2046     		mov	r0, r4
 2392 017a FFF7FEFF 		bl	tcp_seg_free
 2393              	.LVL299:
 2394              	.L225:
1167:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2395              		.loc 1 1167 0
 2396 017e AC6E     		ldr	r4, [r5, #104]
 2397              	.LVL300:
 2398              	.L212:
1091:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len <= wnd) {
 2399              		.loc 1 1091 0
 2400 0180 002C     		cmp	r4, #0
 2401 0182 B9D0     		beq	.L213
1092:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("RST not expected here!",
 2402              		.loc 1 1092 0 discriminator 1
 2403 0184 E368     		ldr	r3, [r4, #12]
 2404 0186 5868     		ldr	r0, [r3, #4]	@ unaligned
 2405 0188 FFF7FEFF 		bl	lwip_htonl
 2406              	.LVL301:
 2407 018c 6B6C     		ldr	r3, [r5, #68]
 2408 018e C01A     		subs	r0, r0, r3
 2409 0190 2389     		ldrh	r3, [r4, #8]
 2410 0192 1844     		add	r0, r0, r3
1091:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len <= wnd) {
 2411              		.loc 1 1091 0 discriminator 1
 2412 0194 B842     		cmp	r0, r7
 2413 0196 AFD8     		bhi	.L213
1093:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (TCPH_FLAGS(seg->tcphdr) & TCP_RST) == 0);
 2414              		.loc 1 1093 0
 2415 0198 E368     		ldr	r3, [r4, #12]
 2416 019a 9889     		ldrh	r0, [r3, #12]	@ unaligned
 2417 019c FFF7FEFF 		bl	lwip_htons
 2418              	.LVL302:
 2419 01a0 10F0040F 		tst	r0, #4
 2420 01a4 91D1     		bne	.L241
 2421              	.L214:
1102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 2422              		.loc 1 1102 0
 2423 01a6 EB6E     		ldr	r3, [r5, #108]
 2424 01a8 4BB1     		cbz	r3, .L215
1102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 2425              		.loc 1 1102 0 is_stmt 0 discriminator 2
 2426 01aa AB7E     		ldrb	r3, [r5, #26]	@ zero_extendqisi2
 2427 01ac 13F0440F 		tst	r3, #68
 2428 01b0 05D1     		bne	.L215
1102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 2429              		.loc 1 1102 0 discriminator 4
 2430 01b2 AA6E     		ldr	r2, [r5, #104]
 2431 01b4 002A     		cmp	r2, #0
 2432 01b6 94D0     		beq	.L216
1102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 2433              		.loc 1 1102 0 discriminator 5
 2434 01b8 1168     		ldr	r1, [r2]
 2435 01ba 0029     		cmp	r1, #0
 2436 01bc 8DD0     		beq	.L242
 2437              	.L215:
1115:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCPH_SET_FLAG(seg->tcphdr, TCP_ACK);
ARM GAS  /tmp/cccXI43k.s 			page 73


 2438              		.loc 1 1115 0 is_stmt 1
 2439 01be 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 2440 01c0 022B     		cmp	r3, #2
 2441 01c2 A5D1     		bne	.L243
 2442              	.L217:
1122:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (err != ERR_OK) {
 2443              		.loc 1 1122 0
 2444 01c4 4246     		mov	r2, r8
 2445 01c6 2946     		mov	r1, r5
 2446 01c8 2046     		mov	r0, r4
 2447 01ca FFF7FEFF 		bl	tcp_output_segment
 2448              	.LVL303:
1123:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* segment could not be sent, for whatever reason */
 2449              		.loc 1 1123 0
 2450 01ce 0346     		mov	r3, r0
 2451 01d0 0028     		cmp	r0, #0
 2452 01d2 A8D1     		bne	.L244
1128:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->state != SYN_SENT) {
 2453              		.loc 1 1128 0
 2454 01d4 2368     		ldr	r3, [r4]
 2455 01d6 AB66     		str	r3, [r5, #104]
1129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->flags &= ~(TF_ACK_DELAY | TF_ACK_NOW);
 2456              		.loc 1 1129 0
 2457 01d8 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 2458 01da 022B     		cmp	r3, #2
 2459 01dc 03D0     		beq	.L219
1130:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 2460              		.loc 1 1130 0
 2461 01de AB7E     		ldrb	r3, [r5, #26]	@ zero_extendqisi2
 2462 01e0 23F00303 		bic	r3, r3, #3
 2463 01e4 AB76     		strb	r3, [r5, #26]
 2464              	.L219:
1132:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (TCP_SEQ_LT(pcb->snd_nxt, snd_nxt)) {
 2465              		.loc 1 1132 0
 2466 01e6 E368     		ldr	r3, [r4, #12]
 2467 01e8 5868     		ldr	r0, [r3, #4]	@ unaligned
 2468              	.LVL304:
 2469 01ea FFF7FEFF 		bl	lwip_htonl
 2470              	.LVL305:
 2471 01ee 8146     		mov	r9, r0
 2472 01f0 B4F808A0 		ldrh	r10, [r4, #8]
 2473 01f4 E368     		ldr	r3, [r4, #12]
 2474 01f6 9889     		ldrh	r0, [r3, #12]	@ unaligned
 2475 01f8 FFF7FEFF 		bl	lwip_htons
 2476              	.LVL306:
 2477 01fc 10F0030F 		tst	r0, #3
 2478 0200 96D0     		beq	.L236
 2479 0202 0120     		movs	r0, #1
 2480              	.L220:
1132:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (TCP_SEQ_LT(pcb->snd_nxt, snd_nxt)) {
 2481              		.loc 1 1132 0 is_stmt 0 discriminator 4
 2482 0204 5044     		add	r0, r0, r10
 2483 0206 4844     		add	r0, r0, r9
 2484              	.LVL307:
1133:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->snd_nxt = snd_nxt;
 2485              		.loc 1 1133 0 is_stmt 1 discriminator 4
 2486 0208 EB6C     		ldr	r3, [r5, #76]
ARM GAS  /tmp/cccXI43k.s 			page 74


 2487 020a 1B1A     		subs	r3, r3, r0
 2488 020c 002B     		cmp	r3, #0
 2489 020e 91DB     		blt	.L245
 2490              	.L221:
1137:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->next = NULL;
 2491              		.loc 1 1137 0
 2492 0210 B4F80890 		ldrh	r9, [r4, #8]
 2493 0214 E368     		ldr	r3, [r4, #12]
 2494 0216 9889     		ldrh	r0, [r3, #12]	@ unaligned
 2495              	.LVL308:
 2496 0218 FFF7FEFF 		bl	lwip_htons
 2497              	.LVL309:
 2498 021c 10F0030F 		tst	r0, #3
 2499 0220 8AD0     		beq	.L237
 2500 0222 0123     		movs	r3, #1
 2501              	.L222:
1137:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->next = NULL;
 2502              		.loc 1 1137 0 is_stmt 0 discriminator 4
 2503 0224 19EB030F 		cmn	r9, r3
 2504 0228 A6D0     		beq	.L223
1138:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* unacked list is empty? */
 2505              		.loc 1 1138 0 is_stmt 1
 2506 022a 0023     		movs	r3, #0
 2507 022c 2360     		str	r3, [r4]
1140:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         pcb->unacked = seg;
 2508              		.loc 1 1140 0
 2509 022e EB6E     		ldr	r3, [r5, #108]
 2510 0230 002B     		cmp	r3, #0
 2511 0232 83D0     		beq	.L246
1148:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           /* add segment to before tail of unacked list, keeping the list sorted */
 2512              		.loc 1 1148 0
 2513 0234 E368     		ldr	r3, [r4, #12]
 2514 0236 5868     		ldr	r0, [r3, #4]	@ unaligned
 2515 0238 FFF7FEFF 		bl	lwip_htonl
 2516              	.LVL310:
 2517 023c 8146     		mov	r9, r0
 2518 023e F368     		ldr	r3, [r6, #12]
 2519 0240 5868     		ldr	r0, [r3, #4]	@ unaligned
 2520 0242 FFF7FEFF 		bl	lwip_htonl
 2521              	.LVL311:
 2522 0246 A9EB0000 		sub	r0, r9, r0
 2523 024a 0028     		cmp	r0, #0
 2524 024c FFF679AF 		blt	.L247
1159:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           useg = useg->next;
 2525              		.loc 1 1159 0
 2526 0250 3460     		str	r4, [r6]
 2527              	.LVL312:
1160:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
 2528              		.loc 1 1160 0
 2529 0252 2646     		mov	r6, r4
 2530              	.LVL313:
 2531 0254 93E7     		b	.L225
 2532              	.L240:
1173:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2533              		.loc 1 1173 0
 2534 0256 A5F86430 		strh	r3, [r5, #100]	@ movhi
 2535 025a 51E7     		b	.L231
ARM GAS  /tmp/cccXI43k.s 			page 75


 2536              	.LVL314:
 2537              	.L232:
1012:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2538              		.loc 1 1012 0
 2539 025c 0023     		movs	r3, #0
 2540 025e 54E7     		b	.L201
 2541              	.LVL315:
 2542              	.L234:
1039:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2543              		.loc 1 1039 0
 2544 0260 6FF00303 		mvn	r3, #3
 2545 0264 51E7     		b	.L201
 2546              	.LVL316:
 2547              	.L235:
 2548              	.LBB29:
1046:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 2549              		.loc 1 1046 0
 2550 0266 6FF00303 		mvn	r3, #3
 2551 026a 4EE7     		b	.L201
 2552              	.L249:
 2553              		.align	2
 2554              	.L248:
 2555 026c 00000000 		.word	tcp_input_pcb
 2556 0270 00000000 		.word	.LC0
 2557 0274 00000000 		.word	.LC24
 2558 0278 6C000000 		.word	.LC2
 2559 027c 28000000 		.word	.LC25
 2560              	.LBE29:
 2561              		.cfi_endproc
 2562              	.LFE160:
 2564              		.section	.text.tcp_rst,"ax",%progbits
 2565              		.align	1
 2566              		.global	tcp_rst
 2567              		.syntax unified
 2568              		.thumb
 2569              		.thumb_func
 2570              		.fpu fpv5-sp-d16
 2572              	tcp_rst:
 2573              	.LFB162:
1322:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1323:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1324:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Send a TCP RESET packet (empty segment with RST flag set) either to
1325:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * abort a connection or to show that there is no matching local connection
1326:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * for a received segment.
1327:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1328:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_abort() (to abort a local connection), tcp_input() (if no
1329:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * matching local pcb was found), tcp_listen_input() (if incoming segment
1330:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * has ACK flag set) and tcp_process() (received segment in the wrong state)
1331:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1332:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Since a RST segment is in most cases not sent for an active connection,
1333:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * tcp_rst() has a number of arguments that are taken from a tcp_pcb for
1334:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * most other segment output functions.
1335:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1336:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param seqno the sequence number to use for the outgoing segment
1337:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param ackno the acknowledge number to use for the outgoing segment
1338:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param local_ip the local IP address to send the segment from
1339:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param remote_ip the remote IP address to send the segment to
ARM GAS  /tmp/cccXI43k.s 			page 76


1340:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param local_port the local TCP port to send the segment from
1341:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param remote_port the remote TCP port to send the segment to
1342:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** void
1344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rst(u32_t seqno, u32_t ackno,
1345:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   const ip_addr_t *local_ip, const ip_addr_t *remote_ip,
1346:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t local_port, u16_t remote_port)
1347:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 2574              		.loc 1 1347 0
 2575              		.cfi_startproc
 2576              		@ args = 8, pretend = 0, frame = 0
 2577              		@ frame_needed = 0, uses_anonymous_args = 0
 2578              	.LVL317:
 2579 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 2580              	.LCFI21:
 2581              		.cfi_def_cfa_offset 28
 2582              		.cfi_offset 4, -28
 2583              		.cfi_offset 5, -24
 2584              		.cfi_offset 6, -20
 2585              		.cfi_offset 7, -16
 2586              		.cfi_offset 8, -12
 2587              		.cfi_offset 9, -8
 2588              		.cfi_offset 14, -4
 2589 0004 85B0     		sub	sp, sp, #20
 2590              	.LCFI22:
 2591              		.cfi_def_cfa_offset 48
 2592 0006 8046     		mov	r8, r0
 2593 0008 0F46     		mov	r7, r1
 2594 000a 9146     		mov	r9, r2
 2595 000c 1E46     		mov	r6, r3
1348:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
1349:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_hdr *tcphdr;
1350:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct netif *netif;
1351:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = pbuf_alloc(PBUF_IP, TCP_HLEN, PBUF_RAM);
 2596              		.loc 1 1351 0
 2597 000e 0022     		movs	r2, #0
 2598              	.LVL318:
 2599 0010 1421     		movs	r1, #20
 2600              	.LVL319:
 2601 0012 0120     		movs	r0, #1
 2602              	.LVL320:
 2603 0014 FFF7FEFF 		bl	pbuf_alloc
 2604              	.LVL321:
1352:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 2605              		.loc 1 1352 0
 2606 0018 B0B3     		cbz	r0, .L250
 2607 001a 0546     		mov	r5, r0
1353:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_DEBUG, ("tcp_rst: could not allocate memory for pbuf\n"));
1354:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return;
1355:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1356:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("check that first pbuf can hold struct tcp_hdr",
 2608              		.loc 1 1356 0
 2609 001c 4389     		ldrh	r3, [r0, #10]
 2610 001e 132B     		cmp	r3, #19
 2611 0020 35D9     		bls	.L255
 2612              	.LVL322:
 2613              	.L252:
ARM GAS  /tmp/cccXI43k.s 			page 77


1357:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (p->len >= sizeof(struct tcp_hdr)));
1358:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1359:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr = (struct tcp_hdr *)p->payload;
 2614              		.loc 1 1359 0
 2615 0022 6C68     		ldr	r4, [r5, #4]
 2616              	.LVL323:
1360:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr->src = lwip_htons(local_port);
 2617              		.loc 1 1360 0
 2618 0024 BDF83000 		ldrh	r0, [sp, #48]
 2619 0028 FFF7FEFF 		bl	lwip_htons
 2620              	.LVL324:
 2621 002c 2080     		strh	r0, [r4]	@ unaligned
1361:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr->dest = lwip_htons(remote_port);
 2622              		.loc 1 1361 0
 2623 002e BDF83400 		ldrh	r0, [sp, #52]
 2624 0032 FFF7FEFF 		bl	lwip_htons
 2625              	.LVL325:
 2626 0036 6080     		strh	r0, [r4, #2]	@ unaligned
1362:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr->seqno = lwip_htonl(seqno);
 2627              		.loc 1 1362 0
 2628 0038 4046     		mov	r0, r8
 2629 003a FFF7FEFF 		bl	lwip_htonl
 2630              	.LVL326:
 2631 003e 6060     		str	r0, [r4, #4]	@ unaligned
1363:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr->ackno = lwip_htonl(ackno);
 2632              		.loc 1 1363 0
 2633 0040 3846     		mov	r0, r7
 2634 0042 FFF7FEFF 		bl	lwip_htonl
 2635              	.LVL327:
 2636 0046 A060     		str	r0, [r4, #8]	@ unaligned
1364:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCPH_HDRLEN_FLAGS_SET(tcphdr, TCP_HLEN/4, TCP_RST | TCP_ACK);
 2637              		.loc 1 1364 0
 2638 0048 45F21400 		movw	r0, #20500
 2639 004c FFF7FEFF 		bl	lwip_htons
 2640              	.LVL328:
 2641 0050 A081     		strh	r0, [r4, #12]	@ unaligned
1365:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1366:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr->wnd = PP_HTONS(((TCP_WND >> TCP_RCV_SCALE) & 0xFFFF));
1367:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else
1368:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr->wnd = PP_HTONS(TCP_WND);
 2642              		.loc 1 1368 0
 2643 0052 0023     		movs	r3, #0
 2644 0054 0822     		movs	r2, #8
 2645 0056 A273     		strb	r2, [r4, #14]
 2646 0058 6022     		movs	r2, #96
 2647 005a E273     		strb	r2, [r4, #15]
1369:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1370:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr->chksum = 0;
 2648              		.loc 1 1370 0
 2649 005c 2374     		strb	r3, [r4, #16]
 2650 005e 6374     		strb	r3, [r4, #17]
1371:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr->urgp = 0;
 2651              		.loc 1 1371 0
 2652 0060 A374     		strb	r3, [r4, #18]
 2653 0062 E374     		strb	r3, [r4, #19]
1372:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1373:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCP_STATS_INC(tcp.xmit);
ARM GAS  /tmp/cccXI43k.s 			page 78


1374:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   MIB2_STATS_INC(mib2.tcpoutrsts);
1375:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1376:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   netif = ip_route(local_ip, remote_ip);
 2654              		.loc 1 1376 0
 2655 0064 3046     		mov	r0, r6
 2656 0066 FFF7FEFF 		bl	ip4_route
 2657              	.LVL329:
1377:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (netif != NULL) {
 2658              		.loc 1 1377 0
 2659 006a 50B1     		cbz	r0, .L253
1378:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if CHECKSUM_GEN_TCP
1379:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     IF__NETIF_CHECKSUM_ENABLED(netif, NETIF_CHECKSUM_GEN_TCP) {
1380:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcphdr->chksum = ip_chksum_pseudo(p, IP_PROTO_TCP, p->tot_len,
1381:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                         local_ip, remote_ip);
1382:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1383:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1384:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Send output with hardcoded TTL/HL since we have no access to the pcb */
1385:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ip_output_if(p, local_ip, remote_ip, TCP_TTL, 0, IP_PROTO_TCP, netif);
 2660              		.loc 1 1385 0
 2661 006c 0290     		str	r0, [sp, #8]
 2662 006e 0623     		movs	r3, #6
 2663 0070 0193     		str	r3, [sp, #4]
 2664 0072 0023     		movs	r3, #0
 2665 0074 0093     		str	r3, [sp]
 2666 0076 FF23     		movs	r3, #255
 2667 0078 3246     		mov	r2, r6
 2668 007a 4946     		mov	r1, r9
 2669 007c 2846     		mov	r0, r5
 2670              	.LVL330:
 2671 007e FFF7FEFF 		bl	ip4_output_if
 2672              	.LVL331:
 2673              	.L253:
1386:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1387:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pbuf_free(p);
 2674              		.loc 1 1387 0
 2675 0082 2846     		mov	r0, r5
 2676 0084 FFF7FEFF 		bl	pbuf_free
 2677              	.LVL332:
 2678              	.L250:
1388:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_RST_DEBUG, ("tcp_rst: seqno %"U32_F" ackno %"U32_F".\n", seqno, ackno));
1389:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2679              		.loc 1 1389 0
 2680 0088 05B0     		add	sp, sp, #20
 2681              	.LCFI23:
 2682              		.cfi_remember_state
 2683              		.cfi_def_cfa_offset 28
 2684              		@ sp needed
 2685 008a BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 2686              	.LVL333:
 2687              	.L255:
 2688              	.LCFI24:
 2689              		.cfi_restore_state
1356:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (p->len >= sizeof(struct tcp_hdr)));
 2690              		.loc 1 1356 0 discriminator 1
 2691 008e 044B     		ldr	r3, .L256
 2692 0090 40F24D52 		movw	r2, #1357
 2693 0094 0349     		ldr	r1, .L256+4
ARM GAS  /tmp/cccXI43k.s 			page 79


 2694 0096 0448     		ldr	r0, .L256+8
 2695              	.LVL334:
 2696 0098 FFF7FEFF 		bl	printf
 2697              	.LVL335:
 2698 009c C1E7     		b	.L252
 2699              	.L257:
 2700 009e 00BF     		.align	2
 2701              	.L256:
 2702 00a0 00000000 		.word	.LC0
 2703 00a4 00000000 		.word	.LC6
 2704 00a8 6C000000 		.word	.LC2
 2705              		.cfi_endproc
 2706              	.LFE162:
 2708              		.section	.text.tcp_rexmit_rto,"ax",%progbits
 2709              		.align	1
 2710              		.global	tcp_rexmit_rto
 2711              		.syntax unified
 2712              		.thumb
 2713              		.thumb_func
 2714              		.fpu fpv5-sp-d16
 2716              	tcp_rexmit_rto:
 2717              	.LFB163:
1390:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1391:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Requeue all unacked segments for retransmission
1393:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1394:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_slowtmr() for slow retransmission.
1395:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1396:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to re-enqueue all unacked segments
1397:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1398:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** void
1399:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit_rto(struct tcp_pcb *pcb)
1400:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 2718              		.loc 1 1400 0
 2719              		.cfi_startproc
 2720              		@ args = 0, pretend = 0, frame = 0
 2721              		@ frame_needed = 0, uses_anonymous_args = 0
 2722              	.LVL336:
1401:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
1402:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1403:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unacked == NULL) {
 2723              		.loc 1 1403 0
 2724 0000 C26E     		ldr	r2, [r0, #108]
 2725 0002 0AB1     		cbz	r2, .L266
1400:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
 2726              		.loc 1 1400 0
 2727 0004 08B5     		push	{r3, lr}
 2728              	.LCFI25:
 2729              		.cfi_def_cfa_offset 8
 2730              		.cfi_offset 3, -8
 2731              		.cfi_offset 14, -4
 2732 0006 01E0     		b	.L260
 2733              	.L266:
 2734              	.LCFI26:
 2735              		.cfi_def_cfa_offset 0
 2736              		.cfi_restore 3
 2737              		.cfi_restore 14
ARM GAS  /tmp/cccXI43k.s 			page 80


 2738 0008 7047     		bx	lr
 2739              	.LVL337:
 2740              	.L262:
 2741              	.LCFI27:
 2742              		.cfi_def_cfa_offset 8
 2743              		.cfi_offset 3, -8
 2744              		.cfi_offset 14, -4
1404:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return;
1405:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1406:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1407:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Move all unacked segments to the head of the unsent queue */
1408:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   for (seg = pcb->unacked; seg->next != NULL; seg = seg->next);
 2745              		.loc 1 1408 0
 2746 000a 1A46     		mov	r2, r3
 2747              	.LVL338:
 2748              	.L260:
 2749              		.loc 1 1408 0 is_stmt 0 discriminator 1
 2750 000c 1368     		ldr	r3, [r2]
 2751 000e 002B     		cmp	r3, #0
 2752 0010 FBD1     		bne	.L262
1409:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* concatenate unsent queue after unacked queue */
1410:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = pcb->unsent;
 2753              		.loc 1 1410 0 is_stmt 1
 2754 0012 836E     		ldr	r3, [r0, #104]
 2755 0014 1360     		str	r3, [r2]
1411:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
1412:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* if last unsent changed, we need to update unsent_oversize */
1413:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent == NULL) {
1414:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent_oversize = seg->oversize_left;
1415:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1416:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
1417:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* unsent queue is the concatenated queue (of unacked, unsent) */
1418:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unsent = pcb->unacked;
 2756              		.loc 1 1418 0
 2757 0016 C36E     		ldr	r3, [r0, #108]
 2758 0018 8366     		str	r3, [r0, #104]
1419:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* unacked queue is now empty */
1420:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unacked = NULL;
 2759              		.loc 1 1420 0
 2760 001a 0023     		movs	r3, #0
 2761 001c C366     		str	r3, [r0, #108]
1421:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1422:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* increment number of retransmissions */
1423:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->nrtx < 0xFF) {
 2762              		.loc 1 1423 0
 2763 001e 90F84230 		ldrb	r3, [r0, #66]	@ zero_extendqisi2
 2764 0022 FF2B     		cmp	r3, #255
 2765 0024 02D0     		beq	.L261
1424:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++pcb->nrtx;
 2766              		.loc 1 1424 0
 2767 0026 0133     		adds	r3, r3, #1
 2768 0028 80F84230 		strb	r3, [r0, #66]
 2769              	.L261:
1425:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1426:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1427:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Don't take any RTT measurements after retransmitting. */
1428:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->rttest = 0;
ARM GAS  /tmp/cccXI43k.s 			page 81


 2770              		.loc 1 1428 0
 2771 002c 0023     		movs	r3, #0
 2772 002e 4363     		str	r3, [r0, #52]
1429:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1430:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Do the actual retransmission */
1431:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output(pcb);
 2773              		.loc 1 1431 0
 2774 0030 FFF7FEFF 		bl	tcp_output
 2775              	.LVL339:
1432:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2776              		.loc 1 1432 0
 2777 0034 08BD     		pop	{r3, pc}
 2778              		.cfi_endproc
 2779              	.LFE163:
 2781              		.section	.text.tcp_rexmit,"ax",%progbits
 2782              		.align	1
 2783              		.global	tcp_rexmit
 2784              		.syntax unified
 2785              		.thumb
 2786              		.thumb_func
 2787              		.fpu fpv5-sp-d16
 2789              	tcp_rexmit:
 2790              	.LFB164:
1433:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1434:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1435:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Requeue the first unacked segment for retransmission
1436:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1437:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_receive() for fast retransmit.
1438:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1439:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to retransmit the first unacked segment
1440:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1441:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** void
1442:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit(struct tcp_pcb *pcb)
1443:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 2791              		.loc 1 1443 0
 2792              		.cfi_startproc
 2793              		@ args = 0, pretend = 0, frame = 0
 2794              		@ frame_needed = 0, uses_anonymous_args = 0
 2795              	.LVL340:
 2796 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2797              	.LCFI28:
 2798              		.cfi_def_cfa_offset 24
 2799              		.cfi_offset 3, -24
 2800              		.cfi_offset 4, -20
 2801              		.cfi_offset 5, -16
 2802              		.cfi_offset 6, -12
 2803              		.cfi_offset 7, -8
 2804              		.cfi_offset 14, -4
1444:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
1445:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg **cur_seg;
1446:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1447:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unacked == NULL) {
 2805              		.loc 1 1447 0
 2806 0002 C66E     		ldr	r6, [r0, #108]
 2807 0004 16B3     		cbz	r6, .L267
 2808 0006 0746     		mov	r7, r0
 2809              	.LVL341:
ARM GAS  /tmp/cccXI43k.s 			page 82


1448:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return;
1449:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1450:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1451:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Move the first unacked segment to the unsent queue */
1452:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Keep the unsent queue sorted. */
1453:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg = pcb->unacked;
1454:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unacked = seg->next;
 2810              		.loc 1 1454 0
 2811 0008 3368     		ldr	r3, [r6]
 2812 000a C366     		str	r3, [r0, #108]
1455:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1456:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   cur_seg = &(pcb->unsent);
 2813              		.loc 1 1456 0
 2814 000c 00F16805 		add	r5, r0, #104
 2815              	.LVL342:
1457:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (*cur_seg &&
 2816              		.loc 1 1457 0
 2817 0010 00E0     		b	.L269
 2818              	.LVL343:
 2819              	.L271:
1458:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno))) {
1459:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       cur_seg = &((*cur_seg)->next );
 2820              		.loc 1 1459 0
 2821 0012 2D68     		ldr	r5, [r5]
 2822              	.LVL344:
 2823              	.L269:
1457:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (*cur_seg &&
 2824              		.loc 1 1457 0
 2825 0014 2B68     		ldr	r3, [r5]
 2826 0016 5BB1     		cbz	r3, .L270
1458:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno))) {
 2827              		.loc 1 1458 0 discriminator 1
 2828 0018 DB68     		ldr	r3, [r3, #12]
 2829 001a 5868     		ldr	r0, [r3, #4]	@ unaligned
 2830 001c FFF7FEFF 		bl	lwip_htonl
 2831              	.LVL345:
 2832 0020 0446     		mov	r4, r0
 2833 0022 F368     		ldr	r3, [r6, #12]
 2834 0024 5868     		ldr	r0, [r3, #4]	@ unaligned
 2835 0026 FFF7FEFF 		bl	lwip_htonl
 2836              	.LVL346:
 2837 002a 201A     		subs	r0, r4, r0
1457:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (*cur_seg &&
 2838              		.loc 1 1457 0 discriminator 1
 2839 002c 0028     		cmp	r0, #0
 2840 002e F0DB     		blt	.L271
 2841              	.L270:
1460:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1461:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = *cur_seg;
 2842              		.loc 1 1461 0
 2843 0030 2B68     		ldr	r3, [r5]
 2844 0032 3360     		str	r3, [r6]
1462:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *cur_seg = seg;
 2845              		.loc 1 1462 0
 2846 0034 2E60     		str	r6, [r5]
1463:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
1464:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->next == NULL) {
ARM GAS  /tmp/cccXI43k.s 			page 83


 2847              		.loc 1 1464 0
 2848 0036 3368     		ldr	r3, [r6]
 2849 0038 4BB1     		cbz	r3, .L275
 2850              	.L272:
1465:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* the retransmitted segment is last in unsent, so reset unsent_oversize */
1466:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent_oversize = 0;
1467:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1468:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
1469:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1470:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->nrtx < 0xFF) {
 2851              		.loc 1 1470 0
 2852 003a 97F84230 		ldrb	r3, [r7, #66]	@ zero_extendqisi2
 2853 003e FF2B     		cmp	r3, #255
 2854 0040 02D0     		beq	.L273
1471:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++pcb->nrtx;
 2855              		.loc 1 1471 0
 2856 0042 0133     		adds	r3, r3, #1
 2857 0044 87F84230 		strb	r3, [r7, #66]
 2858              	.L273:
1472:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1473:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1474:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Don't take any rtt measurements after retransmitting. */
1475:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->rttest = 0;
 2859              		.loc 1 1475 0
 2860 0048 0023     		movs	r3, #0
 2861 004a 7B63     		str	r3, [r7, #52]
 2862              	.LVL347:
 2863              	.L267:
1476:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1477:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Do the actual retransmission. */
1478:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   MIB2_STATS_INC(mib2.tcpretranssegs);
1479:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* No need to call tcp_output: we are always called from tcp_input()
1480:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      and thus tcp_output directly returns. */
1481:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2864              		.loc 1 1481 0
 2865 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2866              	.LVL348:
 2867              	.L275:
1466:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2868              		.loc 1 1466 0
 2869 004e A7F86430 		strh	r3, [r7, #100]	@ movhi
 2870 0052 F2E7     		b	.L272
 2871              		.cfi_endproc
 2872              	.LFE164:
 2874              		.section	.text.tcp_rexmit_fast,"ax",%progbits
 2875              		.align	1
 2876              		.global	tcp_rexmit_fast
 2877              		.syntax unified
 2878              		.thumb
 2879              		.thumb_func
 2880              		.fpu fpv5-sp-d16
 2882              	tcp_rexmit_fast:
 2883              	.LFB165:
1482:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1483:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1484:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1485:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Handle retransmission after three dupacks received
ARM GAS  /tmp/cccXI43k.s 			page 84


1486:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1487:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to retransmit the first unacked segment
1488:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1489:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** void
1490:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit_fast(struct tcp_pcb *pcb)
1491:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 2884              		.loc 1 1491 0
 2885              		.cfi_startproc
 2886              		@ args = 0, pretend = 0, frame = 0
 2887              		@ frame_needed = 0, uses_anonymous_args = 0
 2888              	.LVL349:
1492:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unacked != NULL && !(pcb->flags & TF_INFR)) {
 2889              		.loc 1 1492 0
 2890 0000 C36E     		ldr	r3, [r0, #108]
 2891 0002 1BB1     		cbz	r3, .L284
 2892              		.loc 1 1492 0 is_stmt 0 discriminator 1
 2893 0004 837E     		ldrb	r3, [r0, #26]	@ zero_extendqisi2
 2894 0006 13F0040F 		tst	r3, #4
 2895 000a 00D0     		beq	.L287
 2896              	.L284:
 2897 000c 7047     		bx	lr
 2898              	.L287:
1491:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unacked != NULL && !(pcb->flags & TF_INFR)) {
 2899              		.loc 1 1491 0 is_stmt 1
 2900 000e 10B5     		push	{r4, lr}
 2901              	.LCFI29:
 2902              		.cfi_def_cfa_offset 8
 2903              		.cfi_offset 4, -8
 2904              		.cfi_offset 14, -4
 2905 0010 0446     		mov	r4, r0
1493:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* This is fast retransmit. Retransmit the first unacked segment. */
1494:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_FR_DEBUG,
1495:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_receive: dupacks %"U16_F" (%"U32_F
1496:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  "), fast retransmit %"U32_F"\n",
1497:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  (u16_t)pcb->dupacks, pcb->lastack,
1498:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  lwip_ntohl(pcb->unacked->tcphdr->seqno)));
1499:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_rexmit(pcb);
 2906              		.loc 1 1499 0
 2907 0012 FFF7FEFF 		bl	tcp_rexmit
 2908              	.LVL350:
1500:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1501:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Set ssthresh to half of the minimum of the current
1502:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * cwnd and the advertised window */
1503:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->ssthresh = LWIP_MIN(pcb->cwnd, pcb->snd_wnd) / 2;
 2909              		.loc 1 1503 0
 2910 0016 B4F84830 		ldrh	r3, [r4, #72]
 2911 001a B4F85C20 		ldrh	r2, [r4, #92]
 2912 001e 9342     		cmp	r3, r2
 2913 0020 17D2     		bcs	.L278
 2914              		.loc 1 1503 0 is_stmt 0 discriminator 1
 2915 0022 5A08     		lsrs	r2, r3, #1
 2916              	.L280:
 2917              		.loc 1 1503 0 discriminator 4
 2918 0024 A4F84A20 		strh	r2, [r4, #74]	@ movhi
1504:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1505:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* The minimum value for ssthresh should be 2 MSS */
1506:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->ssthresh < (2U * pcb->mss)) {
ARM GAS  /tmp/cccXI43k.s 			page 85


 2919              		.loc 1 1506 0 is_stmt 1 discriminator 4
 2920 0028 638E     		ldrh	r3, [r4, #50]
 2921 002a B2EB430F 		cmp	r2, r3, lsl #1
 2922 002e 02D2     		bcs	.L282
1507:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_DEBUGF(TCP_FR_DEBUG,
1508:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   ("tcp_receive: The minimum value for ssthresh %"TCPWNDSIZE_F
1509:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                    " should be min 2 mss %"U16_F"...\n",
1510:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                    pcb->ssthresh, (u16_t)(2*pcb->mss)));
1511:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->ssthresh = 2*pcb->mss;
 2923              		.loc 1 1511 0
 2924 0030 5A00     		lsls	r2, r3, #1
 2925 0032 A4F84A20 		strh	r2, [r4, #74]	@ movhi
 2926              	.L282:
1512:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1513:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1514:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->cwnd = pcb->ssthresh + 3 * pcb->mss;
 2927              		.loc 1 1514 0
 2928 0036 B4F84A20 		ldrh	r2, [r4, #74]
 2929 003a 03EB4303 		add	r3, r3, r3, lsl #1
 2930 003e 1344     		add	r3, r3, r2
 2931 0040 A4F84830 		strh	r3, [r4, #72]	@ movhi
1515:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->flags |= TF_INFR;
 2932              		.loc 1 1515 0
 2933 0044 A37E     		ldrb	r3, [r4, #26]	@ zero_extendqisi2
 2934 0046 43F00403 		orr	r3, r3, #4
 2935 004a A376     		strb	r3, [r4, #26]
1516:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1517:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Reset the retransmission timer to prevent immediate rto retransmissions */
1518:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rtime = 0;
 2936              		.loc 1 1518 0
 2937 004c 0023     		movs	r3, #0
 2938 004e 2386     		strh	r3, [r4, #48]	@ movhi
1519:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1520:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2939              		.loc 1 1520 0
 2940 0050 10BD     		pop	{r4, pc}
 2941              	.LVL351:
 2942              	.L278:
1503:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 2943              		.loc 1 1503 0 discriminator 2
 2944 0052 5208     		lsrs	r2, r2, #1
 2945 0054 E6E7     		b	.L280
 2946              		.cfi_endproc
 2947              	.LFE165:
 2949              		.section	.text.tcp_keepalive,"ax",%progbits
 2950              		.align	1
 2951              		.global	tcp_keepalive
 2952              		.syntax unified
 2953              		.thumb
 2954              		.thumb_func
 2955              		.fpu fpv5-sp-d16
 2957              	tcp_keepalive:
 2958              	.LFB166:
1521:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1522:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1523:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1524:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Send keepalive packets to keep a connection active although
ARM GAS  /tmp/cccXI43k.s 			page 86


1525:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * no data is sent over it.
1526:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1527:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_slowtmr()
1528:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1529:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to send a keepalive packet
1530:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1531:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
1532:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_keepalive(struct tcp_pcb *pcb)
1533:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 2959              		.loc 1 1533 0
 2960              		.cfi_startproc
 2961              		@ args = 0, pretend = 0, frame = 0
 2962              		@ frame_needed = 0, uses_anonymous_args = 0
 2963              	.LVL352:
 2964 0000 70B5     		push	{r4, r5, r6, lr}
 2965              	.LCFI30:
 2966              		.cfi_def_cfa_offset 16
 2967              		.cfi_offset 4, -16
 2968              		.cfi_offset 5, -12
 2969              		.cfi_offset 6, -8
 2970              		.cfi_offset 14, -4
 2971 0002 84B0     		sub	sp, sp, #16
 2972              	.LCFI31:
 2973              		.cfi_def_cfa_offset 32
 2974 0004 0446     		mov	r4, r0
1534:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
1535:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
1536:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct netif *netif;
1537:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1538:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_keepalive: sending KEEPALIVE probe to "));
1539:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   ip_addr_debug_print(TCP_DEBUG, &pcb->remote_ip);
1540:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("\n"));
1541:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1542:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_keepalive: tcp_ticks %"U32_F"   pcb->tmr %"U32_F" pcb->keep_cnt_sent
1543:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                           tcp_ticks, pcb->tmr, (u16_t)pcb->keep_cnt_sent));
1544:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1545:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header(pcb, 0, 0, lwip_htonl(pcb->snd_nxt - 1));
 2975              		.loc 1 1545 0
 2976 0006 C06C     		ldr	r0, [r0, #76]
 2977              	.LVL353:
 2978 0008 0138     		subs	r0, r0, #1
 2979 000a FFF7FEFF 		bl	lwip_htonl
 2980              	.LVL354:
 2981 000e 0346     		mov	r3, r0
 2982 0010 0022     		movs	r2, #0
 2983 0012 1146     		mov	r1, r2
 2984 0014 2046     		mov	r0, r4
 2985 0016 FFF7FEFF 		bl	tcp_output_alloc_header
 2986              	.LVL355:
1546:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 2987              		.loc 1 1546 0
 2988 001a D0B1     		cbz	r0, .L291
 2989 001c 0546     		mov	r5, r0
1547:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_DEBUG,
1548:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_keepalive: could not allocate memory for pbuf\n"));
1549:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
1550:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
ARM GAS  /tmp/cccXI43k.s 			page 87


1551:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   netif = ip_route(&pcb->local_ip, &pcb->remote_ip);
 2990              		.loc 1 1551 0
 2991 001e 261D     		adds	r6, r4, #4
 2992 0020 3046     		mov	r0, r6
 2993              	.LVL356:
 2994 0022 FFF7FEFF 		bl	ip4_route
 2995              	.LVL357:
1552:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (netif == NULL) {
 2996              		.loc 1 1552 0
 2997 0026 88B1     		cbz	r0, .L292
1553:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = ERR_RTE;
1554:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
1555:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if CHECKSUM_GEN_TCP
1556:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     IF__NETIF_CHECKSUM_ENABLED(netif, NETIF_CHECKSUM_GEN_TCP) {
1557:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       struct tcp_hdr *tcphdr = (struct tcp_hdr *)p->payload;
1558:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcphdr->chksum = ip_chksum_pseudo(p, IP_PROTO_TCP, p->tot_len,
1559:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         &pcb->local_ip, &pcb->remote_ip);
1560:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1561:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* CHECKSUM_GEN_TCP */
1562:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.xmit);
1563:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1564:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Send output to IP */
1565:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     NETIF_SET_HWADDRHINT(netif, &(pcb->addr_hint));
1566:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = ip_output_if(p, &pcb->local_ip, &pcb->remote_ip, pcb->ttl, 0, IP_PROTO_TCP, netif);
 2998              		.loc 1 1566 0
 2999 0028 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 3000 002a 0290     		str	r0, [sp, #8]
 3001 002c 0622     		movs	r2, #6
 3002 002e 0192     		str	r2, [sp, #4]
 3003 0030 0022     		movs	r2, #0
 3004 0032 0092     		str	r2, [sp]
 3005 0034 3246     		mov	r2, r6
 3006 0036 2146     		mov	r1, r4
 3007 0038 2846     		mov	r0, r5
 3008              	.LVL358:
 3009 003a FFF7FEFF 		bl	ip4_output_if
 3010              	.LVL359:
 3011 003e 0446     		mov	r4, r0
 3012              	.LVL360:
 3013              	.L290:
1567:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     NETIF_SET_HWADDRHINT(netif, NULL);
1568:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1569:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pbuf_free(p);
 3014              		.loc 1 1569 0
 3015 0040 2846     		mov	r0, r5
 3016 0042 FFF7FEFF 		bl	pbuf_free
 3017              	.LVL361:
 3018              	.L289:
1570:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1571:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_keepalive: seqno %"U32_F" ackno %"U32_F" err %d.\n",
1572:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                           pcb->snd_nxt - 1, pcb->rcv_nxt, (int)err));
1573:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
1574:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 3019              		.loc 1 1574 0
 3020 0046 2046     		mov	r0, r4
 3021 0048 04B0     		add	sp, sp, #16
 3022              	.LCFI32:
ARM GAS  /tmp/cccXI43k.s 			page 88


 3023              		.cfi_remember_state
 3024              		.cfi_def_cfa_offset 16
 3025              		@ sp needed
 3026 004a 70BD     		pop	{r4, r5, r6, pc}
 3027              	.LVL362:
 3028              	.L292:
 3029              	.LCFI33:
 3030              		.cfi_restore_state
1553:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 3031              		.loc 1 1553 0
 3032 004c 6FF00304 		mvn	r4, #3
 3033              	.LVL363:
 3034 0050 F6E7     		b	.L290
 3035              	.LVL364:
 3036              	.L291:
1549:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3037              		.loc 1 1549 0
 3038 0052 4FF0FF34 		mov	r4, #-1
 3039              	.LVL365:
 3040 0056 F6E7     		b	.L289
 3041              		.cfi_endproc
 3042              	.LFE166:
 3044              		.section	.text.tcp_zero_window_probe,"ax",%progbits
 3045              		.align	1
 3046              		.global	tcp_zero_window_probe
 3047              		.syntax unified
 3048              		.thumb
 3049              		.thumb_func
 3050              		.fpu fpv5-sp-d16
 3052              	tcp_zero_window_probe:
 3053              	.LFB167:
1575:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1576:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1577:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1578:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Send persist timer zero-window probes to keep a connection active
1579:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * when a window update is lost.
1580:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1581:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_slowtmr()
1582:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1583:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to send a zero-window probe packet
1584:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1585:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
1586:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_zero_window_probe(struct tcp_pcb *pcb)
1587:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 3054              		.loc 1 1587 0
 3055              		.cfi_startproc
 3056              		@ args = 0, pretend = 0, frame = 0
 3057              		@ frame_needed = 0, uses_anonymous_args = 0
 3058              	.LVL366:
 3059 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3060              	.LCFI34:
 3061              		.cfi_def_cfa_offset 24
 3062              		.cfi_offset 4, -24
 3063              		.cfi_offset 5, -20
 3064              		.cfi_offset 6, -16
 3065              		.cfi_offset 7, -12
 3066              		.cfi_offset 8, -8
ARM GAS  /tmp/cccXI43k.s 			page 89


 3067              		.cfi_offset 14, -4
 3068 0004 84B0     		sub	sp, sp, #16
 3069              	.LCFI35:
 3070              		.cfi_def_cfa_offset 40
1588:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
1589:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
1590:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_hdr *tcphdr;
1591:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
1592:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t len;
1593:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t is_fin;
1594:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t snd_nxt;
1595:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct netif *netif;
1596:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1597:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_zero_window_probe: sending ZERO WINDOW probe to "));
1598:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   ip_addr_debug_print(TCP_DEBUG, &pcb->remote_ip);
1599:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("\n"));
1600:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1601:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG,
1602:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               ("tcp_zero_window_probe: tcp_ticks %"U32_F
1603:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                "   pcb->tmr %"U32_F" pcb->keep_cnt_sent %"U16_F"\n",
1604:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                tcp_ticks, pcb->tmr, (u16_t)pcb->keep_cnt_sent));
1605:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1606:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg = pcb->unacked;
 3071              		.loc 1 1606 0
 3072 0006 C56E     		ldr	r5, [r0, #108]
 3073              	.LVL367:
1607:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1608:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg == NULL) {
 3074              		.loc 1 1608 0
 3075 0008 75B1     		cbz	r5, .L308
 3076              	.L295:
1609:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg = pcb->unsent;
1610:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1611:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg == NULL) {
 3077              		.loc 1 1611 0
 3078 000a 002D     		cmp	r5, #0
 3079 000c 5DD0     		beq	.L302
 3080 000e 0446     		mov	r4, r0
1612:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* nothing to send, zero window probe not needed */
1613:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
1614:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1615:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1616:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   is_fin = ((TCPH_FLAGS(seg->tcphdr) & TCP_FIN) != 0) && (seg->len == 0);
 3081              		.loc 1 1616 0
 3082 0010 EB68     		ldr	r3, [r5, #12]
 3083 0012 9889     		ldrh	r0, [r3, #12]	@ unaligned
 3084              	.LVL368:
 3085 0014 FFF7FEFF 		bl	lwip_htons
 3086              	.LVL369:
 3087 0018 10F0010F 		tst	r0, #1
 3088 001c 06D0     		beq	.L303
 3089              		.loc 1 1616 0 is_stmt 0 discriminator 1
 3090 001e 2B89     		ldrh	r3, [r5, #8]
 3091 0020 002B     		cmp	r3, #0
 3092 0022 40D0     		beq	.L304
 3093              		.loc 1 1616 0
 3094 0024 0022     		movs	r2, #0
ARM GAS  /tmp/cccXI43k.s 			page 90


 3095 0026 02E0     		b	.L297
 3096              	.LVL370:
 3097              	.L308:
1609:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg = pcb->unsent;
 3098              		.loc 1 1609 0 is_stmt 1
 3099 0028 856E     		ldr	r5, [r0, #104]
 3100              	.LVL371:
 3101 002a EEE7     		b	.L295
 3102              	.LVL372:
 3103              	.L303:
 3104              		.loc 1 1616 0
 3105 002c 0022     		movs	r2, #0
 3106              	.L297:
 3107              	.LVL373:
1617:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* we want to send one seqno: either FIN or data (no options) */
1618:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   len = is_fin ? 0 : 1;
 3108              		.loc 1 1618 0 discriminator 6
 3109 002e 02F0FF06 		and	r6, r2, #255
 3110              	.LVL374:
1619:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1620:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header(pcb, 0, len, seg->tcphdr->seqno);
 3111              		.loc 1 1620 0 discriminator 6
 3112 0032 EB68     		ldr	r3, [r5, #12]
 3113 0034 5B68     		ldr	r3, [r3, #4]	@ unaligned
 3114 0036 82F00102 		eor	r2, r2, #1
 3115              	.LVL375:
 3116 003a 0021     		movs	r1, #0
 3117 003c 2046     		mov	r0, r4
 3118 003e FFF7FEFF 		bl	tcp_output_alloc_header
 3119              	.LVL376:
1621:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 3120              		.loc 1 1621 0 discriminator 6
 3121 0042 0746     		mov	r7, r0
 3122 0044 0028     		cmp	r0, #0
 3123 0046 42D0     		beq	.L305
1622:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_DEBUG, ("tcp_zero_window_probe: no memory for pbuf\n"));
1623:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
1624:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1625:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr = (struct tcp_hdr *)p->payload;
 3124              		.loc 1 1625 0
 3125 0048 D0F80480 		ldr	r8, [r0, #4]
 3126              	.LVL377:
1626:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1627:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (is_fin) {
 3127              		.loc 1 1627 0
 3128 004c 6EB3     		cbz	r6, .L298
1628:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* FIN segment, no data */
1629:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_FLAGS_SET(tcphdr, TCP_ACK | TCP_FIN);
 3129              		.loc 1 1629 0
 3130 004e B8F80C60 		ldrh	r6, [r8, #12]	@ unaligned
 3131 0052 26F47C56 		bic	r6, r6, #16128
 3132 0056 B6B2     		uxth	r6, r6
 3133 0058 1120     		movs	r0, #17
 3134              	.LVL378:
 3135 005a FFF7FEFF 		bl	lwip_htons
 3136              	.LVL379:
 3137 005e 3043     		orrs	r0, r0, r6
ARM GAS  /tmp/cccXI43k.s 			page 91


 3138 0060 A8F80C00 		strh	r0, [r8, #12]	@ unaligned
 3139              	.L299:
1630:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
1631:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Data segment, copy in one byte from the head of the unacked queue */
1632:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     char *d = ((char *)p->payload + TCP_HLEN);
1633:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Depending on whether the segment has already been sent (unacked) or not
1634:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        (unsent), seg->p->payload points to the IP header or TCP header.
1635:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        Ensure we copy the first TCP data byte: */
1636:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_copy_partial(seg->p, d, 1, seg->p->tot_len - seg->len);
1637:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1638:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1639:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* The byte may be acknowledged without the window being opened. */
1640:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   snd_nxt = lwip_ntohl(seg->tcphdr->seqno) + 1;
 3140              		.loc 1 1640 0
 3141 0064 EB68     		ldr	r3, [r5, #12]
 3142 0066 5868     		ldr	r0, [r3, #4]	@ unaligned
 3143 0068 FFF7FEFF 		bl	lwip_htonl
 3144              	.LVL380:
 3145 006c 0130     		adds	r0, r0, #1
 3146              	.LVL381:
1641:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (TCP_SEQ_LT(pcb->snd_nxt, snd_nxt)) {
 3147              		.loc 1 1641 0
 3148 006e E36C     		ldr	r3, [r4, #76]
 3149 0070 1B1A     		subs	r3, r3, r0
 3150 0072 002B     		cmp	r3, #0
 3151 0074 24DB     		blt	.L309
 3152              	.L300:
1642:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->snd_nxt = snd_nxt;
1643:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1644:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   netif = ip_route(&pcb->local_ip, &pcb->remote_ip);
 3153              		.loc 1 1645 0
 3154 0076 251D     		adds	r5, r4, #4
 3155              	.LVL382:
 3156 0078 2846     		mov	r0, r5
 3157              	.LVL383:
 3158 007a FFF7FEFF 		bl	ip4_route
 3159              	.LVL384:
1646:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (netif == NULL) {
 3160              		.loc 1 1646 0
 3161 007e 08B3     		cbz	r0, .L306
1647:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = ERR_RTE;
1648:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
1649:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if CHECKSUM_GEN_TCP
1650:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     IF__NETIF_CHECKSUM_ENABLED(netif, NETIF_CHECKSUM_GEN_TCP) {
1651:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcphdr->chksum = ip_chksum_pseudo(p, IP_PROTO_TCP, p->tot_len,
1652:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         &pcb->local_ip, &pcb->remote_ip);
1653:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1654:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1655:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.xmit);
1656:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1657:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Send output to IP */
1658:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     NETIF_SET_HWADDRHINT(netif, &(pcb->addr_hint));
1659:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = ip_output_if(p, &pcb->local_ip, &pcb->remote_ip, pcb->ttl,
 3162              		.loc 1 1659 0
 3163 0080 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 3164 0082 0290     		str	r0, [sp, #8]
ARM GAS  /tmp/cccXI43k.s 			page 92


 3165 0084 0622     		movs	r2, #6
 3166 0086 0192     		str	r2, [sp, #4]
 3167 0088 0022     		movs	r2, #0
 3168 008a 0092     		str	r2, [sp]
 3169 008c 2A46     		mov	r2, r5
 3170 008e 2146     		mov	r1, r4
 3171 0090 3846     		mov	r0, r7
 3172              	.LVL385:
 3173 0092 FFF7FEFF 		bl	ip4_output_if
 3174              	.LVL386:
 3175 0096 0446     		mov	r4, r0
 3176              	.LVL387:
 3177              	.L301:
1660:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       0, IP_PROTO_TCP, netif);
1661:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     NETIF_SET_HWADDRHINT(netif, NULL);
1662:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1663:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1664:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pbuf_free(p);
 3178              		.loc 1 1664 0
 3179 0098 3846     		mov	r0, r7
 3180 009a FFF7FEFF 		bl	pbuf_free
 3181              	.LVL388:
 3182              	.L296:
1665:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1666:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_zero_window_probe: seqno %"U32_F
1667:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                           " ackno %"U32_F" err %d.\n",
1668:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                           pcb->snd_nxt - 1, pcb->rcv_nxt, (int)err));
1669:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
1670:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 3183              		.loc 1 1670 0
 3184 009e 2046     		mov	r0, r4
 3185 00a0 04B0     		add	sp, sp, #16
 3186              	.LCFI36:
 3187              		.cfi_remember_state
 3188              		.cfi_def_cfa_offset 24
 3189              		@ sp needed
 3190 00a2 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3191              	.LVL389:
 3192              	.L304:
 3193              	.LCFI37:
 3194              		.cfi_restore_state
1616:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* we want to send one seqno: either FIN or data (no options) */
 3195              		.loc 1 1616 0
 3196 00a6 0122     		movs	r2, #1
 3197 00a8 C1E7     		b	.L297
 3198              	.LVL390:
 3199              	.L298:
 3200              	.LBB30:
1636:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3201              		.loc 1 1636 0
 3202 00aa 6868     		ldr	r0, [r5, #4]
 3203              	.LVL391:
 3204 00ac 0389     		ldrh	r3, [r0, #8]
 3205 00ae 2A89     		ldrh	r2, [r5, #8]
 3206 00b0 9B1A     		subs	r3, r3, r2
 3207 00b2 9BB2     		uxth	r3, r3
 3208 00b4 0122     		movs	r2, #1
ARM GAS  /tmp/cccXI43k.s 			page 93


 3209 00b6 08F11401 		add	r1, r8, #20
 3210              	.LVL392:
 3211 00ba FFF7FEFF 		bl	pbuf_copy_partial
 3212              	.LVL393:
 3213 00be D1E7     		b	.L299
 3214              	.LVL394:
 3215              	.L309:
 3216              	.LBE30:
1642:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3217              		.loc 1 1642 0
 3218 00c0 E064     		str	r0, [r4, #76]
 3219 00c2 D8E7     		b	.L300
 3220              	.LVL395:
 3221              	.L306:
1647:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 3222              		.loc 1 1647 0
 3223 00c4 6FF00304 		mvn	r4, #3
 3224              	.LVL396:
 3225 00c8 E6E7     		b	.L301
 3226              	.LVL397:
 3227              	.L302:
1613:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3228              		.loc 1 1613 0
 3229 00ca 0024     		movs	r4, #0
 3230 00cc E7E7     		b	.L296
 3231              	.LVL398:
 3232              	.L305:
1623:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3233              		.loc 1 1623 0
 3234 00ce 4FF0FF34 		mov	r4, #-1
 3235              	.LVL399:
 3236 00d2 E4E7     		b	.L296
 3237              		.cfi_endproc
 3238              	.LFE167:
 3240              		.section	.rodata.tcp_create_segment.str1.4,"aMS",%progbits,1
 3241              		.align	2
 3242              	.LC5:
 3243 0000 702D3E74 		.ascii	"p->tot_len >= optlen\000"
 3243      6F745F6C 
 3243      656E203E 
 3243      3D206F70 
 3243      746C656E 
 3244              		.section	.rodata.tcp_enqueue_flags.str1.4,"aMS",%progbits,1
 3245              		.align	2
 3246              	.LC19:
 3247 0000 7463705F 		.ascii	"tcp_enqueue_flags: need either TCP_SYN or TCP_FIN i"
 3247      656E7175 
 3247      6575655F 
 3247      666C6167 
 3247      733A206E 
 3248 0033 6E20666C 		.ascii	"n flags (programmer violates API)\000"
 3248      61677320 
 3248      2870726F 
 3248      6772616D 
 3248      6D657220 
 3249 0055 000000   		.space	3
 3250              	.LC20:
ARM GAS  /tmp/cccXI43k.s 			page 94


 3251 0058 7463705F 		.ascii	"tcp_enqueue_flags: check that first pbuf can hold o"
 3251      656E7175 
 3251      6575655F 
 3251      666C6167 
 3251      733A2063 
 3252 008b 70746C65 		.ascii	"ptlen\000"
 3252      6E00
 3253 0091 000000   		.space	3
 3254              	.LC21:
 3255 0094 7365672D 		.ascii	"seg->tcphdr not aligned\000"
 3255      3E746370 
 3255      68647220 
 3255      6E6F7420 
 3255      616C6967 
 3256              	.LC22:
 3257 00ac 7463705F 		.ascii	"tcp_enqueue_flags: invalid segment length\000"
 3257      656E7175 
 3257      6575655F 
 3257      666C6167 
 3257      733A2069 
 3258 00d6 0000     		.space	2
 3259              	.LC23:
 3260 00d8 7463705F 		.ascii	"tcp_enqueue_flags: invalid queue length\000"
 3260      656E7175 
 3260      6575655F 
 3260      666C6167 
 3260      733A2069 
 3261              		.section	.rodata.tcp_output.str1.4,"aMS",%progbits,1
 3262              		.align	2
 3263              	.LC24:
 3264 0000 646F6E27 		.ascii	"don't call tcp_output for listen-pcbs\000"
 3264      74206361 
 3264      6C6C2074 
 3264      63705F6F 
 3264      75747075 
 3265 0026 0000     		.space	2
 3266              	.LC25:
 3267 0028 52535420 		.ascii	"RST not expected here!\000"
 3267      6E6F7420 
 3267      65787065 
 3267      63746564 
 3267      20686572 
 3268              		.section	.rodata.tcp_output_alloc_header.str1.4,"aMS",%progbits,1
 3269              		.align	2
 3270              	.LC6:
 3271 0000 63686563 		.ascii	"check that first pbuf can hold struct tcp_hdr\000"
 3271      6B207468 
 3271      61742066 
 3271      69727374 
 3271      20706275 
 3272              		.section	.rodata.tcp_pbuf_prealloc.str1.4,"aMS",%progbits,1
 3273              		.align	2
 3274              	.LC4:
 3275 0000 6E656564 		.ascii	"need unchained pbuf\000"
 3275      20756E63 
 3275      6861696E 
 3275      65642070 
ARM GAS  /tmp/cccXI43k.s 			page 95


 3275      62756600 
 3276              		.section	.rodata.tcp_write.str1.4,"aMS",%progbits,1
 3277              		.align	2
 3278              	.LC7:
 3279 0000 7463705F 		.ascii	"tcp_write: arg == NULL (programmer violates API)\000"
 3279      77726974 
 3279      653A2061 
 3279      7267203D 
 3279      3D204E55 
 3280 0031 000000   		.space	3
 3281              	.LC8:
 3282 0034 6D73735F 		.ascii	"mss_local is too small\000"
 3282      6C6F6361 
 3282      6C206973 
 3282      20746F6F 
 3282      20736D61 
 3283 004b 00       		.space	1
 3284              	.LC9:
 3285 004c 696E636F 		.ascii	"inconsistent oversize vs. space\000"
 3285      6E736973 
 3285      74656E74 
 3285      206F7665 
 3285      7273697A 
 3286              	.LC10:
 3287 006c 696E636F 		.ascii	"inconsistent oversize vs. len\000"
 3287      6E736973 
 3287      74656E74 
 3287      206F7665 
 3287      7273697A 
 3288 008a 0000     		.space	2
 3289              	.LC11:
 3290 008c 7463705F 		.ascii	"tcp_write: ROM pbufs cannot be oversized\000"
 3290      77726974 
 3290      653A2052 
 3290      4F4D2070 
 3290      62756673 
 3291 00b5 000000   		.space	3
 3292              	.LC12:
 3293 00b8 756E7365 		.ascii	"unsent_oversize mismatch (pcb->unsent is NULL)\000"
 3293      6E745F6F 
 3293      76657273 
 3293      697A6520 
 3293      6D69736D 
 3294 00e7 00       		.space	1
 3295              	.LC13:
 3296 00e8 7463705F 		.ascii	"tcp_write: check that first pbuf can hold the compl"
 3296      77726974 
 3296      653A2063 
 3296      6865636B 
 3296      20746861 
 3297 011b 65746520 		.ascii	"ete seglen\000"
 3297      7365676C 
 3297      656E00
 3298 0126 0000     		.space	2
 3299              	.LC14:
 3300 0128 6F766572 		.ascii	"oversize == 0\000"
 3300      73697A65 
ARM GAS  /tmp/cccXI43k.s 			page 96


 3300      203D3D20 
 3300      3000
 3301 0136 0000     		.space	2
 3302              	.LC15:
 3303 0138 70726576 		.ascii	"prev_seg != NULL\000"
 3303      5F736567 
 3303      20213D20 
 3303      4E554C4C 
 3303      00
 3304 0149 000000   		.space	3
 3305              	.LC16:
 3306 014c 7463705F 		.ascii	"tcp_write: cannot concatenate when pcb->unsent is e"
 3306      77726974 
 3306      653A2063 
 3306      616E6E6F 
 3306      7420636F 
 3307 017f 6D707479 		.ascii	"mpty\000"
 3307      00
 3308              	.LC17:
 3309 0184 7463705F 		.ascii	"tcp_write: extension of reference requires referenc"
 3309      77726974 
 3309      653A2065 
 3309      7874656E 
 3309      73696F6E 
 3310 01b7 6500     		.ascii	"e\000"
 3311 01b9 000000   		.space	3
 3312              	.LC18:
 3313 01bc 7463705F 		.ascii	"tcp_write: valid queue length\000"
 3313      77726974 
 3313      653A2076 
 3313      616C6964 
 3313      20717565 
 3314              		.section	.rodata.tcp_write_checks.str1.4,"aMS",%progbits,1
 3315              		.align	2
 3316              	.LC0:
 3317 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/core/tcp_out.c\000"
 3317      6C657761 
 3317      7265732F 
 3317      54686972 
 3317      645F5061 
 3318              	.LC1:
 3319 0030 7463705F 		.ascii	"tcp_write: pbufs on queue => at least one queue non"
 3319      77726974 
 3319      653A2070 
 3319      62756673 
 3319      206F6E20 
 3320 0063 2D656D70 		.ascii	"-empty\000"
 3320      747900
 3321 006a 0000     		.space	2
 3322              	.LC2:
 3323 006c 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 3323      7274696F 
 3323      6E202225 
 3323      73222066 
 3323      61696C65 
 3324              	.LC3:
 3325 0094 7463705F 		.ascii	"tcp_write: no pbufs on queue => both queues empty\000"
ARM GAS  /tmp/cccXI43k.s 			page 97


 3325      77726974 
 3325      653A206E 
 3325      6F207062 
 3325      75667320 
 3326              		.text
 3327              	.Letext0:
 3328              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 3329              		.file 3 "/usr/arm-none-eabi/include/sys/_stdint.h"
 3330              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 3331              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 3332              		.file 6 "/usr/arm-none-eabi/include/sys/lock.h"
 3333              		.file 7 "/usr/arm-none-eabi/include/sys/_types.h"
 3334              		.file 8 "/usr/lib/gcc/arm-none-eabi/7.1.0/include/stddef.h"
 3335              		.file 9 "/usr/arm-none-eabi/include/sys/reent.h"
 3336              		.file 10 "/usr/arm-none-eabi/include/stdlib.h"
 3337              		.file 11 "/usr/arm-none-eabi/include/time.h"
 3338              		.file 12 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 3339              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 3340              		.file 14 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 3341              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 3342              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 3343              		.file 17 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 3344              		.file 18 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 3345              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 3346              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 3347              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 3348              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 3349              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/tcp_priv.h"
 3350              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/tcp.h"
 3351              		.file 25 "Middlewares/Third_Party/LwIP/src/include/lwip/def.h"
 3352              		.file 26 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4.h"
 3353              		.file 27 "/usr/arm-none-eabi/include/stdio.h"
 3354              		.file 28 "<built-in>"
ARM GAS  /tmp/cccXI43k.s 			page 98


DEFINED SYMBOLS
                            *ABS*:0000000000000000 tcp_out.c
     /tmp/cccXI43k.s:18     .text.tcp_write_checks:0000000000000000 $t
     /tmp/cccXI43k.s:24     .text.tcp_write_checks:0000000000000000 tcp_write_checks
     /tmp/cccXI43k.s:158    .text.tcp_write_checks:0000000000000094 $d
     /tmp/cccXI43k.s:166    .text.tcp_pbuf_prealloc:0000000000000000 $t
     /tmp/cccXI43k.s:172    .text.tcp_pbuf_prealloc:0000000000000000 tcp_pbuf_prealloc
     /tmp/cccXI43k.s:269    .text.tcp_pbuf_prealloc:0000000000000074 $d
     /tmp/cccXI43k.s:276    .text.tcp_create_segment:0000000000000000 $t
     /tmp/cccXI43k.s:282    .text.tcp_create_segment:0000000000000000 tcp_create_segment
     /tmp/cccXI43k.s:415    .text.tcp_create_segment:00000000000000b0 $d
     /tmp/cccXI43k.s:422    .text.tcp_output_alloc_header:0000000000000000 $t
     /tmp/cccXI43k.s:428    .text.tcp_output_alloc_header:0000000000000000 tcp_output_alloc_header
     /tmp/cccXI43k.s:534    .text.tcp_output_alloc_header:0000000000000088 $d
     /tmp/cccXI43k.s:541    .text.tcp_output_segment:0000000000000000 $t
     /tmp/cccXI43k.s:547    .text.tcp_output_segment:0000000000000000 tcp_output_segment
     /tmp/cccXI43k.s:703    .text.tcp_output_segment:00000000000000b8 $d
     /tmp/cccXI43k.s:708    .text.tcp_write:0000000000000000 $t
     /tmp/cccXI43k.s:715    .text.tcp_write:0000000000000000 tcp_write
     /tmp/cccXI43k.s:1203   .text.tcp_write:0000000000000278 $d
     /tmp/cccXI43k.s:1216   .text.tcp_write:000000000000029c $t
     /tmp/cccXI43k.s:1635   .text.tcp_write:00000000000004f4 $d
     /tmp/cccXI43k.s:1646   .text.tcp_enqueue_flags:0000000000000000 $t
     /tmp/cccXI43k.s:1653   .text.tcp_enqueue_flags:0000000000000000 tcp_enqueue_flags
     /tmp/cccXI43k.s:1899   .text.tcp_enqueue_flags:000000000000013c $d
     /tmp/cccXI43k.s:1910   .text.tcp_send_fin:0000000000000000 $t
     /tmp/cccXI43k.s:1917   .text.tcp_send_fin:0000000000000000 tcp_send_fin
     /tmp/cccXI43k.s:1990   .text.tcp_send_empty_ack:0000000000000000 $t
     /tmp/cccXI43k.s:1997   .text.tcp_send_empty_ack:0000000000000000 tcp_send_empty_ack
     /tmp/cccXI43k.s:2101   .text.tcp_output:0000000000000000 $t
     /tmp/cccXI43k.s:2108   .text.tcp_output:0000000000000000 tcp_output
     /tmp/cccXI43k.s:2555   .text.tcp_output:000000000000026c $d
     /tmp/cccXI43k.s:2565   .text.tcp_rst:0000000000000000 $t
     /tmp/cccXI43k.s:2572   .text.tcp_rst:0000000000000000 tcp_rst
     /tmp/cccXI43k.s:2702   .text.tcp_rst:00000000000000a0 $d
     /tmp/cccXI43k.s:2709   .text.tcp_rexmit_rto:0000000000000000 $t
     /tmp/cccXI43k.s:2716   .text.tcp_rexmit_rto:0000000000000000 tcp_rexmit_rto
     /tmp/cccXI43k.s:2782   .text.tcp_rexmit:0000000000000000 $t
     /tmp/cccXI43k.s:2789   .text.tcp_rexmit:0000000000000000 tcp_rexmit
     /tmp/cccXI43k.s:2875   .text.tcp_rexmit_fast:0000000000000000 $t
     /tmp/cccXI43k.s:2882   .text.tcp_rexmit_fast:0000000000000000 tcp_rexmit_fast
     /tmp/cccXI43k.s:2950   .text.tcp_keepalive:0000000000000000 $t
     /tmp/cccXI43k.s:2957   .text.tcp_keepalive:0000000000000000 tcp_keepalive
     /tmp/cccXI43k.s:3045   .text.tcp_zero_window_probe:0000000000000000 $t
     /tmp/cccXI43k.s:3052   .text.tcp_zero_window_probe:0000000000000000 tcp_zero_window_probe
     /tmp/cccXI43k.s:3241   .rodata.tcp_create_segment.str1.4:0000000000000000 $d
     /tmp/cccXI43k.s:3245   .rodata.tcp_enqueue_flags.str1.4:0000000000000000 $d
     /tmp/cccXI43k.s:3262   .rodata.tcp_output.str1.4:0000000000000000 $d
     /tmp/cccXI43k.s:3269   .rodata.tcp_output_alloc_header.str1.4:0000000000000000 $d
     /tmp/cccXI43k.s:3273   .rodata.tcp_pbuf_prealloc.str1.4:0000000000000000 $d
     /tmp/cccXI43k.s:3277   .rodata.tcp_write.str1.4:0000000000000000 $d
     /tmp/cccXI43k.s:3315   .rodata.tcp_write_checks.str1.4:0000000000000000 $d

UNDEFINED SYMBOLS
printf
pbuf_alloc
memp_malloc
ARM GAS  /tmp/cccXI43k.s 			page 99


pbuf_header
lwip_htons
lwip_htonl
pbuf_free
tcp_seg_free
ip4_output_if
tcp_eff_send_mss_impl
tcp_ticks
memcpy
pbuf_clen
pbuf_cat
tcp_segs_free
ip4_route
tcp_input_pcb
pbuf_copy_partial
